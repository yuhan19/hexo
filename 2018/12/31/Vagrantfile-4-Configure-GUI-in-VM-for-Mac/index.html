<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="When using Vagrant for a project, we have two options.  Using all development tools including IDE to edit code and compile in host, then run in VM.  better performance    synced_folder allows us to sy">
<meta property="og:type" content="article">
<meta property="og:title" content="Vagrantfile&lt;4&gt;--Configure GUI inside of VM for Mac">
<meta property="og:url" content="http://yoursite.com/2018/12/31/Vagrantfile-4-Configure-GUI-in-VM-for-Mac/index.html">
<meta property="og:site_name" content="呆呆窝">
<meta property="og:description" content="When using Vagrant for a project, we have two options.  Using all development tools including IDE to edit code and compile in host, then run in VM.  better performance    synced_folder allows us to sy">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2018/12/31/Vagrantfile-4-Configure-GUI-in-VM-for-Mac/synced_folder.gif">
<meta property="og:updated_time" content="2019-01-02T05:04:42.441Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vagrantfile&lt;4&gt;--Configure GUI inside of VM for Mac">
<meta name="twitter:description" content="When using Vagrant for a project, we have two options.  Using all development tools including IDE to edit code and compile in host, then run in VM.  better performance    synced_folder allows us to sy">
<meta name="twitter:image" content="http://yoursite.com/2018/12/31/Vagrantfile-4-Configure-GUI-in-VM-for-Mac/synced_folder.gif">






  <link rel="canonical" href="http://yoursite.com/2018/12/31/Vagrantfile-4-Configure-GUI-in-VM-for-Mac/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Vagrantfile<4>--Configure GUI inside of VM for Mac | 呆呆窝</4></title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">呆呆窝</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/31/Vagrantfile-4-Configure-GUI-in-VM-for-Mac/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="呆阿呆阿呆">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="呆呆窝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Vagrantfile<4>--Configure GUI inside of VM for Mac

              
            
          </4></h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-12-31 16:57:34" itemprop="dateCreated datePublished" datetime="2018-12-31T16:57:34-06:00">2018-12-31</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-01-01 23:04:42" itemprop="dateModified" datetime="2019-01-01T23:04:42-06:00">2019-01-01</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>When using Vagrant for a project, we have two options.</p>
<ol>
<li>Using all development tools including IDE to <strong>edit code and compile in host, then run in VM</strong>.<ul>
<li><ul>
<li>better performance</li>
</ul>
</li>
<li><ul>
<li>synced_folder allows us to synchronize codes between VM and local.</li>
</ul>
</li>
<li><ul>
<li>hard to fix once mess up local development environment (like me !!!)</li>
</ul>
</li>
</ul>
</li>
<li>Having another set of development tools in VM, developer <strong>writes code, compile and deploy in VM</strong>.<ul>
<li><ul>
<li>consistency: ensure the same development environment </li>
</ul>
</li>
<li><ul>
<li>lantency: GUI and Compiling. In SED, if I wanna use developer machine (like a high performance desktop), I have to ssh into server then vagrant ssh into VMs. We are now suffering high GUI latency when using IntelliJ in this situation (5 seconds for searching panel to show up). It is 2 X Forwarding, boss said it is an existing official bug.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>In this blog, I will introduce these two methods.</p>
<h2 id="IDE-in-host"><a href="#IDE-in-host" class="headerlink" title="IDE in host"></a>IDE in host</h2><p>This is achieved by a <a href="https://www.vagrantup.com/docs/synced-folders/" target="_blank" rel="noopener">synced folder</a> functionality of Vagrant. Introduced in <a href="https://yuhan19.github.io/2018/12/15/Vagrantfile-2-Vagrantfile/" target="_blank" rel="noopener">Vagrantfile<2>–Vagrantfile</2></a><br>It synchronizes folder between VM and host.</p>
<p>Demo:<br><img src="/2018/12/31/Vagrantfile-4-Configure-GUI-in-VM-for-Mac/synced_folder.gif" alt=""></p>
<h2 id="IDE-in-VM-Mac"><a href="#IDE-in-VM-Mac" class="headerlink" title="IDE in VM (Mac)"></a>IDE in VM (Mac)</h2><p>Relates keyword: DISPLAY, xhost, XForwarding, X Server,  X Client</p>
<p>It is a little bit more complicated.<br>Basically, when running intelliJ, we should have a GUI window pop up. What we have to do now is to forward this window from VM to our host. </p>
<h3 id="Some-notations"><a href="#Some-notations" class="headerlink" title="Some notations:"></a>Some notations:</h3><ul>
<li>DISPLAY: an environment variable that indicates where to show this window.<ul>
<li>Format: DISPLAY=IP:displaynumber.screennumber</li>
<li>e.g. DISPLAY=:0.0 show window in local</li>
</ul>
</li>
<li>xhost: a list that is allowed to make connections to the X server</li>
<li>X Forwarding: Using X forwarding in an SSH session on your personal computer allows you to securely run graphical applications </li>
<li>X Server: e.g. host. It supplies screen for VM</li>
<li>X Client: e.g. VM. It uses the screen supplied by host.</li>
</ul>
<h3 id="Steps-in-theory"><a href="#Steps-in-theory" class="headerlink" title="Steps in theory"></a>Steps in theory</h3><ol>
<li>Run a X Server in host (XQuartz for mac)</li>
<li>Use X forwarding when ssh into VM</li>
<li>Set proper DISPLAY in VM </li>
<li>Run idea in VM</li>
</ol>
<h3 id="In-Mac"><a href="#In-Mac" class="headerlink" title="In Mac"></a>In Mac</h3><ol>
<li>Install <code>XQuartz</code>, an Mac version of X Server.<code>brew cask install xquartz</code></li>
<li>Mac DISPLAY should already be set to DISPLAY=/private/tmp/com.apple.launchd.GxQDyjI1Mr/org.macosforge.xquartz:0</li>
<li><code>vagrant ssh vm -- -X</code>, -X relates to X forwarding.</li>
<li>Run idea in VM</li>
</ol>
<h3 id="Common-errors"><a href="#Common-errors" class="headerlink" title="Common errors"></a>Common errors</h3><ul>
<li><p>Without X Server set.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant@ui:/synced_folder/idea-IC-183.4588.61/bin$ ./idea.sh</span><br><span class="line">Startup Error: Unable to detect graphics environment</span><br></pre></td></tr></table></figure>
</li>
<li><p>Set DISPLAY in VM wihout X Server set.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">vagrant@ui:/synced_folder/idea-IC-183.4588.61/bin$ ./idea.sh</span><br><span class="line"></span><br><span class="line">Start Failed: Failed to initialize graphics environment</span><br><span class="line"></span><br><span class="line">java.awt.AWTError: Can&apos;t connect to X11 window server using &apos;:0.0&apos; as the value of the DISPLAY variable.</span><br><span class="line"> at sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)</span><br><span class="line"> at sun.awt.X11GraphicsEnvironment.access$200(X11GraphicsEnvironment.java:65)</span><br><span class="line"> at sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:115)</span><br><span class="line"> at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line"> at sun.awt.X11GraphicsEnvironment.&lt;clinit&gt;(X11GraphicsEnvironment.java:74)</span><br><span class="line"> at java.lang.Class.forName0(Native Method)</span><br><span class="line"> at java.lang.Class.forName(Class.java:264)</span><br><span class="line"> at java.awt.GraphicsEnvironment.createGE(GraphicsEnvironment.java:103)</span><br><span class="line"> at java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:82)</span><br><span class="line"> at sun.awt.X11.XToolkit.&lt;clinit&gt;(XToolkit.java:128)</span><br><span class="line"> at java.lang.Class.forName0(Native Method)</span><br><span class="line"> at java.lang.Class.forName(Class.java:264)</span><br><span class="line"> at java.awt.Toolkit$2.run(Toolkit.java:860)</span><br><span class="line"> at java.awt.Toolkit$2.run(Toolkit.java:855)</span><br><span class="line"> at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line"> at java.awt.Toolkit.getDefaultToolkit(Toolkit.java:854)</span><br><span class="line"> at com.intellij.ui.AppUIUtil.updateFrameClass(AppUIUtil.java:161)</span><br><span class="line"> at com.intellij.idea.StartupUtil.prepareAndStart(StartupUtil.java:94)</span><br><span class="line"> at com.intellij.idea.MainImpl.start(MainImpl.java:20)</span><br><span class="line"> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line"> at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line"> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line"> at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line"> at com.intellij.ide.plugins.PluginManager.lambda$start$0(PluginManager.java:75)</span><br><span class="line"> at java.lang.Thread.run(Thread.java:745)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h3><ul>
<li><a href="https://stackoverflow.com/questions/17625421/vagrant-for-a-java-project-should-you-compile-in-the-vm-or-on-the-host" target="_blank" rel="noopener">https://stackoverflow.com/questions/17625421/vagrant-for-a-java-project-should-you-compile-in-the-vm-or-on-the-host</a></li>
<li><a href="https://blog.csdn.net/jlds123/article/details/6834287" target="_blank" rel="noopener">https://blog.csdn.net/jlds123/article/details/6834287</a></li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/15/Vagrantfile-2-Vagrantfile/" rel="next" title="Vagrantfile<2>--Vagrantfile">
                <i class="fa fa-chevron-left"></i> Vagrantfile<2>--Vagrantfile
              </2></a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/01/13/Flask-1-Decorator/" rel="prev" title="Flask<1>--Decorator">
                Flask<1>--Decorator <i class="fa fa-chevron-right"></i>
              </1></a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpeg" alt="呆阿呆阿呆">
            
              <p class="site-author-name" itemprop="name">呆阿呆阿呆</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#IDE-in-host"><span class="nav-text">IDE in host</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IDE-in-VM-Mac"><span class="nav-text">IDE in VM (Mac)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Some-notations"><span class="nav-text">Some notations:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Steps-in-theory"><span class="nav-text">Steps in theory</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#In-Mac"><span class="nav-text">In Mac</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Common-errors"><span class="nav-text">Common errors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reference"><span class="nav-text">reference</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">呆阿呆阿呆</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.7.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.7.0"></script>



  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  


  


  





  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
