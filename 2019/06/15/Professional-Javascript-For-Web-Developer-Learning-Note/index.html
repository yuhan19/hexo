<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Chapter2 JavaScript in HTML2.1 The &amp;lt;script&amp;gt; Element Attribute for script     Attribute Description     async Indicates that the script should begin downloading immediately but should not prevent">
<meta property="og:type" content="article">
<meta property="og:title" content="Professional Javascript For Web Developer Learning Note">
<meta property="og:url" content="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/index.html">
<meta property="og:site_name" content="呆呆窝">
<meta property="og:description" content="Chapter2 JavaScript in HTML2.1 The &amp;lt;script&amp;gt; Element Attribute for script     Attribute Description     async Indicates that the script should begin downloading immediately but should not prevent">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/prototype.png">
<meta property="og:image" content="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/inheritance.png">
<meta property="og:image" content="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/offsetDimension.png">
<meta property="og:image" content="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/ClientDimension.png">
<meta property="og:image" content="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/ScrollDimension.png">
<meta property="og:image" content="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/eventCapture.png">
<meta property="og:updated_time" content="2019-10-10T01:48:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Professional Javascript For Web Developer Learning Note">
<meta name="twitter:description" content="Chapter2 JavaScript in HTML2.1 The &amp;lt;script&amp;gt; Element Attribute for script     Attribute Description     async Indicates that the script should begin downloading immediately but should not prevent">
<meta name="twitter:image" content="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/prototype.png">






  <link rel="canonical" href="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Professional Javascript For Web Developer Learning Note | 呆呆窝</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">呆呆窝</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="呆阿呆阿呆">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="呆呆窝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Professional Javascript For Web Developer Learning Note

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-06-15 16:55:15" itemprop="dateCreated datePublished" datetime="2019-06-15T16:55:15-06:00">2019-06-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-10-09 19:48:25" itemprop="dateModified" datetime="2019-10-09T19:48:25-06:00">2019-10-09</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Chapter2-JavaScript-in-HTML"><a href="#Chapter2-JavaScript-in-HTML" class="headerlink" title="Chapter2 JavaScript in HTML"></a>Chapter2 JavaScript in HTML</h1><h2 id="2-1-The-lt-script-gt-Element"><a href="#2-1-The-lt-script-gt-Element" class="headerlink" title="2.1 The &lt;script&gt; Element"></a>2.1 The <code>&lt;script&gt;</code> Element</h2><ul>
<li>Attribute for script</li>
</ul>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>async</td>
<td>Indicates that the script should begin downloading immediately but should not prevent other actions on the page</td>
</tr>
<tr>
<td>charset</td>
<td></td>
</tr>
<tr>
<td>defer</td>
<td>deferred until after the document’s content has been completely parsed and displayed</td>
</tr>
<tr>
<td>src</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>default text/javascript</td>
</tr>
</tbody>
</table>
<ul>
<li>Without defer and async, the &lt;script> elements are interpreted in the order in which they appear in the page</li>
</ul>
<h2 id="2-2-Inline-Code-Versus-External-Files"><a href="#2-2-Inline-Code-Versus-External-Files" class="headerlink" title="2.2 Inline Code Versus External Files"></a>2.2 Inline Code Versus External Files</h2><h2 id="2-3-Document-Mode"><a href="#2-3-Document-Mode" class="headerlink" title="2.3 Document Mode"></a>2.3 Document Mode</h2><h2 id="2-4-The-lt-noscript-gt-Element"><a href="#2-4-The-lt-noscript-gt-Element" class="headerlink" title="2.4 The &lt;noscript&gt; Element"></a>2.4 The <code>&lt;noscript&gt;</code> Element</h2><ul>
<li><p>If browser does not support Javascript, it will show up</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>This page requires a JavaScript-enabled browser.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Chapter3-Language-Basics"><a href="#Chapter3-Language-Basics" class="headerlink" title="Chapter3 Language Basics"></a>Chapter3 Language Basics</h1><h2 id="3-1-Syntax"><a href="#3-1-Syntax" class="headerlink" title="3.1 Syntax"></a>3.1 Syntax</h2><p><strong>Strict mode</strong></p>
<ul>
<li>Some of the erratic behavior of ECMAScript 3 is addressed and errors are thrown for unsafe activities</li>
<li>Enable strict mode for an entire script: include <code>&quot;use strict&quot;;</code> in js top</li>
<li><p>Enable strict mode for a function:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    "use strict"</span>;</span><br><span class="line">    <span class="comment">// code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-2-Keywords-And-Reserved-Words"><a href="#3-2-Keywords-And-Reserved-Words" class="headerlink" title="3.2 Keywords And Reserved Words"></a>3.2 Keywords And Reserved Words</h2><h2 id="3-3-Variables"><a href="#3-3-Variables" class="headerlink" title="3.3 Variables"></a>3.3 Variables</h2><ul>
<li>ECMAScript variables are loosely typed</li>
<li><p>Scope</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;  <span class="comment">// local variable</span></span><br><span class="line">    b = <span class="number">2</span>;  <span class="comment">// global variable</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-4-Data-Types"><a href="#3-4-Data-Types" class="headerlink" title="3.4 Data Types"></a>3.4 Data Types</h2><ul>
<li>There are five primitive types in ECMAScript: <ul>
<li>Undefined</li>
<li>Null</li>
<li>Boolean</li>
<li>Number</li>
<li>String</li>
</ul>
</li>
</ul>
<h3 id="3-4-1-The-typeof-Operator"><a href="#3-4-1-The-typeof-Operator" class="headerlink" title="3.4.1 The typeof Operator"></a>3.4.1 The typeof Operator</h3><ul>
<li><p>Usage</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> msg = <span class="string">"aaa"</span>;</span><br><span class="line">alert(<span class="keyword">typeof</span> msg);</span><br><span class="line">alert(<span class="keyword">typeof</span>(msg));</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>Return string</li>
</ul>
<table>
<thead>
<tr>
<th>Return</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>undefined</td>
<td>if the value is undefined</td>
</tr>
<tr>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>string</td>
<td></td>
</tr>
<tr>
<td>number</td>
<td></td>
</tr>
<tr>
<td>object</td>
<td>if the value is an object or null</td>
</tr>
<tr>
<td>function</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="3-4-2-The-Undefined-Type"><a href="#3-4-2-The-Undefined-Type" class="headerlink" title="3.4.2 The Undefined Type"></a>3.4.2 The Undefined Type</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">alert(a == <span class="literal">undefined</span>); <span class="comment">// declared: true </span></span><br><span class="line">alert(b == <span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line">alert(b); <span class="comment">// "undefined"</span></span><br><span class="line">alert(c == <span class="literal">undefined</span>); <span class="comment">// error</span></span><br><span class="line">alert(<span class="keyword">typeof</span> c); <span class="comment">// "undefined", this is weird</span></span><br></pre></td></tr></table></figure>
<h3 id="3-4-3-The-Null-Type"><a href="#3-4-3-The-Null-Type" class="headerlink" title="3.4.3 The Null Type"></a>3.4.3 The Null Type</h3><ul>
<li>A null value is an empty object pointer<ul>
<li>so <code>typeof null === &quot;object&quot; //true</code> </li>
</ul>
</li>
<li>The value undefined is a derivative of null<ul>
<li>so <code>null == undefined //true</code></li>
</ul>
</li>
</ul>
<h3 id="3-4-4-The-Boolean-Type"><a href="#3-4-4-The-Boolean-Type" class="headerlink" title="3.4.4 The Boolean Type"></a>3.4.4 The Boolean Type</h3><table>
<thead>
<tr>
<th>Type</th>
<th>Values converted to true</th>
<th>Values converted to false</th>
</tr>
</thead>
<tbody>
<tr>
<td>Boolean</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>String</td>
<td>Any nonempty string</td>
<td>“”</td>
</tr>
<tr>
<td>Number</td>
<td>Any nonzero number</td>
<td>0</td>
</tr>
<tr>
<td>Object</td>
<td>Any object</td>
<td>null</td>
</tr>
<tr>
<td>Undefined</td>
<td>NA</td>
<td>undefined</td>
</tr>
</tbody>
</table>
<h3 id="3-4-5-The-Number-Type"><a href="#3-4-5-The-Number-Type" class="headerlink" title="3.4.5 The Number Type"></a>3.4.5 The Number Type</h3><ul>
<li>base 8: <code>var octalNum = 070;</code></li>
<li>base 16: <code>var hexNum = 0xA;</code></li>
<li>e-notation: <code>var floatNum = 3.125e7</code></li>
<li>Infinity<ul>
<li>max number: <code>Number.MAX_VALUE</code></li>
<li>min number: <code>Number.MIN_VALUE</code></li>
<li>positive infinity: <code>Infinity</code> or <code>Number.POSITIVE_INFINITY</code></li>
<li>negative infinity: <code>-Infinity</code> or <code>Number.NEGATIVE_INFINITY</code></li>
<li><code>isInfinite(xxx)</code></li>
</ul>
</li>
<li>NaN(Not a Number)<ul>
<li>any number divided by not number: <code>10/&quot;abc&quot;</code></li>
<li>any NaN operation: <code>NaN/10</code></li>
<li>NaN is not equal to any value, including NaN: <code>NaN == NaN //false</code></li>
<li><code>isNaN()</code>: determine if the value is “not a number.”</li>
</ul>
</li>
<li>Number Conversions<ul>
<li>Number()</li>
<li>parseInt()</li>
<li>parseFloat()<h3 id="3-4-6-The-String-Type"><a href="#3-4-6-The-String-Type" class="headerlink" title="3.4.6 The String Type"></a>3.4.6 The String Type</h3></li>
</ul>
</li>
<li>Immutable</li>
<li>If the value has a toString() method, it is called (with no arguments) and the result is returned.</li>
<li>If the value is null, “null” is returned.</li>
<li>If the value is undefined, “undefined” is returned</li>
</ul>
<h3 id="3-4-7-The-Object-Type"><a href="#3-4-7-The-Object-Type" class="headerlink" title="3.4.7 The Object Type"></a>3.4.7 The Object Type</h3><ul>
<li><code>var o = new Object()</code></li>
<li>Each Object instance has the following properties and method</li>
</ul>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>constructor</td>
<td>function that was used to create the object</td>
</tr>
<tr>
<td>hasOwnProperty(propertyName)</td>
<td>Indicates if the given property exists on the object instance (not on the prototype)</td>
</tr>
<tr>
<td>isPrototypeOf(object)</td>
<td>Determines if the object is a prototype of another object</td>
</tr>
<tr>
<td>propertyIsEnumerable(propertyName)</td>
<td>using the for-in statemen</td>
</tr>
<tr>
<td>toLocaleString()</td>
<td></td>
</tr>
<tr>
<td>toString()</td>
<td></td>
</tr>
<tr>
<td>valueOf()</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="3-5-Operators"><a href="#3-5-Operators" class="headerlink" title="3.5 Operators"></a>3.5 Operators</h2><ul>
<li>Identically Equal and Not Identically Equal<ul>
<li><code>55 == &quot;55&quot; //true</code></li>
<li><code>55 === &quot;55&quot; //false</code></li>
</ul>
</li>
</ul>
<h2 id="3-6-Statement"><a href="#3-6-Statement" class="headerlink" title="3.6 Statement"></a>3.6 Statement</h2><ul>
<li>Labeled Statement<ul>
<li><code>label: statement</code></li>
<li>used with <code>continue</code> and <code>break</code></li>
</ul>
</li>
<li><p>The With Statement</p>
<ul>
<li><p>The with statement sets the scope of the code within a particular object</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> qs = location.search.substring(<span class="number">1</span>); </span><br><span class="line"><span class="keyword">var</span> hostName = location.hostname;</span><br><span class="line"><span class="keyword">var</span> url = location.href;</span><br><span class="line"><span class="comment">// the same as</span></span><br><span class="line"><span class="keyword">with</span>(location)&#123;</span><br><span class="line">    <span class="keyword">var</span> qs = search.substring(<span class="number">1</span>); <span class="keyword">var</span> hostName = hostname;</span><br><span class="line">    <span class="keyword">var</span> url = href;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<pre><code>* DO NOT USE WITH: 

&gt; Chapter 24.2: With statement creates its own scope and therefore increases the length of the scope chain for code executed within it 
</code></pre><h2 id="3-7-Functions"><a href="#3-7-Functions" class="headerlink" title="3.7 Functions"></a>3.7 Functions</h2><ul>
<li><p>Parameters are only for convenience:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">typeof</span> b);</span><br><span class="line">    alert(<span class="keyword">typeof</span> a);</span><br><span class="line">&#125; </span><br><span class="line">sayHi(<span class="number">123</span>);    <span class="comment">// it works</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>arguments</code> in function</p>
<ul>
<li><code>arguments.length</code></li>
<li><code>arguments[0]</code> but arguments is not an Array instance</li>
</ul>
</li>
<li><strong>No Overloading</strong></li>
</ul>
<h1 id="Chapter4-Variables-Scope-and-Memory"><a href="#Chapter4-Variables-Scope-and-Memory" class="headerlink" title="Chapter4 Variables, Scope, and Memory"></a>Chapter4 Variables, Scope, and Memory</h1><h2 id="4-1-Primitive-And-Reference-Values"><a href="#4-1-Primitive-And-Reference-Values" class="headerlink" title="4.1 Primitive And Reference Values"></a>4.1 Primitive And Reference Values</h2><ul>
<li>Similar as Python:<ul>
<li>primitive type <strong>copy value</strong>: stored in <strong>stack</strong></li>
<li>reference type <strong>copy reference</strong> (pointer): stored in <strong>heap</strong></li>
</ul>
</li>
<li><p><code>instanceof</code>: if the variable is an instance of the given reference type</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert(person <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br><span class="line">alert(colors <span class="keyword">instanceof</span> <span class="built_in">Array</span>);</span><br><span class="line">alert(pattern <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4-2-Execution-Context-And-Scope"><a href="#4-2-Execution-Context-And-Scope" class="headerlink" title="4.2 Execution Context And Scope"></a>4.2 Execution Context And Scope</h2><ul>
<li>Each execution context has an associated variable object upon which all of its defined variables and functions exist</li>
<li>There are only <strong>two</strong> primary types of execution contexts <ul>
<li>global</li>
<li>function (local) </li>
</ul>
</li>
</ul>
<h3 id="4-2-1-Scope-Chain-Augmentation"><a href="#4-2-1-Scope-Chain-Augmentation" class="headerlink" title="4.2.1 Scope Chain Augmentation"></a>4.2.1 Scope Chain Augmentation</h3><ul>
<li>There are two way to augment the scope chain<ul>
<li>try-catch</li>
<li>with</li>
</ul>
</li>
</ul>
<h3 id="4-2-2-No-Block-Level-Scopes"><a href="#4-2-2-No-Block-Level-Scopes" class="headerlink" title="4.2.2 No Block-Level Scopes"></a>4.2.2 No Block-Level Scopes</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line">alert(i); <span class="comment">//10</span></span><br></pre></td></tr></table></figure>
<h2 id="4-3-Garbage-Collection"><a href="#4-3-Garbage-Collection" class="headerlink" title="4.3 Garbage Collection"></a>4.3 Garbage Collection</h2><ul>
<li>Two ways:<ul>
<li>mark-and-sweep</li>
<li>reference counting</li>
</ul>
</li>
</ul>
<h3 id="4-3-1-mark-and-sweep"><a href="#4-3-1-mark-and-sweep" class="headerlink" title="4.3.1 mark-and-sweep:"></a>4.3.1 mark-and-sweep:</h3><ul>
<li>Delete variable that cannot be fetched</li>
</ul>
<h3 id="4-3-2-reference-counting"><a href="#4-3-2-reference-counting" class="headerlink" title="4.3.2 reference counting"></a>4.3.2 reference counting</h3><ul>
<li>Delete variable that reference count == 0</li>
<li><p>Issue: circular reference</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(<span class="string">"some_element"</span>); </span><br><span class="line"><span class="keyword">var</span> myObject = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">myObject.element = element;</span><br><span class="line">element.someObject = myObject;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-3-3-Performance"><a href="#4-3-3-Performance" class="headerlink" title="4.3.3 Performance"></a>4.3.3 Performance</h3><h3 id="4-3-4-Managing-Memory"><a href="#4-3-4-Managing-Memory" class="headerlink" title="4.3.4 Managing Memory"></a>4.3.4 Managing Memory</h3><p><strong>Dereference</strong></p>
<p>The point of dereferencing is to make sure the value is out of context and will be reclaimed the next time garbage collection occurs. e.g.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = createPerson(<span class="string">"name"</span>);</span><br><span class="line">p = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<h1 id="Chapter5-Reference-Types"><a href="#Chapter5-Reference-Types" class="headerlink" title="Chapter5 Reference Types"></a>Chapter5 Reference Types</h1><h2 id="5-1-The-Object-Type"><a href="#5-1-The-Object-Type" class="headerlink" title="5.1 The Object Type"></a>5.1 The Object Type</h2><ul>
<li><p>Two ways to explicitly create an instance of Object:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();          <span class="comment">// constructor</span></span><br><span class="line">person.age = <span class="number">10</span>;</span><br><span class="line">person.name = <span class="string">"aaa"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;<span class="attr">age</span>:<span class="number">10</span>, <span class="attr">name</span>:<span class="string">"aaa"</span>&#125;;  <span class="comment">// object literal notation</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>Two ways to access attribute<ul>
<li><code>person.name</code>: preferred</li>
<li><code>person[&quot;name&quot;]</code>: used in case like <code>person[&quot;last name&quot;]</code></li>
</ul>
</li>
</ul>
<h2 id="5-2-The-Array-Type"><a href="#5-2-The-Array-Type" class="headerlink" title="5.2 The Array Type"></a>5.2 The Array Type</h2><ul>
<li><p>Two ways to explicitly create an instance of Array:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>();   <span class="comment">// constructor</span></span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">20</span>); <span class="comment">// length</span></span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="string">"aaa"</span>, obj);  <span class="comment">// can store any types</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colors = [];        <span class="comment">// array literal notation</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="number">1</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>
</li>
<li><p>access, update</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [<span class="number">1</span>, <span class="number">3</span>];</span><br><span class="line">colors[<span class="number">4</span>] = <span class="string">"aaa"</span>;  <span class="comment">// [1, 3, , , "aaa"]</span></span><br><span class="line">colors[<span class="number">3</span>];          <span class="comment">// undefined</span></span><br><span class="line">colors.length = <span class="number">2</span>;  <span class="comment">// [1, 3]</span></span><br><span class="line">colors.length = <span class="number">6</span>;  <span class="comment">// [1, 3, , , ,]</span></span><br><span class="line">colors[<span class="number">3</span>];          <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-2-1-Detecting-Arrays"><a href="#5-2-1-Detecting-Arrays" class="headerlink" title="5.2.1 Detecting Arrays"></a>5.2.1 Detecting Arrays</h3><ul>
<li>Reason:<ul>
<li>The one problem with <code>instanceof</code> assumes a single global execution context</li>
<li>If an array was passed from one frame into another frame, that array has a different constructor function.</li>
<li>So <code>instanceof</code> fail.</li>
</ul>
</li>
<li>Solution<ul>
<li><code>if (Array.isArray(colors))</code></li>
</ul>
</li>
</ul>
<h3 id="5-2-2-Conversion-Methods"><a href="#5-2-2-Conversion-Methods" class="headerlink" title="5.2.2 Conversion Methods"></a>5.2.2 Conversion Methods</h3><ul>
<li>toLocalString()</li>
<li>toString()</li>
<li>valueOf()</li>
</ul>
<h3 id="5-2-3-5-2-7"><a href="#5-2-3-5-2-7" class="headerlink" title="5.2.3-5.2.7"></a>5.2.3-5.2.7</h3><p><code>var nums = [0, 1, 2]</code></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stack</td>
<td>push(1, 2)</td>
<td>[0, 1, 2, 1, 2]</td>
</tr>
<tr>
<td>Stack</td>
<td>pop()</td>
<td>[0, 1]</td>
</tr>
<tr>
<td>Queue</td>
<td>shift()</td>
<td>[1, 2]</td>
</tr>
<tr>
<td>Queue</td>
<td>unshift(1, 2)</td>
<td>[1, 2, 0, 1, 2]</td>
</tr>
<tr>
<td>Reordering</td>
<td>reverse()</td>
<td>[2, 1, 0]</td>
</tr>
<tr>
<td>Reordering</td>
<td>sort(func)</td>
<td>a function for comparation</td>
</tr>
<tr>
<td>Manipulation</td>
<td>concat(3, [4, 5])</td>
<td>[0, 1, 2, 3, 4, 5]</td>
</tr>
<tr>
<td>Manipulation</td>
<td>slice()</td>
<td>slice(1): from index 1 to last <br> slice(1, 2): from index 1 to index 2 (excluded)</td>
</tr>
<tr>
<td>Matipulation</td>
<td>splice()</td>
<td><strong>deletion</strong>: splice(0, 3) // delte from index 0 for 3 element<br><strong>insertion</strong>: splice(2, 0, “123”) // insert “123” into index 2, delete 0 element<br><strong>replacement</strong>: splice(2, 1, “123”) // insert “123” into index 2, delete 1 element</td>
</tr>
<tr>
<td>Location</td>
<td>indexOf()</td>
<td>search from first element</td>
</tr>
<tr>
<td>Location</td>
<td>lastIndexOf()</td>
<td>search from last element</td>
</tr>
<tr>
<td>Iterative</td>
<td>every()</td>
<td><code>colors.every(function(item, index, array) {return item &gt; 2;});</code></td>
</tr>
<tr>
<td>Iterative</td>
<td>some()</td>
<td>similar as every()</td>
</tr>
<tr>
<td>Iterative</td>
<td>filter()</td>
<td><code>colors.filter(function(item, index, array) {return item &gt; 2;});</code></td>
</tr>
<tr>
<td>Iterative</td>
<td>forEach()</td>
<td><code>colors.map(function(item, index, array) {...});</code></td>
</tr>
<tr>
<td>Iterative</td>
<td>map()</td>
<td><code>colors.map(function(item, index, array) {return item * 2;});</code></td>
</tr>
<tr>
<td>Reduction</td>
<td>reduce()</td>
<td>like <code>foldl</code> in Go. From first item</td>
</tr>
<tr>
<td>Reduction</td>
<td>reduceRight()</td>
<td>like <code>foldr</code> in Go. From last item</td>
</tr>
</tbody>
</table>
<h2 id="5-3-THE-DATE-TYPE"><a href="#5-3-THE-DATE-TYPE" class="headerlink" title="5.3 THE DATE TYPE"></a>5.3 THE DATE TYPE</h2><p>Hard to say</p>
<h2 id="5-4-THE-REGEXP-TYPE"><a href="#5-4-THE-REGEXP-TYPE" class="headerlink" title="5.4 THE REGEXP TYPE"></a>5.4 THE REGEXP TYPE</h2><p>flags:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>g</td>
<td>global</td>
</tr>
<tr>
<td>i</td>
<td>case insensitive</td>
</tr>
<tr>
<td>m</td>
<td>multiline</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/[bc]at/i</span>;     <span class="comment">// var expression = /pattern/ flags</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"[bc]at"</span>, <span class="string">"i"</span>); <span class="comment">// var expression = new RegExp(patternString, flags);</span></span><br></pre></td></tr></table></figure>
<h3 id="5-4-1-RegExp-Instance-Properties"><a href="#5-4-1-RegExp-Instance-Properties" class="headerlink" title="5.4.1 RegExp Instance Properties"></a>5.4.1 RegExp Instance Properties</h3><table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>global</td>
<td>if g</td>
</tr>
<tr>
<td>ignoreCase</td>
<td>if i</td>
</tr>
<tr>
<td>multiline</td>
<td>if m</td>
</tr>
<tr>
<td>lastIndex</td>
<td>start position of next search</td>
</tr>
<tr>
<td>source</td>
<td>pattern information</td>
</tr>
</tbody>
</table>
<h3 id="5-4-2-RegExp-Instance-Methods"><a href="#5-4-2-RegExp-Instance-Methods" class="headerlink" title="5.4.2 RegExp Instance Methods"></a>5.4.2 RegExp Instance Methods</h3><ul>
<li><p>exec()</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> text = <span class="string">"..."</span>;</span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/xxx/</span>;</span><br><span class="line"><span class="keyword">var</span> matches = pattern.exec(text);</span><br><span class="line">alert(matches.index);</span><br><span class="line">alert(matches.input);</span><br><span class="line">alert(matches[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>test():<br>  <code>pattern.test(text) // return boolean</code></li>
</ul>
<h3 id="5-4-3-RegExp-Constructor-Properties"><a href="#5-4-3-RegExp-Constructor-Properties" class="headerlink" title="5.4.3 RegExp Constructor Properties"></a>5.4.3 RegExp Constructor Properties</h3><table>
<thead>
<tr>
<th>VERBOSE NAME</th>
<th>SHORT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td>input</td>
<td>$_</td>
</tr>
<tr>
<td>lastMatch</td>
<td>$&amp;</td>
</tr>
<tr>
<td>lastParen</td>
<td>$+</td>
</tr>
<tr>
<td>leftContext</td>
<td>$`</td>
</tr>
<tr>
<td>multiline</td>
<td>$*</td>
</tr>
<tr>
<td>rightContext</td>
<td>$’</td>
</tr>
</tbody>
</table>
<p>usage:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (pattern.test(text)) &#123;</span><br><span class="line">    alert(<span class="built_in">RegExp</span>.input);</span><br><span class="line">    alert(<span class="built_in">RegExp</span>.$_);</span><br><span class="line">    alert(<span class="built_in">RegExp</span>[<span class="string">"$'"</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-4-4-Pattern-Limitations"><a href="#5-4-4-Pattern-Limitations" class="headerlink" title="5.4.4 Pattern Limitations"></a>5.4.4 Pattern Limitations</h3><h2 id="5-5-The-Function-Type"><a href="#5-5-The-Function-Type" class="headerlink" title="5.5 The Function Type"></a>5.5 The Function Type</h2><ul>
<li>Each function is an instance of the <strong>Function</strong> type</li>
<li>Functions are actually Object<ul>
<li><code>func instanceof Object // true</code></li>
</ul>
</li>
<li>Function names are actually reference</li>
</ul>
<p><strong>Three</strong> ways to creat a function:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function declaration</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> (<span class="params">num1, num2</span>) </span>&#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function expression</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2</span>) </span>&#123;...&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"num1"</span>, <span class="string">"num2"</span>, <span class="string">"return num1 + num2"</span>); <span class="comment">// not recommended</span></span><br></pre></td></tr></table></figure>
<h3 id="5-5-1-No-Overloading"><a href="#5-5-1-No-Overloading" class="headerlink" title="5.5.1 No Overloading"></a>5.5.1 No Overloading</h3><p>Because function name is reference</p>
<h3 id="5-5-2-Function-Declarations-versus-Function-Expressions"><a href="#5-5-2-Function-Declarations-versus-Function-Expressions" class="headerlink" title="5.5.2 Function Declarations versus Function Expressions"></a>5.5.2 Function Declarations versus Function Expressions</h3><ul>
<li><strong>Function declarations</strong> are read and available in an execution context before any code is executed</li>
<li><p><strong>Function expressions</strong> aren’t complete until the execution reaches that line of code. </p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// works</span></span><br><span class="line">alert(sum(<span class="number">10</span>, <span class="number">10</span>));</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">alert(sum(<span class="number">10</span>, <span class="number">10</span>));</span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-5-3-Functions-as-Values"><a href="#5-5-3-Functions-as-Values" class="headerlink" title="5.5.3 Functions as Values"></a>5.5.3 Functions as Values</h3><ul>
<li>function can be parsed as argument and return </li>
</ul>
<h3 id="5-5-4-Function-Internals"><a href="#5-5-4-Function-Internals" class="headerlink" title="5.5.4 Function Internals"></a>5.5.4 Function Internals</h3><ul>
<li>arguments<ul>
<li><code>arguments.callee</code>: the function, can be used for recursion</li>
</ul>
</li>
<li><p>this</p>
<ul>
<li><p>It is a reference to the context object that the function is operating on.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.color = <span class="string">"red"</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">color</span>: <span class="string">"blue"</span> &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayColor</span>(<span class="params"></span>)</span>&#123; alert(<span class="keyword">this</span>.color);&#125;</span><br><span class="line"></span><br><span class="line">sayColor(); <span class="comment">//"red"</span></span><br><span class="line">o.sayColor = sayColor; </span><br><span class="line">o.sayColor(); <span class="comment">//"blue"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><a href="https://stackoverflow.com/questions/3127429/how-does-the-this-keyword-work" target="_blank" rel="noopener">Original Discussion</a></p>
<blockquote>
<p>The interpreter updates the ThisBinding whenever establishing an execution context in one of only three different cases:</p>
</blockquote>
<blockquote>
<ol>
<li>Initial global execution context</li>
<li>Entering eval code</li>
<li>Entering function code<ul>
<li>In most other cases, ThisBinding is set to the global object</li>
<li>If a function is <strong>called on an object</strong>, such as in <code>obj.myMethod()</code> or the equivalent <code>obj[&quot;myMethod&quot;]()</code>, then ThisBinding is set to the object. <ul>
<li>Opposite: <code>var a = obj.myMethod; a();</code> this bind to window</li>
</ul>
</li>
<li>These special functions take a so-called thisArg which becomes the ThisBinding when calling the function<ul>
<li>Function.prototype.apply( thisArg, argArray )</li>
<li>Function.prototype.call( thisArg [ , arg1 [ , arg2, … ] ] )</li>
<li>Function.prototype.bind( thisArg [ , arg1 [ , arg2, … ] ] )</li>
<li>Array.prototype.every( callbackfn [ , thisArg ] )</li>
<li>Array.prototype.some( callbackfn [ , thisArg ] )</li>
<li>Array.prototype.forEach( callbackfn [ , thisArg ] )</li>
<li>Array.prototype.map( callbackfn [ , thisArg ] )</li>
<li>Array.prototype.filter( callbackfn [ , thisArg ] )</li>
</ul>
</li>
</ul>
</li>
<li>new operation</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.someData = <span class="string">"a string"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> MyType();</span><br><span class="line">    </span><br><span class="line"><span class="comment">// similar as:</span></span><br><span class="line"><span class="keyword">var</span> instance = &#123;&#125;;</span><br><span class="line">MyType.call(instance);</span><br></pre></td></tr></table></figure>
<ul>
<li>caller<ul>
<li>A reference to the function that called this function or null if the function was called from the global scope.</li>
</ul>
</li>
</ul>
<h3 id="5-5-5-Function-Properties-and-Methods"><a href="#5-5-5-Function-Properties-and-Methods" class="headerlink" title="5.5.5 Function Properties and Methods"></a>5.5.5 Function Properties and Methods</h3><p><strong>Two properties</strong></p>
<ul>
<li>length: number of arguments expected</li>
<li>prototype<ul>
<li>actual location of all instance methods for reference types</li>
<li>methods such as toString(), valueOf() exist on prototype</li>
</ul>
</li>
</ul>
<p><strong>Two methods</strong></p>
<ul>
<li><p>func.apply(context, arguments):</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1, num2</span>) </span>&#123;<span class="keyword">return</span> num1 + num2;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callSum</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// so this refer to global. The same as call sum(arguments) in global</span></span><br><span class="line">    <span class="keyword">return</span> sum.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert(callSum(<span class="number">10</span>, <span class="number">10</span>));     <span class="comment">// this function is invoked in global</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>func.call(context, arg1, arg2, …)<ul>
<li>Similar as apply()</li>
<li>Only difference is argument should be parsed one by one</li>
<li>Usage: <code>sum.call(this, num1, num2);</code></li>
</ul>
</li>
<li><p>Their ability to <strong>augment context</strong> inside of the function</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sayColor.call(<span class="keyword">this</span>);</span><br><span class="line">sayColor.call(<span class="built_in">window</span>);</span><br><span class="line">sayColor.call(obj);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>bind(context)</p>
<ul>
<li>It returns a function instance</li>
<li><p>bind <code>this</code> to function    </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;<span class="string">"color"</span>: <span class="string">"blue"</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> objSayColor = sayColor.bind(o);</span><br><span class="line">objSayColor();  <span class="comment">// blue</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="5-6-Primitive-Wrapper-Types"><a href="#5-6-Primitive-Wrapper-Types" class="headerlink" title="5.6 Primitive Wrapper Types"></a>5.6 Primitive Wrapper Types</h2><p><strong>Three special reference types: </strong></p>
<ul>
<li>The Boolean type: <code>var b = new Boolean(false)</code></li>
<li>The Number type: <code>var n = new Number(10)</code></li>
<li>The String type: <code>var s = new String(&quot;abbb&quot;)</code></li>
</ul>
<p><strong>Reason:</strong></p>
<ul>
<li><code>&quot;aaaaa&quot;.substring(2)</code> is valid</li>
<li>“aaaaa” is <strong>primitive type</strong>, shoule not have method. These steps happened:<ol>
<li>Create an instance of the String type.</li>
<li>Call the specified method on the instance.</li>
<li>Destroy the instance.</li>
</ol>
</li>
</ul>
<h3 id="5-6-1-The-Boolean-Type"><a href="#5-6-1-The-Boolean-Type" class="headerlink" title="5.6.1 The Boolean Type"></a>5.6.1 The Boolean Type</h3><p>DO NOT USE IT.<br>Unexpted behaviour when doing logic operation</p>
<h3 id="5-6-2-The-Number-Type"><a href="#5-6-2-The-Number-Type" class="headerlink" title="5.6.2 The Number Type"></a>5.6.2 The Number Type</h3><table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>valueOf()</td>
<td></td>
</tr>
<tr>
<td>toLocaleString()</td>
<td></td>
</tr>
<tr>
<td>toString()</td>
<td></td>
</tr>
<tr>
<td>toFixed()</td>
<td><code>10.005.toFixed(2) // 10.01</code></td>
</tr>
<tr>
<td>toExponential()</td>
<td><code>10.toExponential(1) // 1.0e+1</code></td>
</tr>
<tr>
<td>toPrecision()</td>
<td>fixed or exponential</td>
</tr>
</tbody>
</table>
<h3 id="5-6-3-The-String-Type"><a href="#5-6-3-The-String-Type" class="headerlink" title="5.6.3 The String Type"></a>5.6.3 The String Type</h3><table>
<thead>
<tr>
<th>Type</th>
<th>Method</th>
</tr>
</thead>
<tbody>
<tr>
<td>Character Methods</td>
<td>charAt()<br>charCodeAt()<br>“xxx”[0]</td>
</tr>
<tr>
<td>String-Manipulation Methods</td>
<td>concat()<br>slice()<br>substring()<br>substr()</td>
</tr>
<tr>
<td>String Location Methods</td>
<td>indexOf()<br>lastIndexOf()</td>
</tr>
<tr>
<td>The trim() Method</td>
<td>trim()</td>
</tr>
<tr>
<td>String Case Methods</td>
<td>toLowerCase()<br>toLocalLowerCase()<br>toUpperCase()<br>toLocalUpperCase()</td>
</tr>
<tr>
<td>String Pattern-Matching Methods</td>
<td>5.4 RE<br>match()<br>replace()<br>htmlEscape()<br>split()</td>
</tr>
<tr>
<td>The localeCompare() Method</td>
<td></td>
</tr>
<tr>
<td>The fromCharCode() Method</td>
<td></td>
</tr>
<tr>
<td>HTML Methods</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="5-7-Singleton-Built-In-Objects"><a href="#5-7-Singleton-Built-In-Objects" class="headerlink" title="5.7 Singleton Built-In Objects"></a>5.7 Singleton Built-In Objects</h2><h3 id="5-7-1-The-Global-Object"><a href="#5-7-1-The-Global-Object" class="headerlink" title="5.7.1 The Global Object"></a>5.7.1 The Global Object</h3><ul>
<li>All variables and functions defined globally become properties of the Global object</li>
<li>All variables and functions are Global methods. e.g. parseInt(), isNaN()</li>
</ul>
<ol>
<li><p>URI-Encoding Methods</p>
<ul>
<li>encodeURI()/decodeURI()</li>
<li>encodeURIComponent()/decodeURIComponent()</li>
</ul>
</li>
<li><p>The eval() Method</p>
<ul>
<li>It interprets the argument into actual ECMAScript statements and then inserts it into place</li>
<li><p>Has the same scope chain</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span>(<span class="string">"function sayHi() &#123;alert('hi');&#125;"</span>);</span><br><span class="line">sayHi()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="Global-Object-Properties"><a href="#Global-Object-Properties" class="headerlink" title="Global Object Properties"></a>Global Object Properties</h4><ul>
<li><p>Special Values:</p>
<ul>
<li>undefined</li>
<li>NaN</li>
<li>Infinity</li>
</ul>
</li>
<li><p>Constructors:</p>
<ul>
<li>Object, Array, Function, Boolean, String, Number, Date, RegExp, Error, EvalError, RangeError, ReferenceError, SyntaxError, TypeError, URIError</li>
</ul>
</li>
</ul>
<h4 id="The-Window-Object"><a href="#The-Window-Object" class="headerlink" title="The Window Object"></a>The Window Object</h4><ul>
<li>Though ECMAScript doesn’t indicate a way to access the Global object</li>
<li>Web browsers implement it such that the <code>window</code> is the Global object’s delegate</li>
<li><p>The <code>window</code> object does <code>much more</code> in JavaScript than just implement the ECMAScript Global object</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> color = <span class="string">"red"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayColor</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    alert(<span class="built_in">window</span>.color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.sayColor(); <span class="comment">//"red"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-7-2-The-Math-Object"><a href="#5-7-2-The-Math-Object" class="headerlink" title="5.7.2 The Math Object"></a>5.7.2 The Math Object</h3><h4 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h4><ul>
<li>Math.E, Math.LN10, Math.LN2, Math.LOG2E, Math.LOG10E, Math.PI, Math.SQRT1_2, Math.SQRT2</li>
</ul>
<h4 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h4><ul>
<li>min(), max()</li>
<li>ceil(), floor(), round() </li>
<li>random()</li>
<li>abs(), exp(), log(), pow(), sqrt(), acos(), asin(), atan(), atan2(), cos(), sin(), tan()</li>
</ul>
<h1 id="Chapter6-Object-Oriented-Programming"><a href="#Chapter6-Object-Oriented-Programming" class="headerlink" title="Chapter6 Object-Oriented Programming"></a>Chapter6 Object-Oriented Programming</h1><h2 id="6-1-Understanding-Objects"><a href="#6-1-Understanding-Objects" class="headerlink" title="6.1 Understanding Objects"></a>6.1 Understanding Objects</h2><h3 id="6-1-1-Types-of-Properties"><a href="#6-1-1-Types-of-Properties" class="headerlink" title="6.1.1 Types of Properties"></a>6.1.1 Types of Properties</h3><ul>
<li>Data Property: <ul>
<li>Each data property has 4 attributes</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>[[Configurable]]</td>
<td>if can be <code>delete person.name</code>, false: cannot change any attributes </td>
</tr>
<tr>
<td>[[Enumerable]]</td>
<td>if the property can be for-in loop</td>
</tr>
<tr>
<td>[[Writable]]</td>
<td>if value can be changed</td>
</tr>
<tr>
<td>[[Value]]</td>
<td>the value</td>
</tr>
</tbody>
</table>
<ul>
<li>Accessor Properties<ul>
<li>It defines <code>getter</code> and <code>setter</code></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>[[Configurable]]</td>
<td>same</td>
</tr>
<tr>
<td>[[Enumerable]]</td>
<td>same</td>
</tr>
<tr>
<td>[[Get]]</td>
<td>getter</td>
</tr>
<tr>
<td>[[Set]]</td>
<td>setter</td>
</tr>
</tbody>
</table>
<h3 id="6-1-2-Defining-Multiple-Properties"><a href="#6-1-2-Defining-Multiple-Properties" class="headerlink" title="6.1.2 Defining Multiple Properties"></a>6.1.2 Defining Multiple Properties</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, </span><br><span class="line">    name: &#123;</span><br><span class="line">        get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>._name + <span class="string">"d"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        set: <span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>._name = newValue + <span class="string">"dd"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    age: &#123;</span><br><span class="line">        writable: <span class="literal">false</span>,</span><br><span class="line">        value: <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="6-1-3-Reading-Property-Attributes"><a href="#6-1-3-Reading-Property-Attributes" class="headerlink" title="6.1.3 Reading Property Attributes"></a>6.1.3 Reading Property Attributes</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">"name"</span>);</span><br><span class="line">alert(description.value);</span><br></pre></td></tr></table></figure>
<h2 id="6-2-Object-Creation"><a href="#6-2-Object-Creation" class="headerlink" title="6.2 Object Creation"></a>6.2 Object Creation</h2><h3 id="6-2-1-The-Factory-Pattern"><a href="#6-2-1-The-Factory-Pattern" class="headerlink" title="6.2.1 The Factory Pattern"></a>6.2.1 The Factory Pattern</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age</span>)</span>&#123; </span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.name = name;</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;alert(<span class="keyword">this</span>.name); &#125;;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Disadvantage:<ul>
<li>Cannot know instance type</li>
<li>Different people has different <code>sayName</code> function</li>
</ul>
</li>
</ul>
<h3 id="6-2-2-The-Constructor-Pattern"><a href="#6-2-2-The-Constructor-Pattern" class="headerlink" title="6.2.2 The Constructor Pattern"></a>6.2.2 The Constructor Pattern</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123; </span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;alert(<span class="keyword">this</span>.name); &#125;;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Advantages:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"N"</span>, <span class="number">11</span>);</span><br><span class="line">person1.constructor == Person <span class="comment">// true</span></span><br><span class="line">person1 instanceOf Person <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>Disadvantages:<ul>
<li>Different people has different <code>sayName</code> function</li>
<li>Make <code>sayName</code> global then <code>this.sayName = sayName</code> is not a solution since the method should be private</li>
<li>User is able to call <code>Person(xx, xx)</code> without <code>new</code>, then it sets global attribute </li>
</ul>
</li>
</ul>
<h3 id="6-2-3-The-Prototype-Pattern"><a href="#6-2-3-The-Prototype-Pattern" class="headerlink" title="6.2.3 The Prototype Pattern"></a>6.2.3 The Prototype Pattern</h3><p><img src="/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/prototype.png" alt="Prototype"></p>
<ul>
<li><p>By scope chain: </p>
<ul>
<li><code>person1.name</code> first search <code>person1</code> attribute then its Prototype</li>
<li><code>person1.sayName()</code> first search <code>person1</code> then its Prototype</li>
</ul>
</li>
<li><p>Advantages:</p>
<ul>
<li><code>person1.name == &quot;NG&quot;</code> covers the Prototype one</li>
<li><code>delte person1.name</code> can recover it</li>
<li>all person instances share the same sayName function</li>
</ul>
</li>
<li><p>Disadvantages:</p>
<ul>
<li>different people should have different attributes</li>
<li>If the name is an Object, it is mutable and change the name of all persons</li>
</ul>
</li>
<li><p>Syntax</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Person,</span><br><span class="line">    name : "Nicholas",</span><br><span class="line">    age : 29,</span><br><span class="line">    sayName : function () &#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Some methods</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(person1) == Person.prototype   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(person1).name         <span class="comment">// "Nicholas"</span></span><br><span class="line">person1.hasOwnProperty(<span class="string">"name"</span>)              <span class="comment">// false: if returned attribute got from instance</span></span><br><span class="line">person1.hasOwnPrototypeProperty(<span class="string">"name"</span>)     <span class="comment">// true: if returned attribute got from prototype</span></span><br><span class="line"><span class="string">"name"</span> <span class="keyword">in</span> person1                           <span class="comment">// true: if has "name" no matter in instance or prototype</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="built_in">Object</span>.keys()                   <span class="comment">// all instance enumerated attributes</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames()    <span class="comment">// all instance attributes even not enumerated</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="6-2-4-Combination-Constructor-Prototype-Pattern"><a href="#6-2-4-Combination-Constructor-Prototype-Pattern" class="headerlink" title="6.2.4 Combination Constructor/Prototype Pattern"></a>6.2.4 Combination Constructor/Prototype Pattern</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Person,</span><br><span class="line">    sayName : function () &#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>Disadvantage: <ul>
<li>Confused because having two code blocks for a class</li>
</ul>
</li>
</ul>
<h3 id="6-2-5-Dynamic-Prototype-Pattern"><a href="#6-2-5-Dynamic-Prototype-Pattern" class="headerlink" title="6.2.5 Dynamic Prototype Pattern"></a>6.2.5 Dynamic Prototype Pattern</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.sayName != <span class="string">"function"</span>) &#123;</span><br><span class="line">        Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(<span class="keyword">this</span>.name;)</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-6-Parasitic-Constructor-Pattern"><a href="#6-2-6-Parasitic-Constructor-Pattern" class="headerlink" title="6.2.6 Parasitic Constructor Pattern"></a>6.2.6 Parasitic Constructor Pattern</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123; </span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.name = name;</span><br><span class="line">    o.age = age;</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name); &#125;;</span><br><span class="line">    <span class="keyword">return</span> o; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> friend = <span class="keyword">new</span> Person(<span class="string">"Nicholas"</span>, <span class="number">29</span>); </span><br><span class="line">friend.sayName(); <span class="comment">//"Nicholas"</span></span><br></pre></td></tr></table></figure>
<p>Does not make sense!!! Cannot see any advantages over 6.2.5</p>
<h3 id="6-2-7-Durable-Constructor-Pattern"><a href="#6-2-7-Durable-Constructor-Pattern" class="headerlink" title="6.2.7 Durable Constructor Pattern"></a>6.2.7 Durable Constructor Pattern</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(name); </span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> o; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Does not make sense!!! Cannot see any advantages over 6.2.5</p>
<h2 id="6-3-Inheritance"><a href="#6-3-Inheritance" class="headerlink" title="6.3 Inheritance"></a>6.3 Inheritance</h2><h3 id="6-3-1-Prototype-Chaining-hardly-use"><a href="#6-3-1-Prototype-Chaining-hardly-use" class="headerlink" title="6.3.1 Prototype Chaining (hardly use)"></a>6.3.1 Prototype Chaining (hardly use)</h3><p><strong>The basic idea</strong> is to use the concept of prototypes to inherit properties and methods between two reference types</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">this</span>.property = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.property;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">this</span>.subproperty = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//inherit from SuperType </span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line"></span><br><span class="line"><span class="comment">// new method</span></span><br><span class="line">SubType.prototype.getSubValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.subproperty;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//override existing method. should below new SuperType() !!</span></span><br><span class="line">SubType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType(); </span><br><span class="line">alert(instance.getSuperValue()); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/inheritance.png" alt="Inheritance"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">alert(instance <span class="keyword">instanceof</span> <span class="built_in">Object</span>);      <span class="comment">// true</span></span><br><span class="line">alert(instance <span class="keyword">instanceof</span> SuperType);   <span class="comment">// true</span></span><br><span class="line">alert(instance <span class="keyword">instanceof</span> SubType);     <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">alert(<span class="built_in">Object</span>.prototype.isPrototypeOf(instance));    <span class="comment">//true</span></span><br><span class="line">alert(SuperType.prototype.isPrototypeOf(instance)); <span class="comment">//true</span></span><br><span class="line">alert(SubType.prototype.isPrototypeOf(instance));   <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>Issues:</p>
<ol>
<li><p>When prototypes contain reference values</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.colors = [<span class="string">"r"</span>, <span class="string">"g"</span>, <span class="string">"b"</span>]</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">instance1.colors.push(<span class="string">"w"</span>);</span><br><span class="line">alert(instance2.colors);        <span class="comment">// r, g, b, w</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>cannot pass arguments into the supertype </p>
</li>
</ol>
</li>
</ul>
<h3 id="6-3-2-Constructor-Stealing"><a href="#6-3-2-Constructor-Stealing" class="headerlink" title="6.3.2 Constructor Stealing"></a>6.3.2 Constructor Stealing</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123; </span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//inherit from SuperType passing in an argument </span></span><br><span class="line">    SuperType.call(<span class="keyword">this</span>, <span class="string">"Nicholas"</span>);   <span class="comment">// SuperType.call("Nicholas") will bind name to window</span></span><br><span class="line">    <span class="comment">//instance property</span></span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">29</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType(); </span><br><span class="line">alert(instance.name); <span class="comment">//"Nicholas"; </span></span><br><span class="line">alert(instance.age); <span class="comment">//29</span></span><br></pre></td></tr></table></figure>
<p>Because of 5.5.4, it cannot be SuperType.call(“Nicholas”)</p>
<ul>
<li><p>Advantages: It solves 6.3.1 issues.</p>
</li>
<li><p>Disadvantages: </p>
<ol>
<li>no function reuse. (instances have their own function)</li>
<li>methods defined on the supertype’s prototype are not accessible on the subtype</li>
</ol>
</li>
</ul>
<h3 id="6-3-3-Combination-Inheritance"><a href="#6-3-3-Combination-Inheritance" class="headerlink" title="6.3.3 Combination Inheritance"></a>6.3.3 Combination Inheritance</h3><p>(combined with 6.3.1 and 6.3.2)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//inherit properties </span></span><br><span class="line">    SuperType.call(<span class="keyword">this</span>, name);</span><br><span class="line">    <span class="keyword">this</span>.age = age; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//inherit methods</span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    alert(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Advantage: </p>
<ol>
<li>The most frequently used inheritance pattern in JavaScript.</li>
<li><code>instanceof</code>, <code>isPrototypeOf()</code> also work</li>
</ol>
</li>
<li><p>Disadvantage:</p>
<ol>
<li>call two times of SuperType()</li>
</ol>
</li>
</ul>
<h3 id="6-3-4-Prototypal-Inheritance"><a href="#6-3-4-Prototypal-Inheritance" class="headerlink" title="6.3.4 Prototypal Inheritance"></a>6.3.4 Prototypal Inheritance</h3><p><strong>Basic idea:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>)</span>&#123; </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">    F.prototype = o;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> F();     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ECMA5</strong>: formalized the concept of prototypal inheritance by <code>Object.create(parentInstance)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">"Nicholas"</span>,</span><br><span class="line">    friends: [<span class="string">"Shelby"</span>, <span class="string">"Court"</span>, <span class="string">"Van"</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> anotherPerson = <span class="built_in">Object</span>.create(person);</span><br><span class="line">anotherPerson.name = <span class="string">"Greg"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>Advantages: easy</li>
<li>Disadvantages: <ul>
<li>need a parent instance created</li>
<li>share mutable type attributes. i.e. friends list</li>
</ul>
</li>
</ul>
<h3 id="6-3-5-Parasitic-寄生式-Inheritance"><a href="#6-3-5-Parasitic-寄生式-Inheritance" class="headerlink" title="6.3.5 Parasitic(寄生式) Inheritance"></a>6.3.5 Parasitic(寄生式) Inheritance</h3><p>Similar as 6.3.4</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">original</span>)</span>&#123; </span><br><span class="line">    <span class="keyword">var</span> clone = object(original); </span><br><span class="line">    clone.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">"hi"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> clone;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Disadvantage: </p>
<pre><code>* the same as 6.3.4
* function reuse inefficiencies
</code></pre><h3 id="6-3-6-Parasitic-Combination-寄生组合式）Inheritance"><a href="#6-3-6-Parasitic-Combination-寄生组合式）Inheritance" class="headerlink" title="6.3.6 Parasitic Combination(寄生组合式）Inheritance"></a>6.3.6 Parasitic Combination(寄生组合式）Inheritance</h3><p>看不懂！！！！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>)</span>&#123; </span><br><span class="line">    <span class="comment">// prototype这个实例的prototype是superType的prototype</span></span><br><span class="line">    <span class="keyword">var</span> prototype = object(superType.prototype);    <span class="comment">//create object</span></span><br><span class="line">    prototype.constructor = subType;                <span class="comment">//create object</span></span><br><span class="line">    subType.prototype = prototype;                  <span class="comment">//assign object</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>)</span>&#123; </span><br><span class="line">    SuperType.call(<span class="keyword">this</span>, name);</span><br><span class="line">    <span class="keyword">this</span>.age = age; </span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(SubType, SuperType);</span><br><span class="line"></span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    alert(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Parasitic combination inheritance is considered the <strong>most efficient</strong> way to implement type-based inheritance.</p>
<h1 id="Chapter7-Function-Expressions"><a href="#Chapter7-Function-Expressions" class="headerlink" title="Chapter7 Function Expressions"></a>Chapter7 Function Expressions</h1><h2 id="7-1-Recursion"><a href="#7-1-Recursion" class="headerlink" title="7.1 Recursion"></a>7.1 Recursion</h2><ul>
<li>use arguments.callee</li>
<li><p>a special implementation</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> factorial = (<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num * f(num<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-2-Closure"><a href="#7-2-Closure" class="headerlink" title="7.2 Closure"></a>7.2 Closure</h2><p>Closures are functions that have access to variables from another function’s scope. This is often accomplished by creating a function inside a function</p>
<h3 id="7-2-1-Closures-and-Variables"><a href="#7-2-1-Closures-and-Variables" class="headerlink" title="7.2.1 Closures and Variables"></a>7.2.1 Closures and Variables</h3><p>Should understand the difference between</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFunctions</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123; </span><br><span class="line">        result[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> i;               <span class="comment">// this i is a reference</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFunctions</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">        result[i] = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> num;</span><br><span class="line">           &#125;;</span><br><span class="line">        &#125;(i);                       <span class="comment">// this i is parsed(value copy) in</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result; &#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-2-2-The-this-Object"><a href="#7-2-2-The-this-Object" class="headerlink" title="7.2.2 The this Object"></a>7.2.2 The this Object</h3><p>Should understand the difference between</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"The Window"</span>;</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    name : <span class="string">"My Object"</span>,</span><br><span class="line">    getNameFunc : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name; </span><br><span class="line">        &#125;;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br><span class="line">alert(object.getNameFunc()()); <span class="comment">//"The Window" (in non-strict mode)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"The Window"</span>;</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    name : <span class="string">"My Object"</span>,</span><br><span class="line">    getNameFunc : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;            <span class="comment">// this is the obj, so we need a variable to refer</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> that.name;</span><br><span class="line">        &#125;;      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">alert(object.getNameFunc()()); <span class="comment">//"My Object"</span></span><br></pre></td></tr></table></figure>
<h3 id="7-2-3-Memory-Leaks"><a href="#7-2-3-Memory-Leaks" class="headerlink" title="7.2.3 Memory Leaks"></a>7.2.3 Memory Leaks</h3><p>Closure will store variables in memory and cannot be destroied.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assignHandler</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(<span class="string">"someElement"</span>); </span><br><span class="line">    element.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(element.id); </span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Solution</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assignHandler</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(<span class="string">"someElement"</span>);</span><br><span class="line">    <span class="keyword">var</span> id = element.id;</span><br><span class="line">    element.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(id);</span><br><span class="line">    &#125;;</span><br><span class="line">    element = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-3-MIMICKING-BLOCK-SCOPE"><a href="#7-3-MIMICKING-BLOCK-SCOPE" class="headerlink" title="7.3 MIMICKING BLOCK SCOPE"></a>7.3 MIMICKING BLOCK SCOPE</h2><p>JavaScript has no concept of <strong>block-level scoping</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="number">2</span>; i++)&#123;</span><br><span class="line">    alert(i);</span><br><span class="line">&#125;</span><br><span class="line">alert(i);       <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>Solution</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> someFunction = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="comment">//block code here</span></span><br><span class="line">&#125;; </span><br><span class="line">someFunction();</span><br></pre></td></tr></table></figure>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//block code here</span></span><br><span class="line">&#125;();    <span class="comment">//error! Because of Javascript declaration hoisting</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//block code here</span></span><br><span class="line">&#125;)();   <span class="comment">//fine</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-4-PRIVATE-VARIABLES"><a href="#7-4-PRIVATE-VARIABLES" class="headerlink" title="7.4 PRIVATE VARIABLES"></a>7.4 PRIVATE VARIABLES</h2><p>Privileged method: two ways</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyObject</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//private variables and functions </span></span><br><span class="line">    <span class="keyword">var</span> privateVariable = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateFunction</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="literal">false</span>;&#125;</span><br><span class="line">    <span class="comment">//privileged methods </span></span><br><span class="line">    <span class="keyword">this</span>.publicMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        privateVariable++;</span><br><span class="line">        <span class="keyword">return</span> privateFunction(); </span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Pewrson</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.setName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        name = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Disadvantage: each time <code>new Person</code>, new functions are created</p>
<h3 id="7-4-1-Static-Private-Variables"><a href="#7-4-1-Static-Private-Variables" class="headerlink" title="7.4.1 Static Private Variables"></a>7.4.1 Static Private Variables</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">""</span>;</span><br><span class="line">    Person = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123; name = value;&#125;;</span><br><span class="line">    Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> name;&#125;;</span><br><span class="line">    Person.prototype.setName = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>)</span>&#123; name = value;&#125;; </span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>Disadvantage: All instance name will be shared and set</p>
<h3 id="7-4-2-The-Module-Pattern"><a href="#7-4-2-The-Module-Pattern" class="headerlink" title="7.4.2 The Module Pattern"></a>7.4.2 The Module Pattern</h3><p>Create private variable and privileged method for singleton</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleton = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//private variables and functions </span></span><br><span class="line">    <span class="keyword">var</span> privateVariable = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateFunction</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//privileged/public methods and properties </span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        publicProperty: <span class="literal">true</span>, </span><br><span class="line">        publicMethod : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            privateVariable++;              <span class="comment">// closure</span></span><br><span class="line">            <span class="keyword">return</span> privateFunction(); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;; </span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure>
<h3 id="7-4-3-The-Module-Augmentation-Pattern"><a href="#7-4-3-The-Module-Augmentation-Pattern" class="headerlink" title="7.4.3 The Module-Augmentation Pattern"></a>7.4.3 The Module-Augmentation Pattern</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleton = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//private variables and functions </span></span><br><span class="line">    <span class="keyword">var</span> privateVariable = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateFunction</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//create object</span></span><br><span class="line">    <span class="keyword">var</span> object = <span class="keyword">new</span> CustomType();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//add privileged/public properties and methods </span></span><br><span class="line">    object.publicProperty = <span class="literal">true</span>;</span><br><span class="line">    object.publicMethod = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">        privateVariable++;</span><br><span class="line">        <span class="keyword">return</span> privateFunction();</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//return the object</span></span><br><span class="line">    <span class="keyword">return</span> object; </span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure>
<h1 id="Chapter8-BOM-Browser-Object-Model"><a href="#Chapter8-BOM-Browser-Object-Model" class="headerlink" title="Chapter8 BOM(Browser Object Model)"></a>Chapter8 BOM(Browser Object Model)</h1><p>Provides objects that expose browser functionality independent of any web page content</p>
<h2 id="8-1-THE-WINDOW-OBJECT"><a href="#8-1-THE-WINDOW-OBJECT" class="headerlink" title="8.1 THE WINDOW OBJECT"></a>8.1 THE WINDOW OBJECT</h2><p>Dual purpose:</p>
<ol>
<li>JavaScript interface to the browser window </li>
<li>ECMAScript Global object</li>
</ol>
<h3 id="8-1-1-The-Global-Scope"><a href="#8-1-1-The-Global-Scope" class="headerlink" title="8.1.1 The Global Scope"></a>8.1.1 The Global Scope</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">19</span>;</span><br><span class="line"><span class="built_in">window</span>.color = <span class="string">'blue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">window</span>.age;      <span class="comment">// fail</span></span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">window</span>.color;    <span class="comment">// success</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>Cannot <code>delete window.age</code>: properties of window that were added via var statements have their [[Configurable]] attribute set to false</p>
</li>
<li><p>Attempting to access an undeclared variable throws an error, but it is possible to check for the existence of a potentially undeclared variable by looking on the window object.</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newValue = oldValue;        <span class="comment">// err</span></span><br><span class="line"><span class="keyword">var</span> newValue = <span class="built_in">window</span>.oldValue; <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="8-1-2-8-1-7-Window-Relationships-and-Frames"><a href="#8-1-2-8-1-7-Window-Relationships-and-Frames" class="headerlink" title="8.1.2-8.1.7 Window Relationships and Frames"></a>8.1.2-8.1.7 Window Relationships and Frames</h3><table>
<thead>
<tr>
<th>Category</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Frames</td>
<td><code>frames[0]</code></td>
<td>access to window object for different frame</td>
</tr>
<tr>
<td></td>
<td><code>top</code></td>
<td>the very top (outermost) frame, which is the browser window itself</td>
</tr>
<tr>
<td></td>
<td><code>parent</code></td>
<td>The parent object always points to the current frame’s immediate parent frame</td>
</tr>
<tr>
<td>Window Position</td>
<td><code>screenLeft</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>screenTop</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>moveTo()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>moveBy()</code></td>
<td></td>
</tr>
<tr>
<td>Window Size</td>
<td><code>innerWidth</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>innerHeight</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>outerWidth</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>outerHeight</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>resizeTo()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>resizeBy()</code></td>
<td></td>
</tr>
<tr>
<td>Navigating and Opening Windows</td>
<td><code>open()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>close()</code></td>
<td></td>
</tr>
<tr>
<td>Intervals and Timeouts</td>
<td><code>setTimeout()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>clearTimeout()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>setInterval()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>clearInterval()</code></td>
<td></td>
</tr>
<tr>
<td>System Dialogs</td>
<td><code>alert()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>confirm()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>promp()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>print()</code></td>
<td>print dialog</td>
</tr>
<tr>
<td></td>
<td><code>find()</code></td>
<td>search dialog</td>
</tr>
</tbody>
</table>
<h2 id="8-2-THE-LOCATION-OBJECT"><a href="#8-2-THE-LOCATION-OBJECT" class="headerlink" title="8.2 THE LOCATION OBJECT"></a>8.2 THE LOCATION OBJECT</h2><ul>
<li>It provides information about the document</li>
<li><code>window.location === document.location</code></li>
</ul>
<h3 id="Location-Attributes"><a href="#Location-Attributes" class="headerlink" title="Location Attributes"></a>Location Attributes</h3><p><code>https://movie.douban.com/subject/1291561/?from=showing</code> as example</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>hash</td>
<td>“”</td>
<td>The URL hash or an empty string if the URL doesn’t have a hash.</td>
</tr>
<tr>
<td>host</td>
<td>“movie.douban.com”</td>
<td></td>
</tr>
<tr>
<td>href</td>
<td>“<a href="https://movie.douban.com/subject/1291561/?from=showing&quot;" target="_blank" rel="noopener">https://movie.douban.com/subject/1291561/?from=showing&quot;</a></td>
<td></td>
</tr>
<tr>
<td>pathname</td>
<td>“/subject/1291561/“</td>
<td></td>
</tr>
<tr>
<td>port</td>
<td>“”</td>
<td></td>
</tr>
<tr>
<td>protocol</td>
<td>“https:”</td>
<td>The protocol used by the page. Typically “http:” or “https:”.</td>
</tr>
<tr>
<td>search</td>
<td>“?from=showing”</td>
<td>search string which start with ?</td>
</tr>
</tbody>
</table>
<h3 id="Manipulating-the-Location"><a href="#Manipulating-the-Location" class="headerlink" title="Manipulating the Location"></a>Manipulating the Location</h3><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>location.assign(&quot;http://www.wrox.com&quot;);</code></td>
<td></td>
</tr>
<tr>
<td><code>window.location = &quot;http://www.wrox.com&quot;</code></td>
<td></td>
</tr>
<tr>
<td><code>location.href = &quot;http://www.wrox.com&quot;</code></td>
<td><code>location.search = &quot;?q=javascript&quot;;</code><br><code>location.hostname = &quot;www.yahoo.com&quot;;</code><br>…</td>
</tr>
<tr>
<td><code>location.replace(&quot;http://www.wrox.com&quot;)</code></td>
<td>user cannot click back button to the previous page</td>
</tr>
<tr>
<td><code>location.reload()</code></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="8-3-THE-NAVIGATOR-OBJECT"><a href="#8-3-THE-NAVIGATOR-OBJECT" class="headerlink" title="8.3 THE NAVIGATOR OBJECT"></a>8.3 THE NAVIGATOR OBJECT</h2><p>For providing browser information</p>
<h2 id="8-4-THE-SCREEN-OBJECT"><a href="#8-4-THE-SCREEN-OBJECT" class="headerlink" title="8.4 THE SCREEN OBJECT"></a>8.4 THE SCREEN OBJECT</h2><p>An indication of client capabilities</p>
<h2 id="8-5-THE-HISTORY-OBJECT"><a href="#8-5-THE-HISTORY-OBJECT" class="headerlink" title="8.5 THE HISTORY OBJECT"></a>8.5 THE HISTORY OBJECT</h2><p>represents the user’s navigation history </p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>history.go(-1)</code></td>
<td>go back one page </td>
</tr>
<tr>
<td><code>history.go(1)</code></td>
<td>go forward one page</td>
</tr>
<tr>
<td><code>history.go(&quot;wrox.com&quot;)</code></td>
<td>go to nearest wrox.com page</td>
</tr>
<tr>
<td><code>history.forward()</code></td>
<td>same as <code>history.go(1)</code></td>
</tr>
<tr>
<td><code>history.back()</code></td>
<td>same as <code>history.go(-1)</code></td>
</tr>
</tbody>
</table>
<h1 id="Chpater9-Client-Detection"><a href="#Chpater9-Client-Detection" class="headerlink" title="Chpater9 Client Detection"></a>Chpater9 Client Detection</h1><h2 id="9-1-Capability-detection"><a href="#9-1-Capability-detection" class="headerlink" title="9.1 Capability detection"></a>9.1 Capability detection</h2><p>Tests for specific browser capabilities before using them</p>
<h2 id="9-3-Quirks-detection"><a href="#9-3-Quirks-detection" class="headerlink" title="9.3 Quirks detection"></a>9.3 Quirks detection</h2><p>Quirks are essentially bugs in browser implementations</p>
<h2 id="9-3-User-agent-detection"><a href="#9-3-User-agent-detection" class="headerlink" title="9.3 User-agent detection"></a>9.3 User-agent detection</h2><p>Detecting information about the browser, often including the browser, platform, operating system, and browser version.</p>
<h1 id="Chapter10-DOM-Document-Object-Model"><a href="#Chapter10-DOM-Document-Object-Model" class="headerlink" title="Chapter10 DOM(Document Object Model)"></a>Chapter10 DOM(Document Object Model)</h1><p>Represents a document as a hierarchical tree of nodes, allowing developers to add, remove, and modify individual parts of the page.</p>
<h2 id="10-1-HIERARCHY-OF-NODES"><a href="#10-1-HIERARCHY-OF-NODES" class="headerlink" title="10.1 HIERARCHY OF NODES"></a>10.1 HIERARCHY OF NODES</h2><h3 id="10-1-1-The-Node-Type"><a href="#10-1-1-The-Node-Type" class="headerlink" title="10.1.1 The Node Type"></a>10.1.1 The Node Type</h3><ul>
<li>Node.ELEMENT_NODE (1)</li>
<li>Node.ATTRIBUTE_NODE (2)</li>
<li>Node.TEXT_NODE (3)</li>
<li>Node.CDATA_SECTION_NODE (4)</li>
<li>Node.ENTITY_REFERENCE_NODE (5)</li>
<li>Node.ENTITY_NODE (6)</li>
<li>Node.PROCESSING_INSTRUCTION_NODE (7)</li>
<li>Node.COMMENT_NODE (8)</li>
<li>Node.DOCUMENT_NODE (9)</li>
<li>Node.DOCUMENT_TYPE_NODE (10)</li>
<li>Node.DOCUMENT_FRAGMENT_NODE (11)</li>
<li>Node.NOTATION_NODE (12)</li>
</ul>
<p><code>var someNode = document.getElementById(&#39;xx&#39;)</code></p>
<h4 id="nodeName-and-nodeValue"><a href="#nodeName-and-nodeValue" class="headerlink" title="nodeName and nodeValue"></a>nodeName and nodeValue</h4><table>
<thead>
<tr>
<th>Name</th>
<th>usage</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>nodeType</td>
<td><code>someNode.nodeType === Node.ELEMENT_NODE</code></td>
</tr>
<tr>
<td>nodeName</td>
<td><code>someNode.nodeName === &#39;DIV&#39;</code></td>
<td>tag</td>
</tr>
<tr>
<td>childNodes</td>
<td><code>someNode.childNodes[0]</code><br><code>someNode.childNodes.item(1)</code></td>
<td>Each node has a childNodes property containing a <strong>NodeList</strong> obj<br> Changes will be reflected in NodeList objects automatically (dynamic)</td>
</tr>
<tr>
<td>parentNode</td>
<td><code>someNode.parentNode</code></td>
<td></td>
</tr>
<tr>
<td>previousSibling</td>
<td><code>someNode.previousSibling</code></td>
<td></td>
</tr>
<tr>
<td>nextSibling</td>
<td><code>someNode.nextSibling</code></td>
<td></td>
</tr>
<tr>
<td>firstChild</td>
<td><code>someNode.firstChild</code></td>
<td></td>
</tr>
<tr>
<td>lastChild</td>
<td><code>someNode.lastChild</code></td>
<td></td>
</tr>
<tr>
<td>appendChild</td>
<td><code>someNode.appendChild(newNode)</code></td>
<td></td>
</tr>
<tr>
<td>insertBefore</td>
<td><code>someNode.insertBefore(newNode, aChildNode)</code></td>
<td>if null, become last node</td>
</tr>
<tr>
<td>replaceChild</td>
<td><code>someNode.replaceChild(newNode, aChildNode)</code></td>
<td></td>
</tr>
<tr>
<td>cloneNode</td>
<td><code>someNode.cloneNode(true)</code></td>
<td>boolean: copy all children or not</td>
</tr>
<tr>
<td>normalize</td>
<td>…</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="10-1-2-The-Document-Type"><a href="#10-1-2-The-Document-Type" class="headerlink" title="10.1.2 The Document Type"></a>10.1.2 The Document Type</h3><ul>
<li>Represents document nodes</li>
<li>The document object in browser is an instance of HTMLDocument</li>
<li>The document object is a property of window and is accessible globally</li>
</ul>
<table>
<thead>
<tr>
<th>Category</th>
<th>Usage</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Document Childre</td>
<td>document.documentElement</td>
<td><code>&lt;html&gt;</code></td>
</tr>
<tr>
<td></td>
<td>document.body</td>
<td><code>&lt;body&gt;</code></td>
</tr>
<tr>
<td></td>
<td>document.doctype</td>
<td><code>&lt;!DOCTYPE&gt;</code></td>
</tr>
<tr>
<td>Document Information</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>document.title</td>
<td></td>
</tr>
<tr>
<td></td>
<td>document.URL</td>
<td></td>
</tr>
<tr>
<td></td>
<td>document.domain</td>
<td></td>
</tr>
<tr>
<td></td>
<td>document.referrer</td>
<td>gives the URL of the page that linked to this page</td>
</tr>
<tr>
<td>Locating Elements</td>
<td>getElementById()</td>
<td>return the first occurance</td>
</tr>
<tr>
<td></td>
<td>document.getElementByTagName()</td>
<td>return a HTMLCollection obj, dynamic<br><code>images.namedItem(&quot;myImage&quot;)</code> or <code>images[&quot;myImage&quot;]</code> <br> parameter can be ‘*”</td>
</tr>
<tr>
<td></td>
<td>document.getElementByName()</td>
<td>similar as getElementByTagName</td>
</tr>
<tr>
<td>Special Collections</td>
<td>document.anchors</td>
<td>Contains all \<a> elements with a name attribute</a></td>
</tr>
<tr>
<td></td>
<td>document.forms</td>
<td><code>&lt;form&gt;</code></td>
</tr>
<tr>
<td></td>
<td>document.images</td>
<td><code>&lt;img&gt;</code></td>
</tr>
<tr>
<td></td>
<td>document.links</td>
<td>Contains all \<a> elements with an href attribute </a></td>
</tr>
<tr>
<td>DOM Conformance Detection</td>
<td>document.implementaion.hasFeature(‘XML’’, ‘1.0’)</td>
<td></td>
</tr>
<tr>
<td>Document Writing</td>
<td>write()</td>
<td></td>
</tr>
<tr>
<td></td>
<td>document.writeln()</td>
<td></td>
</tr>
<tr>
<td></td>
<td>document.open()</td>
<td></td>
</tr>
<tr>
<td></td>
<td>document.close()</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="10-1-3-The-Element-Type"><a href="#10-1-3-The-Element-Type" class="headerlink" title="10.1.3 The Element Type"></a>10.1.3 The Element Type</h3><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>element.getAttribute()</td>
<td>custom attributes should be prepended with data- in order to validate</td>
</tr>
<tr>
<td>element.setAttribute()</td>
<td></td>
</tr>
<tr>
<td>element.removeAttribute()</td>
<td></td>
</tr>
<tr>
<td>element.attributes</td>
<td>.getNamedItem(name)<br>.removeNamedItem(name)<br>.setNamedItem(node)<br>.item(pos)</td>
</tr>
<tr>
<td>document.createElement()</td>
<td><code>createElement(&quot;div&quot;);div.id=&quot;newDiv&quot;</code> or <code>createElement(&quot;\&lt;div id=\\&quot;newDiv\\&quot;\&gt;\&lt;div&gt;&quot;)</code>;</td>
</tr>
</tbody>
</table>
<h3 id="10-1-4-The-Text-Type"><a href="#10-1-4-The-Text-Type" class="headerlink" title="10.1.4 The Text Type"></a>10.1.4 The Text Type</h3><table>
<thead>
<tr>
<th>Category</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>text manipulation</td>
<td>appendData(text)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>deleteData(offset, count)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>insertData(offset, count)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>replaceData(offset, count, text)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>splitText(offset)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>substringData(offset, count)</td>
<td></td>
</tr>
<tr>
<td>create text node</td>
<td>createTextNode(“text”)</td>
<td></td>
</tr>
<tr>
<td>normalize text nodes</td>
<td>element.normalize()</td>
<td>it is possible to have multiple text nodes as children</td>
</tr>
<tr>
<td>split text nodes</td>
<td>element.firstChild.splitText(5)</td>
</tr>
</tbody>
</table>
<h3 id="10-1-5-The-Comment-Type"><a href="#10-1-5-The-Comment-Type" class="headerlink" title="10.1.5 The Comment Type"></a>10.1.5 The Comment Type</h3><ul>
<li>Inherits from the same base as the Text type, so it has all of the same string- manipulation methods except splitText()</li>
<li>document.createComment()</li>
</ul>
<h3 id="10-1-6-The-CDATASection-Type"><a href="#10-1-6-The-CDATASection-Type" class="headerlink" title="10.1.6 The CDATASection Type"></a>10.1.6 The CDATASection Type</h3><ul>
<li>CDATA sections are specific to XML-based documents</li>
<li>document.createCDataSection()</li>
</ul>
<h3 id="10-1-7-The-DocumentType-Type"><a href="#10-1-7-The-DocumentType-Type" class="headerlink" title="10.1.7 The DocumentType Type"></a>10.1.7 The DocumentType Type</h3><ul>
<li><code>document.doctype.name === &#39;HTML&#39;</code></li>
<li>e.g. <code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;</code>: HTML</li>
</ul>
<h3 id="10-1-8-The-DocumentFragment-Type"><a href="#10-1-8-The-DocumentFragment-Type" class="headerlink" title="10.1.8 The DocumentFragment Type"></a>10.1.8 The DocumentFragment Type</h3><p>Adding each item directly to the element causes the browser to re-render the page with the new information. It solves this issue.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment(); </span><br><span class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"myList"</span>);</span><br><span class="line"><span class="keyword">var</span> li = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;</span><br><span class="line">    li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>); </span><br><span class="line">    li.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Item "</span> + (i+<span class="number">1</span>))); </span><br><span class="line">    fragment.appendChild(li);</span><br><span class="line">&#125; </span><br><span class="line">ul.appendChild(fragment);</span><br></pre></td></tr></table></figure>
<h3 id="10-1-9-The-Attr-Type"><a href="#10-1-9-The-Attr-Type" class="headerlink" title="10.1.9 The Attr Type"></a>10.1.9 The Attr Type</h3><p>Not recommended.<br>Another way of <code>get/set/removeAttribute()</code>.</p>
<h2 id="10-2-WORKING-WITH-THE-DOM"><a href="#10-2-WORKING-WITH-THE-DOM" class="headerlink" title="10.2 WORKING WITH THE DOM"></a>10.2 WORKING WITH THE DOM</h2><h3 id="10-2-1-Dynamic-Scripts"><a href="#10-2-1-Dynamic-Scripts" class="headerlink" title="10.2.1 Dynamic Scripts"></a>10.2.1 Dynamic Scripts</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>); </span><br><span class="line">    cript.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">    script.src = url;   <span class="comment">// or script.appendChild(document.createTextNode("function sayHi()&#123;alert(‘hi’);&#125;"));</span></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-2-2-Dynamic-Styles"><a href="#10-2-2-Dynamic-Styles" class="headerlink" title="10.2.2 Dynamic Styles"></a>10.2.2 Dynamic Styles</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStyles</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> link = <span class="built_in">document</span>.createElement(<span class="string">"link"</span>);</span><br><span class="line">    link.rel = <span class="string">"stylesheet"</span>;</span><br><span class="line">    link.type = <span class="string">"text/css"</span>;</span><br><span class="line">    link.href = url;</span><br><span class="line">    <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>]; <span class="comment">//or style.appendChild(document.createTextNode("body&#123;background-color:red&#125;"));</span></span><br><span class="line">    head.appendChild(link);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-2-3-Manipulating-Tables"><a href="#10-2-3-Manipulating-Tables" class="headerlink" title="10.2.3 Manipulating Tables"></a>10.2.3 Manipulating Tables</h3><p>Skip, I guess no one do this by hand</p>
<h3 id="10-2-4-Using-NodeLists"><a href="#10-2-4-Using-NodeLists" class="headerlink" title="10.2.4 Using NodeLists"></a>10.2.4 Using NodeLists</h3><p>NodeList, NamedNodeMap and HTMLCollection are similar: all dynamic</p>
<ul>
<li><p>Since a query is run against the document each time, try to cache frequently used values retrieved from a NodeList. e.g. </p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>); </span><br><span class="line"><span class="keyword">var</span> len = divs.length;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Chapter11-DOM-Extensions"><a href="#Chapter11-DOM-Extensions" class="headerlink" title="Chapter11 DOM Extensions"></a>Chapter11 DOM Extensions</h1><h2 id="11-1-SELECTORS-API"><a href="#11-1-SELECTORS-API" class="headerlink" title="11.1 SELECTORS API"></a>11.1 SELECTORS API</h2><table>
<thead>
<tr>
<th>Category</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>querySelector()</td>
<td>document.querySelector(“body”)</td>
<td>“body”, “#myId”, “.myClass”<br> return first element</td>
</tr>
<tr>
<td>querySelectorAll()</td>
<td>document.querySelectorAll(“. myClass”);</td>
<td>return NodeList obj</td>
</tr>
<tr>
<td>matchesSelector()</td>
<td><code>document.body.matchesSelector(&quot;body.page1&quot;) === true</code></td>
</tr>
</tbody>
</table>
<h2 id="11-2-ELEMENT-TRAVERSAL"><a href="#11-2-ELEMENT-TRAVERSAL" class="headerlink" title="11.2 ELEMENT TRAVERSAL"></a>11.2 ELEMENT TRAVERSAL</h2><table>
<thead>
<tr>
<th>Category</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>childElementCount</td>
<td>number of child elements</td>
</tr>
<tr>
<td>firstElementChild</td>
<td></td>
</tr>
<tr>
<td>lastElementChild</td>
<td></td>
</tr>
<tr>
<td>previousElementSibling</td>
<td></td>
</tr>
<tr>
<td>nextElementSibling</td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i, len,</span><br><span class="line">child = element.firstElementChild; </span><br><span class="line"><span class="keyword">while</span>(child != element.lastElementChild)&#123;</span><br><span class="line">    processChild(child);</span><br><span class="line">    child = child.nextElementSibling; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11-3-HTML-5"><a href="#11-3-HTML-5" class="headerlink" title="11.3 HTML 5"></a>11.3 HTML 5</h2><table>
<thead>
<tr>
<th>Category</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Class-Related Additions</td>
<td>getElementsByClassName()</td>
<td>return NodeList</td>
</tr>
<tr>
<td></td>
<td>classList.add(value)<br>.contains(value)<br>.remove(value)<br>.toggle(value)</td>
<td></td>
</tr>
<tr>
<td>Focus Management</td>
<td>document.activeElement</td>
<td>contains a pointer to the DOM element that currently has focus</td>
</tr>
<tr>
<td></td>
<td>element.focus()</td>
<td></td>
</tr>
<tr>
<td></td>
<td>document.hasfocus()</td>
<td>determine if the user is interacting with the page</td>
</tr>
<tr>
<td>Changes to HTMLDocument</td>
<td>document.readyState</td>
<td>loading: The document is loading<br> complete: The document is completely loaded</td>
</tr>
<tr>
<td></td>
<td>document.compatMode</td>
<td>CSS1Compat: standard<br>BackCompat: quirks mode</td>
</tr>
<tr>
<td></td>
<td>document.head</td>
<td></td>
</tr>
<tr>
<td>Character Set Properties</td>
<td>document.charset</td>
<td>“UTF-16”</td>
</tr>
<tr>
<td>Custom Data Attributes</td>
<td>element.dataset</td>
<td>customed data attributes should begin with “data-“, then can be fetched by element.dataset.myname; <code>&lt;div id=&quot;myDiv&quot; data-myname=&quot;Nicholas&quot;&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td>Markup Insertion</td>
<td>innerHTML</td>
<td>return the HTML representing <strong>all</strong> of the child nodes</td>
</tr>
<tr>
<td></td>
<td>outerHTML</td>
<td>all innerHTML and it self</td>
</tr>
<tr>
<td></td>
<td>insertAdjacentHTML(position, text)</td>
<td>position = [“beforebegin”, “afterbegin”, “beforeend”, “afterend”]</td>
</tr>
<tr>
<td>scrollIntoView</td>
<td>scrollIntoView(boolean)</td>
<td>make sure an element is visible</td>
</tr>
</tbody>
</table>
<h2 id="11-4-PROPRIETARY-EXTENSIONS"><a href="#11-4-PROPRIETARY-EXTENSIONS" class="headerlink" title="11.4 PROPRIETARY EXTENSIONS"></a>11.4 PROPRIETARY EXTENSIONS</h2><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>document.documentMode</code></td>
<td>determines which features it has access</td>
</tr>
<tr>
<td><code>document.documentElement.contains(document.body)</code></td>
<td></td>
</tr>
<tr>
<td><code>document.documentElement.compareDocumentPosision(another)</code></td>
<td>1, 2, 4, 8 16</td>
</tr>
<tr>
<td><code>innerText</code></td>
<td>read/write all children text content</td>
</tr>
<tr>
<td><code>outerText</code></td>
<td>read all children text content, write all children including itself</td>
</tr>
<tr>
<td><hr></td>
<td><hr></td>
</tr>
<tr>
<td><code>scrollIntoViewIfNeeded()</code></td>
<td>Scrolls only if it’s not already visible</td>
</tr>
<tr>
<td><code>scrollByLines(lineCount)</code></td>
<td></td>
</tr>
<tr>
<td><code>scrollByPages(pageCount)</code></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="Chapter12-DOM-Levels-2-and-3"><a href="#Chapter12-DOM-Levels-2-and-3" class="headerlink" title="Chapter12 DOM Levels 2 and 3"></a>Chapter12 DOM Levels 2 and 3</h1><h2 id="12-1-DOM-CHANGES"><a href="#12-1-DOM-CHANGES" class="headerlink" title="12.1 DOM CHANGES"></a>12.1 DOM CHANGES</h2><h3 id="12-1-1-XML-Namespaces"><a href="#12-1-1-XML-Namespaces" class="headerlink" title="12.1.1 XML Namespaces"></a>12.1.1 XML Namespaces</h3><p>Skip. I think it is gradually replaced by json</p>
<h3 id="12-1-2-Other-Changes"><a href="#12-1-2-Other-Changes" class="headerlink" title="12.1.2 Other Changes"></a>12.1.2 Other Changes</h3><h4 id="Changes-to-DocumentType"><a href="#Changes-to-DocumentType" class="headerlink" title="Changes to DocumentType"></a>Changes to DocumentType</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//W3C//DTD HTML 4.01//EN"</span> <span class="string">"http://www.w3.org/TR/html4/strict.dtd"</span></span><br><span class="line">[<span class="xml"><span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">name</span> (#<span class="attr">PCDATA</span>)&gt;</span>]&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>publicId: “-//W3C//DTD HTML 4.01//EN”, </li>
<li>systemId:  “<a href="http://www.w3.org/TR/html4/strict.dtd&quot;" target="_blank" rel="noopener">http://www.w3.org/TR/html4/strict.dtd&quot;</a>, </li>
<li>internalSubset: “&lt;!ELEMENT name (#PCDATA)” </li>
</ul>
<h4 id="Changes-to-Document"><a href="#Changes-to-Document" class="headerlink" title="Changes to Document"></a>Changes to Document</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>importNode(oldNode, boolean)</td>
<td>Similar as cloneNode()<br> boolean: if copy children </td>
</tr>
<tr>
<td>document.implementaion</td>
<td>createDocumentType()<br>createDocument()<br>createHTMLDocument()</td>
</tr>
</tbody>
</table>
<h4 id="Changes-to-Node"><a href="#Changes-to-Node" class="headerlink" title="Changes to Node"></a>Changes to Node</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>element.isSameNode()</td>
<td>same reference</td>
</tr>
<tr>
<td>element.isEqualNode()</td>
<td>same attributes</td>
</tr>
<tr>
<td>element.setUserData(key, value, operationCallback)</td>
<td>whenever the node with the data is cloned, removed, renamed, or imported into another document</td>
</tr>
<tr>
<td>element.getUserData(key)</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="Changes-to-Frames"><a href="#Changes-to-Frames" class="headerlink" title="Changes to Frames"></a>Changes to Frames</h4><p>This property contains a pointer to the document object representing the contents of the frame.</p>
<p><code>document.getElementById(&quot;frameId&quot;).contentDocument</code></p>
<h2 id="12-2-STYLES"><a href="#12-2-STYLES" class="headerlink" title="12.2 STYLES"></a>12.2 STYLES</h2><h3 id="12-2-1-Accessing-Element-Styles"><a href="#12-2-1-Accessing-Element-Styles" class="headerlink" title="12.2.1 Accessing Element Styles"></a>12.2.1 Accessing Element Styles</h3><p>Any HTML element that supports the style attribute also has a style property exposed in JavaScript</p>
<table>
<thead>
<tr>
<th>CSS PROPERTY</th>
<th>JAVASCRIPT PROPERTY</th>
</tr>
</thead>
<tbody>
<tr>
<td>background-image</td>
<td>element.style.backgroundImage</td>
</tr>
<tr>
<td>color</td>
<td>element.style.color</td>
</tr>
<tr>
<td>display</td>
<td>element.style.display</td>
</tr>
<tr>
<td>font-family</td>
<td>element.style.fontFamily</td>
</tr>
</tbody>
</table>
<h4 id="Some-attributes-methods"><a href="#Some-attributes-methods" class="headerlink" title="Some attributes/methods"></a>Some attributes/methods</h4><ul>
<li>cssText<ul>
<li><code>myDiv.style.cssText = &quot;width: 25px;&quot;</code></li>
</ul>
</li>
<li>length</li>
<li>parentRule</li>
<li>getPropertyCSSValue(propertyName)</li>
<li>getPropertyPriority(propertyName)</li>
<li>getPropertyValue(propertyName)</li>
<li>item(index)</li>
<li>removeProperty(propertyName)</li>
<li>setProperty(propertyName, value, priority)</li>
<li>getComputedStyle()<ul>
<li>get the actual style after overriding</li>
</ul>
</li>
</ul>
<h3 id="12-2-2-Working-with-Style-Sheets"><a href="#12-2-2-Working-with-Style-Sheets" class="headerlink" title="12.2.2 Working with Style Sheets"></a>12.2.2 Working with Style Sheets</h3><h4 id="CSS-Style-Sheets"><a href="#CSS-Style-Sheets" class="headerlink" title="CSS Style Sheets"></a>CSS Style Sheets</h4><ul>
<li>CSSStyleSheet extends StyleSheet</li>
<li>Access by: <code>document.styleSheets</code></li>
<li>Attributes:<ul>
<li>disabled</li>
<li>href</li>
<li>media</li>
<li>ownerNode</li>
<li>parentStyleSheet</li>
<li>title</li>
<li>type</li>
<li>cssRule</li>
<li>ownerRule</li>
<li>deleteRule(index)</li>
<li>insertRule(rule, index)</li>
</ul>
</li>
</ul>
<h4 id="CSS-Rules"><a href="#CSS-Rules" class="headerlink" title="CSS Rules"></a>CSS Rules</h4><ul>
<li>CSSStyleRule extends CSSRule</li>
<li>Access by: <code>document.styleSheets[0].cssRule</code></li>
<li><p>Attributes</p>
<ul>
<li>cssText</li>
<li>parentRule</li>
<li>parentStyleSheet</li>
<li>selectorText</li>
<li>style</li>
<li>type</li>
</ul>
</li>
<li><p>Operations:</p>
<ul>
<li>sheet.insertRule(ruleText, insertIndex)</li>
<li>sheet.deleteRule(index)</li>
</ul>
</li>
</ul>
<h3 id="12-2-3-Element-Dimensions"><a href="#12-2-3-Element-Dimensions" class="headerlink" title="12.2.3 Element Dimensions"></a>12.2.3 Element Dimensions</h3><table>
<thead>
<tr>
<th>Category</th>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>offset dimension</td>
<td>offsetHeight</td>
<td></td>
</tr>
<tr>
<td></td>
<td>offsetWidth</td>
<td></td>
</tr>
<tr>
<td></td>
<td>offsetLeft</td>
<td></td>
</tr>
<tr>
<td></td>
<td>offsetTop</td>
<td></td>
</tr>
<tr>
<td>Client Dimensions</td>
<td>clientWidth</td>
<td></td>
</tr>
<tr>
<td></td>
<td>clientHeight</td>
<td></td>
</tr>
<tr>
<td>Scroll dimension</td>
<td>scrollHeight</td>
<td></td>
</tr>
<tr>
<td></td>
<td>scrollWidth</td>
<td></td>
</tr>
<tr>
<td></td>
<td>scrollLeft</td>
<td></td>
</tr>
<tr>
<td></td>
<td>scrollTop</td>
<td></td>
</tr>
<tr>
<td>Element location</td>
<td>getBoundingClientRect().left/right/top/bottom</td>
<td>location of the element on the page relative to the viewport</td>
</tr>
</tbody>
</table>
<p><img src="/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/offsetDimension.png" alt="OffsetDimension"><br><img src="/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/ClientDimension.png" alt="ClientDimension"><br><img src="/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/ScrollDimension.png" alt="ScrollDimension"></p>
<h2 id="12-3-TRAVERSALS"><a href="#12-3-TRAVERSALS" class="headerlink" title="12.3 TRAVERSALS"></a>12.3 TRAVERSALS</h2><p>Depth-first: NodeIterator, TreeWalker</p>
<h3 id="12-3-1-NodeIterator"><a href="#12-3-1-NodeIterator" class="headerlink" title="12.3.1 NodeIterator"></a>12.3.1 NodeIterator</h3><p><code>document.createNodeIterator(root, whatToShow, filter, entityReferenceExpansion)</code></p>
<ul>
<li>root: search root</li>
<li>whatToShow: A numerical code indicating which nodes should be visited</li>
<li><p>filter: instance of NodeFilter. </p>
<ul>
<li><code>var iterator = NodeFilter.SHOW_ALL</code></li>
<li><code>var iterator = NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT</code></li>
<li><p>an obj contained function <code>acceptNode</code> </p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> filter = &#123;</span><br><span class="line">    acceptNode: <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> node.tagName.toLowerCase() == <span class="string">"p"</span> ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>a function:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">        <span class="keyword">var</span> filter = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">           <span class="keyword">return</span> node.tagName.toLowerCase() == <span class="string">"p"</span> ?</span><br><span class="line">                  NodeFilter.FILTER_ACCEPT :</span><br><span class="line">                  NodeFilter.FILTER_SKIP;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>entityReferenceExpansion: not useful</p>
</li>
<li><p>The two primary methods of NodeIterator</p>
<ul>
<li><code>nextNode()</code></li>
<li><code>previousNode()</code></li>
</ul>
</li>
</ul>
<h3 id="12-3-2-TreeWalker"><a href="#12-3-2-TreeWalker" class="headerlink" title="12.3.2 TreeWalker"></a>12.3.2 TreeWalker</h3><p>An advanced version of NodeIterator<br><code>document.createTreeWalker(root, whatToShow, filter, entityReferenceExpansion)</code></p>
<p>methods:</p>
<ul>
<li>nextNode()</li>
<li>previousNode()</li>
<li>parentNode()</li>
<li>firstChild()</li>
<li>lastChild()</li>
<li>nextSibling()</li>
<li>previousSibling()</li>
</ul>
<h2 id="12-4-RANGES"><a href="#12-4-RANGES" class="headerlink" title="12.4 RANGES"></a>12.4 RANGES</h2><h3 id="12-4-1-Ranges-in-the-DOM"><a href="#12-4-1-Ranges-in-the-DOM" class="headerlink" title="12.4.1 Ranges in the DOM"></a>12.4.1 Ranges in the DOM</h3><ul>
<li><p>Usage:</p>
<ul>
<li><code>document.createRange()</code></li>
</ul>
</li>
<li><p>Attributes:</p>
<ul>
<li>startContainer</li>
<li>startOffset</li>
<li>endContainer</li>
<li>endOffset</li>
<li>commonAncestorContainer</li>
</ul>
</li>
</ul>
<h4 id="Simple-Selection"><a href="#Simple-Selection" class="headerlink" title="Simple Selection"></a>Simple Selection</h4><ul>
<li>selectNode(): contain node itself</li>
<li><p>selectNodeContents(): only contain children</p>
<ul>
<li><p>Usage:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.createRange(), </span><br><span class="line">    range2 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span><br><span class="line">range1.selectNode(p1); </span><br><span class="line">range2.selectNodeContents(p1);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>setStartBefore(refNode)</p>
</li>
<li>setStartAfter(refNode)</li>
<li>setEndBefore(refNode)</li>
<li>setEndAfter(refNode)</li>
</ul>
<h4 id="Complex-Selection"><a href="#Complex-Selection" class="headerlink" title="Complex Selection"></a>Complex Selection</h4><ul>
<li>range.setStart()</li>
<li>range.setEnd()</li>
</ul>
<h4 id="Interacting-with-DOM-Range-Content"><a href="#Interacting-with-DOM-Range-Content" class="headerlink" title="Interacting with DOM Range Content"></a>Interacting with DOM Range Content</h4><ul>
<li>range.deleteContents()</li>
<li>range.extractContents()</li>
<li>range.cloneContents()</li>
<li>range.insertNode()</li>
<li>range.surroundContents()</li>
<li>range.collapse(): not useful</li>
<li>range1.compareBoundaryPoints(range2)<ul>
<li>check if shared boundary</li>
<li>It returns<ul>
<li>Range.START_TO_START: 0</li>
<li>Range.START_TO_END: 1</li>
<li>Range.END_TO_END: 2</li>
<li>Range.END_TO_START: 3</li>
</ul>
</li>
</ul>
</li>
<li>range.cloneRange()</li>
<li><code>range.detach(); range = null;</code>: detach from document then dereferenced</li>
</ul>
<h3 id="12-4-2-Ranges-in-Internet-Explorer-8-and-Earlier"><a href="#12-4-2-Ranges-in-Internet-Explorer-8-and-Earlier" class="headerlink" title="12.4.2 Ranges in Internet Explorer 8 and Earlier"></a>12.4.2 Ranges in Internet Explorer 8 and Earlier</h3><p>Skip</p>
<h1 id="Chapter13-Events"><a href="#Chapter13-Events" class="headerlink" title="Chapter13 Events"></a>Chapter13 Events</h1><h2 id="13-1-Events-Flow"><a href="#13-1-Events-Flow" class="headerlink" title="13.1 Events Flow"></a>13.1 Events Flow</h2><p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt; </span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Event Bubbling Example&lt;<span class="regexp">/title&gt; </span></span><br><span class="line"><span class="regexp">    &lt;/</span>head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;div id=<span class="string">"myDiv"</span>&gt;Click Me&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>body&gt; </span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>
<p>DOM Level 2 Events has three phases</p>
<ul>
<li>the event capturing phase</li>
<li>at the target</li>
<li>the event bubbling phase</li>
</ul>
<p><img src="/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/eventCapture.png" alt="EventCapture"></p>
<h2 id="13-2-EVENT-HANDLERS"><a href="#13-2-EVENT-HANDLERS" class="headerlink" title="13.2 EVENT HANDLERS"></a>13.2 EVENT HANDLERS</h2><ul>
<li>event name: e.g. click, load</li>
<li>event handler: e.g. onclick, onload</li>
</ul>
<h3 id="13-2-1-HTML-Event-Handlers"><a href="#13-2-1-HTML-Event-Handlers" class="headerlink" title="13.2.1 HTML Event Handlers"></a>13.2.1 HTML Event Handlers</h3><ul>
<li><code>&lt;input type=&quot;button&quot; value=&quot;Click Me&quot; onclick=&quot;alert(‘Clicked’)&quot; /&gt;</code></li>
<li>It tightly couples the HTML to the JavaScript</li>
</ul>
<h3 id="13-2-2-DOM-Level-0-Event-Handlers"><a href="#13-2-2-DOM-Level-0-Event-Handlers" class="headerlink" title="13.2.2 DOM Level 0 Event Handlers"></a>13.2.2 DOM Level 0 Event Handlers</h3><ul>
<li><p>One method:</p>
<ul>
<li><p>Assign a function to an event handler property, which run winthin the scope of element</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>); </span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">"Clicked"</span>); </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">btn.onclick = <span class="literal">null</span>; <span class="comment">//remove event handler</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="13-2-3-DOM-Level-2-Event-Handlers"><a href="#13-2-3-DOM-Level-2-Event-Handlers" class="headerlink" title="13.2.3 DOM Level 2 Event Handlers"></a>13.2.3 DOM Level 2 Event Handlers</h3><ul>
<li>Two methods:<ul>
<li><code>addEventListener(eventName, handler, captureOrBubble)</code></li>
<li><code>removeEventListener(eventName, handler, captureOrBubble)</code></li>
</ul>
</li>
<li>multiple event handlers can be added<ul>
<li>e.g. btn can have two click event</li>
<li>event fire in the order of adding order</li>
</ul>
</li>
<li>event added by <code>addEventListener</code> can only be removed by <code>removeEventListener</code> with same arguments. (anonymous function… haha)</li>
</ul>
<h3 id="13-2-4-Internet-Explorer-Event-Handlers"><a href="#13-2-4-Internet-Explorer-Event-Handlers" class="headerlink" title="13.2.4 Internet Explorer Event Handlers"></a>13.2.4 Internet Explorer Event Handlers</h3><p>Skip</p>
<h3 id="13-2-5-Cross-Browser-Event-Handlers"><a href="#13-2-5-Cross-Browser-Event-Handlers" class="headerlink" title="13.2.5 Cross-Browser Event Handlers"></a>13.2.5 Cross-Browser Event Handlers</h3><p>Skip</p>
<h2 id="13-3-THE-EVENT-OBJECT"><a href="#13-3-THE-EVENT-OBJECT" class="headerlink" title="13.3 THE EVENT OBJECT"></a>13.3 THE EVENT OBJECT</h2><p>When an event related to the DOM is fired, all of the relevant information is gathered and stored on an object called <strong>event</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(event.type);    <span class="comment">//"click"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="13-3-1-The-DOM-Event-Object"><a href="#13-3-1-The-DOM-Event-Object" class="headerlink" title="13.3.1 The DOM Event Object"></a>13.3.1 The DOM Event Object</h3><table>
<thead>
<tr>
<th>attribute</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bubbles</td>
<td>Boolean</td>
<td>if the event bubbles</td>
</tr>
<tr>
<td>cancelable</td>
<td>Boolean</td>
<td>if the default behavior of the event can be canceled.</td>
</tr>
<tr>
<td>currentTarget</td>
<td>Element</td>
<td>The element whose event is handlering</td>
</tr>
<tr>
<td>defaultPrevented</td>
<td>Boolean</td>
<td>indicates that preventDefault() has been called</td>
</tr>
<tr>
<td>detail</td>
<td>Integer</td>
<td></td>
</tr>
<tr>
<td>eventPhase</td>
<td>Integer</td>
<td>1: capturing phase, 2: at target, 3: bubbling</td>
</tr>
<tr>
<td><strong>preventDefault()</strong></td>
<td>Function</td>
<td>Cancels the default behavior for the event</td>
</tr>
<tr>
<td>stopImmediatePropagation()</td>
<td>Function</td>
<td>Cancels any further event capturing or event bubbling and prevents any other event handlers from being called</td>
</tr>
<tr>
<td><strong>stopPropagation()</strong></td>
<td>Function</td>
<td>Cancels any further event capturing or event bubbling</td>
</tr>
<tr>
<td>target</td>
<td>Element</td>
<td>The target of the event.</td>
</tr>
<tr>
<td>trusted</td>
<td>Boolean</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>The type of event that was fired</td>
</tr>
<tr>
<td>view</td>
<td>AbstractView</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><p><code>currentTarget</code> vs <code>target</code> vs <code>this</code></p>
<ul>
<li><code>currentTarget === this</code></li>
<li>currentTarget indicates where the handler is</li>
<li><p>target indicates where the action happens</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(event.currentTarget === <span class="built_in">document</span>.body); <span class="comment">//true </span></span><br><span class="line">    alert(<span class="keyword">this</span> === <span class="built_in">document</span>.body); <span class="comment">//true </span></span><br><span class="line">    alert(event.target === <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>)); <span class="comment">//true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li>Any event that can be canceled using preventDefault() will have its cancelable property set to true</li>
</ul>
<h3 id="13-3-2-The-Internet-Explorer-Event-Object"><a href="#13-3-2-The-Internet-Explorer-Event-Object" class="headerlink" title="13.3.2 The Internet Explorer Event Object"></a>13.3.2 The Internet Explorer Event Object</h3><p>Skip</p>
<h3 id="13-3-3-The-Cross-Browser-Event-Object"><a href="#13-3-3-The-Cross-Browser-Event-Object" class="headerlink" title="13.3.3 The Cross-Browser Event Object"></a>13.3.3 The Cross-Browser Event Object</h3><p>Skip</p>
<h2 id="13-4-EVENT-TYPES"><a href="#13-4-EVENT-TYPES" class="headerlink" title="13.4 EVENT TYPES"></a>13.4 EVENT TYPES</h2><p><strong>DOM Level 3 Events specifies the following event groups:</strong></p>
<ul>
<li>User interface (UI) events<ul>
<li>DOMActive: deprecated</li>
<li>load: after completely loaded<ul>
<li>window, script, img, body</li>
</ul>
</li>
<li>unload</li>
<li>abort: Fires on an \&lt;object> element if it is not fully loaded before the user stops the download process</li>
<li>error</li>
<li>select</li>
<li>resize</li>
<li>scroll</li>
</ul>
</li>
<li>Focus events<ul>
<li>blur: Fires when an element has lost focus.</li>
<li>DOMFocusIn: deprecated</li>
<li>DOMFocusOut: deprecated</li>
<li>focus — Fires when an element has received focus</li>
<li>focusin — Fires when an element has received focus</li>
<li>focusout — Fires when an element has lost focus.</li>
<li>When focus is moved from one element to another on the page, the following order of events is followed:<ol>
<li><code>focusout</code> fires on the element losing focus.</li>
<li><code>focusin</code> fires on the element receiving focus.</li>
<li><code>blur</code> fires on the element losing focus.</li>
<li><code>DOMFocusOut</code> fires on the element losing focus.</li>
<li><code>focus</code> fires on the element receiving focus.</li>
<li><code>DOMFocusIn</code> fires on the element receiving focus.</li>
</ol>
</li>
</ul>
</li>
<li>Mouse events<ul>
<li>click</li>
<li>dblclick</li>
<li>mousedown</li>
<li>mouseenter</li>
<li>mouseleave</li>
<li>mousemove</li>
<li>mouseout</li>
<li>mouseover</li>
<li>mouseup</li>
</ul>
</li>
<li>Wheel events<ul>
<li>mousewheel</li>
</ul>
</li>
<li>Text events<ul>
<li>text input</li>
</ul>
</li>
<li>Keyboard events<ul>
<li>keydown</li>
<li>keypress</li>
<li>keyup</li>
</ul>
</li>
<li>Composition events: When inputting characters: like Chinese, Japanese</li>
<li>Mutation events: when a change occurs to the underlying DOM structure.<ul>
<li>DOMSubtreeModified</li>
<li>DOMNodeInserted</li>
<li>DOMNodeRemoved</li>
<li>DOMNodeInsertedIntoDocument</li>
<li>DOMNodeRemovedFromDocument</li>
<li>DOMAttrModified</li>
<li>DOMCharacterDataModified</li>
</ul>
</li>
<li>Mutation name events: when element or attribute names are changed</li>
</ul>
<p><strong>HTML5 Events</strong></p>
<ul>
<li>contextmenu: the menu when right mouse click</li>
<li>beforeunload: prevent the page from being unloaded.</li>
<li>DOMContentLoaded: fires as soon as the DOM tree is completely formed and without regard to images, JavaScript files, CSS files, or other such resources. </li>
<li>readystatechange: IE</li>
<li>pageshow/pagehide:<ul>
<li>back-forward cache speed up page load, while won’t fire load event</li>
<li>pageshow fires after the load event or page restored</li>
</ul>
</li>
<li>hashchange: when the URL hash (everything following a pound sign (#) in a URL) changed</li>
</ul>
<p><strong>Device Events</strong>: Skip</p>
<p><strong>Touch and Gesture Events</strong>: Skip</p>
<h2 id="13-5-MEMORY-AND-PERFORMANCE"><a href="#13-5-MEMORY-AND-PERFORMANCE" class="headerlink" title="13.5 MEMORY AND PERFORMANCE"></a>13.5 MEMORY AND PERFORMANCE</h2><h3 id="13-5-1-Event-Delegation"><a href="#13-5-1-Event-Delegation" class="headerlink" title="13.5.1 Event Delegation"></a>13.5.1 Event Delegation</h3><p>Basic idea: gather all same event handler in document</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(list, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123; </span><br><span class="line">    event = EventUtil.getEvent(event);</span><br><span class="line">    <span class="keyword">var</span> target = EventUtil.getTarget(event);</span><br><span class="line">    <span class="keyword">switch</span>(target.id)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"goSomewhere"</span>:</span><br><span class="line">            location.href = <span class="string">"http://www.wrox.com"</span>; </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"sayHi"</span>: </span><br><span class="line">            alert(<span class="string">"hi"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>The document object is immediately available and can have event handlers assigned at any point during the page’s life cycle</li>
<li>Less time is spent setting up event handlers on the page. Assigning one event handler takes fewer DOM references and less time.</li>
<li>Lower memory usage is required for the entire page, improving overall performance.</li>
</ul>
<h3 id="13-5-2-Removing-Event-Handlers"><a href="#13-5-2-Removing-Event-Handlers" class="headerlink" title="13.5.2 Removing Event Handlers"></a>13.5.2 Removing Event Handlers</h3><ul>
<li>Dangling event handlers: the event handler remains attached even the element is removed</li>
<li>Solution: remove event handler <code>btn.onclick = null;</code></li>
</ul>
<h2 id="13-6-SIMULATING-EVENTS"><a href="#13-6-SIMULATING-EVENTS" class="headerlink" title="13.6 SIMULATING EVENTS"></a>13.6 SIMULATING EVENTS</h2><h3 id="13-6-1-DOM-Event-Simulation"><a href="#13-6-1-DOM-Event-Simulation" class="headerlink" title="13.6.1 DOM Event Simulation"></a>13.6.1 DOM Event Simulation</h3><p>Create event by JavaScript</p>
<ul>
<li>UIEvents</li>
<li>MouseEvents</li>
<li>MutationEvents</li>
<li>HTMLEvents</li>
</ul>
<h3 id="13-6-2-Internet-Explorer-Event-Simulation"><a href="#13-6-2-Internet-Explorer-Event-Simulation" class="headerlink" title="13.6.2 Internet Explorer Event Simulation"></a>13.6.2 Internet Explorer Event Simulation</h3><p>Skip</p>
<h1 id="Chapter14-Scripting-Forms"><a href="#Chapter14-Scripting-Forms" class="headerlink" title="Chapter14 Scripting Forms"></a>Chapter14 Scripting Forms</h1><h2 id="14-1-Form-Basics"><a href="#14-1-Form-Basics" class="headerlink" title="14.1 Form Basics"></a>14.1 Form Basics</h2><p>by the <form> element in HTML and by the HTMLFormElement type in JavaScript. The HTMLFormElement type inherits from HTMLElement</form></p>
<table>
<thead>
<tr>
<th>attribute</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>acceptCharset</td>
<td>The character sets that the server can process</td>
</tr>
<tr>
<td>action</td>
<td>URL</td>
</tr>
<tr>
<td>elements</td>
<td>An HTMLCollection of all controls in the form.</td>
</tr>
<tr>
<td>enctype</td>
<td>The encoding type of the request</td>
</tr>
<tr>
<td>length</td>
<td>number of controls in the form</td>
</tr>
<tr>
<td>method</td>
<td>type of HTTP request. e.g. “get” “post”</td>
</tr>
<tr>
<td>name</td>
<td>form name</td>
</tr>
<tr>
<td>reset()</td>
<td>reset all fields to default</td>
</tr>
<tr>
<td>submit()</td>
<td>submit form</td>
</tr>
<tr>
<td>target</td>
<td>The name of the window to use for sending the request and receiving the response</td>
</tr>
</tbody>
</table>
<p>document.forms[0] or document.forms[1]</p>
<h3 id="14-1-1-Submitting-Forms"><a href="#14-1-1-Submitting-Forms" class="headerlink" title="14.1.1 Submitting Forms"></a>14.1.1 Submitting Forms</h3><p>any \&lt;input> \&lt;button> with <code>type=&quot;submit&quot;</code> can submit form</p>
<p>form.addEventListener(‘submit’, handler);<br>event.preventDefault(event)<br>form.submit()</p>
<h3 id="14-1-2-Submitting-Forms"><a href="#14-1-2-Submitting-Forms" class="headerlink" title="14.1.2 Submitting Forms"></a>14.1.2 Submitting Forms</h3><p>form.addEventListener(‘reset’, handler);<br>event.preventDefault(event)<br>form.reset()</p>
<h3 id="14-1-3-Form-Fields"><a href="#14-1-3-Form-Fields" class="headerlink" title="14.1.3 Form Fields"></a>14.1.3 Form Fields</h3><p>form.elements[0]<br>form.elements[‘text1’]<br>form.elements.length</p>
<h4 id="Common-Form-Field-Properties"><a href="#Common-Form-Field-Properties" class="headerlink" title="Common Form-Field Properties"></a>Common Form-Field Properties</h4><p>disabled |<br>form | pointer to this form<br>name | name<br>readOnly<br>tabIndex | tab order<br>type | checkbox, radio …<br>value | if file: readonly and contain file path</p>
<h4 id="Common-Form-Field-Methods"><a href="#Common-Form-Field-Methods" class="headerlink" title="Common Form-Field Methods"></a>Common Form-Field Methods</h4><p>focus() | sets the browser’s focus to the form fi eld<br>autofocus | <code>&lt;input type=&quot;text&quot; autofocus&gt;</code><br>blur() | remove focus from element</p>
<h4 id="Common-Form-Field-Events"><a href="#Common-Form-Field-Events" class="headerlink" title="Common Form-Field Events"></a>Common Form-Field Events</h4><p>blur | lose focus<br>change | lose focus and value changed for \&lt;input> \&lt;textarea> \&lt;select><br>focus | get focus</p>
<h2 id="14-2-SCRIPTING-TEXT-BOXES"><a href="#14-2-SCRIPTING-TEXT-BOXES" class="headerlink" title="14.2 SCRIPTING TEXT BOXES"></a>14.2 SCRIPTING TEXT BOXES</h2><p><code>texBox.value = &quot;some new value&quot;;</code>: DO NOT use standard DOM methods(setAttribute…)</p>
<table>
<thead>
<tr>
<th>category</th>
<th>name</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>selection</td>
<td>textbox.select()</td>
<td>select all text when getting focus</td>
</tr>
<tr>
<td></td>
<td>selectionStart<br>selectionEnd</td>
<td><code>textbox.value.substring(textbox.selectionStart, textbox.selectionEnd)</code></td>
</tr>
<tr>
<td></td>
<td>setSelectionRange(startIndex, endIndex)</td>
</tr>
<tr>
<td>filter</td>
<td>addHandler(“keypress”, func)</td>
<td>combine <code>keypress</code> and <code>preventDefault</code></td>
</tr>
<tr>
<td>Clipboard</td>
<td>beforecopy<br>copy<br>beforecut<br>cut<br>beforepaste<br>paste</td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>event.clipboardData.getData(&quot;text&quot;)</code><br><code>event.clipboardData.clearData()</code><br><code>event.clipboardData.setData(&quot;text&quot;, &quot;abcd&quot;)</code></td>
<td></td>
</tr>
<tr>
<td>HTML5 Constraint Validation</td>
<td>required</td>
<td></td>
</tr>
<tr>
<td></td>
<td>type=”email”<br>type=”url”</td>
<td>input types</td>
</tr>
<tr>
<td></td>
<td>type=”number” (range, datetime, datetime-local, date, month, week, time)<br>input.setUp(5)<br>input.setDown(5)</td>
<td>numeric ranges</td>
</tr>
<tr>
<td></td>
<td>checkValidity()</td>
<td>input.checkValidity()</td>
</tr>
<tr>
<td></td>
<td>input.validity</td>
<td>validation info</td>
</tr>
<tr>
<td></td>
<td>novalidate</td>
<td><code>&lt;form method=&quot;post&quot; novalidate&gt;</code></td>
</tr>
</tbody>
</table>
<h2 id="14-3-SCRIPTING-SELECT-BOXES"><a href="#14-3-SCRIPTING-SELECT-BOXES" class="headerlink" title="14.3 SCRIPTING SELECT BOXES"></a>14.3 SCRIPTING SELECT BOXES</h2><p><strong>select element methods</strong></p>
<table>
<thead>
<tr>
<th>method</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>add(newOption, relOption)</td>
<td>add newOption before relOption</td>
</tr>
<tr>
<td>multiple</td>
<td>if multiple selection allowed boolean</td>
</tr>
<tr>
<td>options</td>
<td>An HTMLCollection of <code>&lt;option&gt;</code> elements</td>
</tr>
<tr>
<td>remove(index)</td>
<td></td>
</tr>
<tr>
<td>selectedIndex</td>
<td></td>
</tr>
<tr>
<td>size</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>option element methods</strong></p>
<table>
<thead>
<tr>
<th>method</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>index</td>
<td></td>
</tr>
<tr>
<td>label</td>
<td></td>
</tr>
<tr>
<td>selected</td>
<td>boolean</td>
</tr>
<tr>
<td>text</td>
<td></td>
</tr>
<tr>
<td>value</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="14-4-FORM-SERIALIZATION"><a href="#14-4-FORM-SERIALIZATION" class="headerlink" title="14.4 FORM SERIALIZATION"></a>14.4 FORM SERIALIZATION</h2><p>How serialize? </p>
<ul>
<li>Read through all fields then encode it as “name=abc&amp;age=14&amp;phone=123”</li>
<li><code>new FormData()</code></li>
</ul>
<h2 id="14-5-RICH-TEXT-EDITING"><a href="#14-5-RICH-TEXT-EDITING" class="headerlink" title="14.5 RICH TEXT EDITING"></a>14.5 RICH TEXT EDITING</h2><p>Skip</p>
<h1 id="Chapter15-Graphics-with-Canvas"><a href="#Chapter15-Graphics-with-Canvas" class="headerlink" title="Chapter15 Graphics with Canvas"></a>Chapter15 Graphics with Canvas</h1><p>Skip</p>
<h1 id="Chapter-16-HTML5-Scripting"><a href="#Chapter-16-HTML5-Scripting" class="headerlink" title="Chapter 16 HTML5 Scripting"></a>Chapter 16 HTML5 Scripting</h1><h2 id="16-1-CROSS-DOCUMENT-MESSAGING-XDM"><a href="#16-1-CROSS-DOCUMENT-MESSAGING-XDM" class="headerlink" title="16.1 CROSS-DOCUMENT MESSAGING (XDM)"></a>16.1 CROSS-DOCUMENT MESSAGING (XDM)</h2><p>Definition: the ability to pass information between pages from different origins<br>e.g. <code>www.wrox.com</code> wants to communicate with a page from <code>p2p.wrox.com</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sender</span></span><br><span class="line"><span class="comment">//data: data</span></span><br><span class="line"><span class="comment">//origin: the origin of the document that sent the message</span></span><br><span class="line"><span class="comment">//source: A proxy for the window object of the document that sent the message</span></span><br><span class="line">postMessage(data, origin, source)</span><br><span class="line"></span><br><span class="line"><span class="comment">//receiver</span></span><br><span class="line"></span><br><span class="line">EventUtil.addHandler(<span class="built_in">window</span>, <span class="string">"message"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//ensure the sender is expected</span></span><br><span class="line">	<span class="keyword">if</span> (event.origin == <span class="string">"http://www.wrox.com"</span>)&#123;</span><br><span class="line">		processMessage(event.data);</span><br><span class="line">		<span class="comment">//optional: send a message back to the original window</span></span><br><span class="line">		event.source.postMessage(<span class="string">"Received!"</span>, <span class="string">"http://p2p.wrox.com"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="16-2-NATIVE-DRAG-AND-DROP"><a href="#16-2-NATIVE-DRAG-AND-DROP" class="headerlink" title="16.2 NATIVE DRAG AND DROP"></a>16.2 NATIVE DRAG AND DROP</h2><ul>
<li><p>Drag-and-Drop Events</p>
<ul>
<li>dragstart</li>
<li>drag</li>
<li>dragend</li>
</ul>
</li>
<li><p>Dragged over a valid drop target</p>
<ul>
<li>dragenter</li>
<li>dragover</li>
<li>dragleave</li>
<li>drop</li>
</ul>
</li>
<li><p>The dataTransfer Object</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>event.dataTransfer.getData()</td>
<td></td>
</tr>
<tr>
<td>event.dataTransfer.setData()</td>
<td></td>
</tr>
<tr>
<td>========================</td>
<td>==============================</td>
</tr>
<tr>
<td>event.dataTransfer.dropEffect</td>
<td>which type of drop behaviors are allowed [‘none’, move’, ‘copy’, ‘link’]</td>
</tr>
<tr>
<td>event.dataTransfer.effectAllowed</td>
<td>which dropEffect is allowed for the dragged item</td>
</tr>
<tr>
<td>========================</td>
<td>==============================</td>
</tr>
<tr>
<td>event.dataTransfer.addElement(element)</td>
<td>Adds an element to the drag operation</td>
</tr>
<tr>
<td>event.dataTransfer.clearData(format)</td>
<td></td>
</tr>
<tr>
<td>event.dataTransfer.setDragImage(element, x, y)</td>
<td>Allows you to specify an image to be displayed under the cursor as the drag takes plac</td>
</tr>
<tr>
<td>event.dataTransfer.types</td>
<td>A list of data types currently being stored</td>
</tr>
<tr>
<td>graggable</td>
<td><code>&lt;img src=&quot;smile.gif&quot; draggable=&quot;false&quot;&gt;</code></td>
</tr>
</tbody>
</table>
<h2 id="16-3-MEDIA-ELEMENTS"><a href="#16-3-MEDIA-ELEMENTS" class="headerlink" title="16.3 MEDIA ELEMENTS"></a>16.3 MEDIA ELEMENTS</h2><p>Two new tag: \&lt;video> \&lt;audio></p>
<table>
<thead>
<tr>
<th>Tag</th>
<th>Attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td>media source</td>
</tr>
<tr>
<td>poster</td>
<td>an image URI to display while the video content is being loaded</td>
</tr>
<tr>
<td>controls</td>
<td>display a UI component</td>
</tr>
</tbody>
</table>
<p>Properties:</p>
<ul>
<li>autoplay, buffered, bufferedBytes, bufferingRate, bufferingThrottled,<br>controls, currentLoop, currentSrc, currentTime, defaultPlaybackRate,<br>duration, ended, loop, muted, networkState,<br>paused, playbackRate, played, readyState, seekable,<br>seeking, src, start, totalBytes, videoHeight, videoWidth,<br>volume, </li>
<li>abort, canplay, canplaythrough, canshowcurrentframe, dataunavailable,<br>durationchange, emptied, empty, ended, error,<br>load, loadeddata, loadedmetadata, loadstart, pause,<br>play, playing, progress, ratechange, seeked,<br>seeking, stalled, timeupdate, volumechange, waiting</li>
</ul>
<p>Methods:</p>
<ul>
<li>element.play()</li>
<li>element.pause()</li>
<li>element.canPlayType(): return true/false</li>
<li>Audio(): <code>var audio = new Audio()</code></li>
</ul>
<h2 id="16-4-HISTORY-STATE-MANAGEMENT"><a href="#16-4-HISTORY-STATE-MANAGEMENT" class="headerlink" title="16.4 HISTORY STATE MANAGEMENT"></a>16.4 HISTORY STATE MANAGEMENT</h2><p>Issue: sometimes I open a new dialog by js and wanna close it by the <code>Back</code> button</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// push state into history</span></span><br><span class="line">history.pushState(data, title, URL)</span><br><span class="line"></span><br><span class="line"><span class="comment">// happens when clicking `Back` button</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"popState"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> state = event.popState;	<span class="comment">// null if no history</span></span><br><span class="line">	processState(state);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// overwrite current state</span></span><br><span class="line">history.replaceState(data, title, URL);</span><br></pre></td></tr></table></figure>
<h1 id="Chapter17-Error-Handling-and-Debugging"><a href="#Chapter17-Error-Handling-and-Debugging" class="headerlink" title="Chapter17 Error Handling and Debugging"></a>Chapter17 Error Handling and Debugging</h1><h2 id="17-1-BROWSER-ERROR-REPORTING"><a href="#17-1-BROWSER-ERROR-REPORTING" class="headerlink" title="17.1 BROWSER ERROR REPORTING"></a>17.1 BROWSER ERROR REPORTING</h2><p>Skip: Introduce Developer Tool</p>
<h2 id="17-2-ERROR-HANDLING"><a href="#17-2-ERROR-HANDLING" class="headerlink" title="17.2 ERROR HANDLING"></a>17.2 ERROR HANDLING</h2><h3 id="17-2-1-try-catch-finally"><a href="#17-2-1-try-catch-finally" class="headerlink" title="17.2.1 try-catch-finally"></a>17.2.1 try-catch-finally</h3><table>
<thead>
<tr>
<th>Error</th>
<th>Types</th>
</tr>
</thead>
<tbody>
<tr>
<td>Error</td>
<td>base type</td>
</tr>
<tr>
<td>EvalError</td>
<td>exception when eval()</td>
</tr>
<tr>
<td>RangeError</td>
<td>number is outside the bounds of its range</td>
</tr>
<tr>
<td>ReferenceError</td>
<td>attempting to access a variable that doesn’t exist</td>
</tr>
<tr>
<td>SyntaxError</td>
<td></td>
</tr>
<tr>
<td>TypeError</td>
<td></td>
</tr>
<tr>
<td>URIError</td>
<td>encodeURI() or decodeURI()</td>
</tr>
</tbody>
</table>
<h3 id="17-2-2-Throwing-Errors"><a href="#17-2-2-Throwing-Errors" class="headerlink" title="17.2.2 Throwing Errors"></a>17.2.2 Throwing Errors</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// all legal</span></span><br><span class="line"><span class="keyword">throw</span> <span class="number">12345</span>;</span><br><span class="line"><span class="keyword">throw</span> <span class="string">"Hello world!"</span>;</span><br><span class="line"><span class="keyword">throw</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">throw</span> &#123; <span class="attr">name</span>: <span class="string">"JavaScript"</span>&#125;;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">SyntaxError</span>(<span class="string">"I don’t like your syntax."</span>)</span><br></pre></td></tr></table></figure>
<p>customized error</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CustomError</span>(<span class="params">message</span>)</span>&#123; </span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">"CustomError"</span>;</span><br><span class="line">    <span class="keyword">this</span>.message = message;</span><br><span class="line">&#125;</span><br><span class="line">CustomError.prototype = <span class="keyword">new</span> <span class="built_in">Error</span>(); </span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> CustomError(<span class="string">"My message"</span>);</span><br></pre></td></tr></table></figure>
<p>When?</p>
<ul>
<li>A good error-handling protocol ensures that the only errors that occur are the ones that you throw</li>
<li>e.g.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">values</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (!(values <span class="keyword">instanceof</span> <span class="built_in">Array</span>))&#123;</span><br><span class="line">       <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"process(): Argument must be an array."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    values.sort();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>, len=values.length; i &lt; len; i++)&#123; </span><br><span class="line">        <span class="keyword">if</span> (values[i] &gt; <span class="number">100</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> values[i]; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="17-2-3-The-error-Event"><a href="#17-2-3-The-error-Event" class="headerlink" title="17.2.3 The error Event"></a>17.2.3 The error Event</h3><p>Error even has event !!!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">message, url, line</span>)</span>&#123; </span><br><span class="line">    alert(message);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="17-2-4-Error-Handling-Strategies"><a href="#17-2-4-Error-Handling-Strategies" class="headerlink" title="17.2.4 Error-Handling Strategies"></a>17.2.4 Error-Handling Strategies</h3><h3 id="17-2-5-Identify-Where-Errors-Might-Occur"><a href="#17-2-5-Identify-Where-Errors-Might-Occur" class="headerlink" title="17.2.5 Identify Where Errors Might Occur"></a>17.2.5 Identify Where Errors Might Occur</h3><ul>
<li>Type coercion errors</li>
<li>Data type errors</li>
<li>Communication errors</li>
</ul>
<h3 id="17-2-6-Distinguishing-between-Fatal-and-Nonfatal-Errors"><a href="#17-2-6-Distinguishing-between-Fatal-and-Nonfatal-Errors" class="headerlink" title="17.2.6 Distinguishing between Fatal and Nonfatal Errors"></a>17.2.6 Distinguishing between Fatal and Nonfatal Errors</h3><h3 id="17-2-7-Log-Errors-to-the-Server"><a href="#17-2-7-Log-Errors-to-the-Server" class="headerlink" title="17.2.7 Log Errors to the Server"></a>17.2.7 Log Errors to the Server</h3><p>Soooooo smart. Each image will visit its url.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logError</span>(<span class="params">sev, msg</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">    img.src = <span class="string">"log.php?sev="</span> + <span class="built_in">encodeURIComponent</span>(sev) + <span class="string">"&amp;msg="</span> +</span><br><span class="line">    <span class="built_in">encodeURIComponent</span>(msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="17-3-DEBUGGING-TECHNIQUES"><a href="#17-3-DEBUGGING-TECHNIQUES" class="headerlink" title="17.3 DEBUGGING TECHNIQUES"></a>17.3 DEBUGGING TECHNIQUES</h2><h3 id="17-3-1-Logging-Messages-to-a-Console"><a href="#17-3-1-Logging-Messages-to-a-Console" class="headerlink" title="17.3.1 Logging Messages to a Console"></a>17.3.1 Logging Messages to a Console</h3><ul>
<li>error(message)</li>
<li>info(message)</li>
<li>log(message)</li>
<li>warn(message)</li>
</ul>
<h3 id="17-3-2-Logging-Messages-to-the-Page"><a href="#17-3-2-Logging-Messages-to-the-Page" class="headerlink" title="17.3.2 Logging Messages to the Page"></a>17.3.2 Logging Messages to the Page</h3><p>never mind</p>
<h3 id="17-3-3-Throwing-Errors"><a href="#17-3-3-Throwing-Errors" class="headerlink" title="17.3.3 Throwing Errors"></a>17.3.3 Throwing Errors</h3><ul>
<li><code>throw new Error(xxx);</code></li>
<li><code>assert(condition, msg)</code></li>
</ul>
<h2 id="17-4-COMMON-INTERNET-EXPLORER-ERRORS"><a href="#17-4-COMMON-INTERNET-EXPLORER-ERRORS" class="headerlink" title="17.4 COMMON INTERNET EXPLORER ERRORS"></a>17.4 COMMON INTERNET EXPLORER ERRORS</h2><p>Skip</p>
<h1 id="Chapter18-XML-in-JavaScript"><a href="#Chapter18-XML-in-JavaScript" class="headerlink" title="Chapter18 XML in JavaScript"></a>Chapter18 XML in JavaScript</h1><p>Skip</p>
<h1 id="Chapter19-ECMAScript-for-XML"><a href="#Chapter19-ECMAScript-for-XML" class="headerlink" title="Chapter19 ECMAScript for XML"></a>Chapter19 ECMAScript for XML</h1><p>Skip</p>
<h1 id="Chapter20-JSON"><a href="#Chapter20-JSON" class="headerlink" title="Chapter20 JSON"></a>Chapter20 JSON</h1><h2 id="20-1-SYNTAX"><a href="#20-1-SYNTAX" class="headerlink" title="20.1 SYNTAX"></a>20.1 SYNTAX</h2><table>
<thead>
<tr>
<th>type</th>
<th>example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Simple Values</td>
<td>“Hello World”</td>
</tr>
<tr>
<td>Object</td>
<td>{“name”: “Nicholas”, “age”: 29}</td>
</tr>
<tr>
<td>Arrays</td>
<td>[{..}, {..}]</td>
</tr>
</tbody>
</table>
<h2 id="20-2-PARSING-AND-SERIALIZATION"><a href="#20-2-PARSING-AND-SERIALIZATION" class="headerlink" title="20.2 PARSING AND SERIALIZATION"></a>20.2 PARSING AND SERIALIZATION</h2><h3 id="20-2-1-The-JSON-Object"><a href="#20-2-1-The-JSON-Object" class="headerlink" title="20.2.1 The JSON Object"></a>20.2.1 The JSON Object</h3><table>
<thead>
<tr>
<th>Method</th>
<th>Convert</th>
</tr>
</thead>
<tbody>
<tr>
<td>JSON.stringify()</td>
<td>object -&gt; JSON string</td>
</tr>
<tr>
<td>JSON.parse()</td>
<td>JSON string -&gt; object</td>
</tr>
</tbody>
</table>
<h3 id="20-2-2-Serialization-Options"><a href="#20-2-2-Serialization-Options" class="headerlink" title="20.2.2 Serialization Options"></a>20.2.2 Serialization Options</h3><ul>
<li><p>Filtering Results</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(object, [<span class="string">"title"</span>, <span class="string">"edition"</span>])</span><br><span class="line"><span class="built_in">JSON</span>.stringify(object, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key === <span class="string">"xxx"</span>) &#123;<span class="keyword">return</span> <span class="literal">undefined</span>;&#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>String Indentation</p>
<p>  <code>JSON.stringify(object, null, 4);   // indent as 4</code></p>
</li>
<li><p>The toJSON() Method</p>
<ul>
<li><p>define a toJSON() method in object. e.g.</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;<span class="string">"name"</span>:<span class="string">"Nicholas"</span>, </span><br><span class="line">            <span class="string">"age"</span>:<span class="number">16</span>, </span><br><span class="line">            toJSON:<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">            &#125;&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(book);   <span class="comment">// only stringify Simple Value name</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="20-2-3-Parsing-Options"><a href="#20-2-3-Parsing-Options" class="headerlink" title="20.2.3 Parsing Options"></a>20.2.3 Parsing Options</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bookCopy = <span class="built_in">JSON</span>.parse(jsonText, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="string">"releaseDate"</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(value);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key == <span class="string">"name"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">undefined</span>;   <span class="comment">// skip this pair</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="Chapter21-Ajax-and-Comet"><a href="#Chapter21-Ajax-and-Comet" class="headerlink" title="Chapter21 Ajax and Comet"></a>Chapter21 Ajax and Comet</h1><p>The key technology pushing Ajax forward was the <code>XMLHttpRequest</code> (XHR) object</p>
<h2 id="21-1-THE-XMLHttpRequest-OBJECT"><a href="#21-1-THE-XMLHttpRequest-OBJECT" class="headerlink" title="21.1 THE XMLHttpRequest OBJECT"></a>21.1 THE XMLHttpRequest OBJECT</h2><h3 id="21-1-2-XHR-Usage"><a href="#21-1-2-XHR-Usage" class="headerlink" title="21.1.2 XHR Usage"></a>21.1.2 XHR Usage</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span> ((xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span>) || xhr.status == <span class="number">304</span>)&#123;</span><br><span class="line">			alert(xhr.responseText);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			alert(<span class="string">"Request was unsuccessful: "</span> + xhr.status);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"example.txt"</span>, <span class="literal">false</span>);	<span class="comment">// GET/POST, URI, isAsynchronous</span></span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<p>You can access only URLs that exist on the same origin, which means the same domain, using the same port, and with the same protocol.</p>
<table>
<thead>
<tr>
<th>readyState</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Uninitialized. The open() method hasn’t been called yet.</td>
</tr>
<tr>
<td>1</td>
<td>Open. The open() method has been called but send() has not been called.</td>
</tr>
<tr>
<td>2</td>
<td>Sent. The send() method has been called but no response has been received.</td>
</tr>
<tr>
<td>3</td>
<td>Receiving. Some response data has been retrieved.</td>
</tr>
<tr>
<td>4</td>
<td>Complete. All of the response data has been retrieved and is available.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>attribute</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>responseText</td>
<td>The text that was returned as the body of the response.</td>
</tr>
<tr>
<td>responseXML</td>
<td>Contains an XML DOM document with the response data if the response has a content type of “text/xml” or “application/xml” .</td>
</tr>
<tr>
<td>status</td>
<td>The HTTP status of the response.</td>
</tr>
<tr>
<td>statusText</td>
<td>The description of the HTTP status.</td>
</tr>
</tbody>
</table>
<h3 id="21-1-3-HTTP-Headers"><a href="#21-1-3-HTTP-Headers" class="headerlink" title="21.1.3 HTTP Headers"></a>21.1.3 HTTP Headers</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"example.php"</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">"MyHeader"</span>, <span class="string">"MyValue"</span>);</span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>Accept</li>
<li>Accept-Charset</li>
<li>Accept-Encoding</li>
<li>Accept-Language</li>
<li>Connection</li>
<li>Cookie</li>
<li>Host </li>
<li>Referer </li>
<li>User-Agent </li>
</ul>
<h3 id="21-1-4-GET-Requests"><a href="#21-1-4-GET-Requests" class="headerlink" title="21.1.4 GET Requests"></a>21.1.4 GET Requests</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"example.php?name1=value1&amp;name2=value2"</span>, <span class="literal">true</span>);		<span class="comment">// wrong</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// should be encoded</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addURLParam</span>(<span class="params">url, name, value</span>) </span>&#123;</span><br><span class="line">	url += (url.indexOf(<span class="string">"?"</span>) == <span class="number">-1</span> ? <span class="string">"?"</span> : <span class="string">"&amp;"</span>);</span><br><span class="line">	url += <span class="built_in">encodeURIComponent</span>(name) + <span class="string">"="</span> + <span class="built_in">encodeURIComponent</span>(value);</span><br><span class="line">	<span class="keyword">return</span> url;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">url = addURLParam(url, <span class="string">'name'</span>, <span class="string">'Ni'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="21-1-5-POST-Requests"><a href="#21-1-5-POST-Requests" class="headerlink" title="21.1.5 POST Requests"></a>21.1.5 POST Requests</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(<span class="string">"post"</span>, <span class="string">"postexample.php"</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line"><span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">"user-info"</span>);</span><br><span class="line">xhr.send(serialize(form));</span><br></pre></td></tr></table></figure>
<ol>
<li>set header</li>
<li>serialize form</li>
</ol>
<h2 id="21-2-XMLHttpRequest-LEVEL-2"><a href="#21-2-XMLHttpRequest-LEVEL-2" class="headerlink" title="21.2 XMLHttpRequest LEVEL 2"></a>21.2 XMLHttpRequest LEVEL 2</h2><h3 id="21-2-1-FormData"><a href="#21-2-1-FormData" class="headerlink" title="21.2.1 FormData"></a>21.2.1 FormData</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData(<span class="built_in">document</span>.forms[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">data.append(<span class="string">"name"</span>, <span class="string">"Nicholas"</span>);</span><br><span class="line"></span><br><span class="line">xhr.send(data);</span><br></pre></td></tr></table></figure>
<h3 id="21-2-2-Timeouts"><a href="#21-2-2-Timeouts" class="headerlink" title="21.2.2 Timeouts"></a>21.2.2 Timeouts</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"timeout.php"</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.timeout = <span class="number">1000</span>; <span class="comment">//set timeout for 1 second (IE 8+ only)</span></span><br><span class="line">xhr.ontimeout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	alert(<span class="string">"Request did not return in a second."</span>);</span><br><span class="line">&#125;;</span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<h3 id="21-2-3-overrideMimeType"><a href="#21-2-3-overrideMimeType" class="headerlink" title="21.2.3 overrideMimeType()"></a>21.2.3 overrideMimeType()</h3><p>The returned MIME type for a response determines how the response is handled by the XHR objec</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = createXHR();</span><br><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"text.php"</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.overrideMimeType(<span class="string">"text/xml"</span>);</span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<h2 id="21-3-PROGRESS-EVENTS"><a href="#21-3-PROGRESS-EVENTS" class="headerlink" title="21.3 PROGRESS EVENTS"></a>21.3 PROGRESS EVENTS</h2><table>
<thead>
<tr>
<th>event</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>loadstart</td>
<td>Fires when the fi rst byte of the response has been received.</td>
</tr>
<tr>
<td>progress</td>
<td>Fires repeatedly as a response is being received.</td>
<td>lengthComputable, position, totalSize</td>
</tr>
<tr>
<td>error</td>
<td>Fires when there was an error attempting the request.</td>
</tr>
<tr>
<td>abort</td>
<td>Fires when the connection was terminated by calling abort() .</td>
</tr>
<tr>
<td>load</td>
<td>Fires when the response has been fully received.</td>
<td></td>
</tr>
<tr>
<td>loadend</td>
<td>Fires when the communication is complete and after fi ring error , abort , or load .</td>
</tr>
</tbody>
</table>
<h2 id="21-4-CROSS-ORIGIN-RESOURCE-SHARING"><a href="#21-4-CROSS-ORIGIN-RESOURCE-SHARING" class="headerlink" title="21.4 CROSS-ORIGIN RESOURCE SHARING"></a>21.4 CROSS-ORIGIN RESOURCE SHARING</h2><p>CORS: XHR objects can access resources only on the domain from which the containing web page originates</p>
<ul>
<li>send request with extra header called Origin including (protocol, domain name, and port)<ul>
<li>e.g. <code>Origin: http://www.nczonline.net</code></li>
</ul>
</li>
<li>If the server decides that the request should be allowed, it sends an <code>Access-Control-Allow-Origin</code> header echoing back the same origin that was sent or “*” if it’s a public resource<ul>
<li>e.g. <code>Access-Control-Allow-Origin: http://www.nczonline.net</code></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = createXHR();</span><br><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"http://www.somewhere-else.com/page/"</span>, <span class="literal">true</span>);	<span class="comment">// an absolute URL</span></span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Preflighted Requests</p>
<ul>
<li>CORS allows the use of custom headers, methods other than GET or POST, and different body content types</li>
<li>When you try to make a request with one of the advanced options, a “preflight” request is made to the server. </li>
<li><p>This request uses the OPTIONS method and sends the following headers</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Origin: http:<span class="comment">//www.nczonline.net</span></span><br><span class="line">Access-Control-Request-Method: POST</span><br><span class="line">Access-Control-Request-Headers: NCZ</span><br></pre></td></tr></table></figure>
</li>
<li><p>server should return</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: http:<span class="comment">//www.nczonline.net</span></span><br><span class="line">Access-Control-Allow-Methods: POST, GET</span><br><span class="line">Access-Control-Allow-Headers: NCZ</span><br><span class="line">Access-Control-Max-Age: <span class="number">1728000</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li>Credentialed Requests<ul>
<li><code>Access-Control-Allow-Credentials: true</code></li>
</ul>
</li>
</ul>
<h2 id="21-5-ALTERNATE-CROSS-DOMAIN-TECHNIQUES"><a href="#21-5-ALTERNATE-CROSS-DOMAIN-TECHNIQUES" class="headerlink" title="21.5 ALTERNATE CROSS-DOMAIN TECHNIQUES"></a>21.5 ALTERNATE CROSS-DOMAIN TECHNIQUES</h2><ul>
<li><p>Image Pings</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">img.onload = img.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	alert(<span class="string">"Done!"</span>);</span><br><span class="line">&#125;;</span><br><span class="line">img.src = <span class="string">"http://www.example.com/test?name=Nicholas"</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>* you can only send GET requests
* you cannot access the response text from the server.
</code></pre><ul>
<li><p>JSONP</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">handleResponse</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">alert(<span class="string">"You’re at IP address "</span> + response.ip + <span class="string">", which is in "</span> +</span><br><span class="line">response.city + <span class="string">", "</span> + response.region_name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">script.src = <span class="string">"http://freegeoip.net/json/?callback=handleResponse"</span>;</span><br><span class="line"><span class="built_in">document</span>.body.insertBefore(script, <span class="built_in">document</span>.body.firstChild);</span><br></pre></td></tr></table></figure>
<ul>
<li>Unsafe: you’re pulling executable code into your page from another domain</li>
<li>Hard to determine that a JSONP request has failed</li>
</ul>
</li>
<li><p>Comet</p>
<ul>
<li>long polling</li>
<li>streaming</li>
</ul>
</li>
<li><p>Server-Sent Events</p>
<ul>
<li><p>Client API for Comet</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> evtSource = <span class="keyword">new</span> EventSource(<span class="string">"ssedemo.php"</span>);</span><br><span class="line">evtSource.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newElement = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">  </span><br><span class="line">  newElement.innerHTML = <span class="string">"message: "</span> + e.data;</span><br><span class="line">  eventList.appendChild(newElement);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Server code</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/stream/', methods=['GET', 'POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">stream</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> Response(event(), mimetype=<span class="string">"text/event-stream"</span>) <span class="comment"># MIME type</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Web Sockets</p>
<ul>
<li>Must use a specialized server supporting the protocol to work properly</li>
<li><p>Client API</p>
<ul>
<li>event: open, error, close, message</li>
<li><p>readyState</p>
<ul>
<li>WebSocket.OPENING(0)</li>
<li>WebSocket.OPEN(1)</li>
<li>WebSocket.CLOSING(2)</li>
<li>WebSocket.CLOSE(3)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">"ws://www.example.com/server.php"</span>);</span><br><span class="line">socket.send(<span class="built_in">JSON</span>.stringify(message));</span><br><span class="line"></span><br><span class="line">socket.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> data = event.data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">socket.close()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="21-5-6-SSE-versus-Web-Sockets"><a href="#21-5-6-SSE-versus-Web-Sockets" class="headerlink" title="21.5.6 SSE versus Web Sockets"></a>21.5.6 SSE versus Web Sockets</h3><ul>
<li><p>SSE</p>
<ul>
<li>base on HTTP protocol</li>
<li>easier to implement</li>
<li>one direction</li>
</ul>
</li>
<li><p>Web Sockets</p>
<ul>
<li>base on Web Socket protocol</li>
<li>bidirection</li>
</ul>
</li>
</ul>
<h2 id="21-6-SECURITY"><a href="#21-6-SECURITY" class="headerlink" title="21.6 SECURITY"></a>21.6 SECURITY</h2><ul>
<li>Requiring SSL to access resources that can be requested via XHR.</li>
<li>Requiring a computed token to be sent along with every request.</li>
</ul>
<h1 id="Chapter22-Advanced-Techniques"><a href="#Chapter22-Advanced-Techniques" class="headerlink" title="Chapter22 Advanced Techniques"></a>Chapter22 Advanced Techniques</h1><h2 id="22-1-ADVANCED-FUNCTIONS"><a href="#22-1-ADVANCED-FUNCTIONS" class="headerlink" title="22.1 ADVANCED FUNCTIONS"></a>22.1 ADVANCED FUNCTIONS</h2><h3 id="22-1-1-Safe-Type-Detection"><a href="#22-1-1-Safe-Type-Detection" class="headerlink" title="22.1.1 Safe Type Detection"></a>22.1.1 Safe Type Detection</h3><h4 id="Issue"><a href="#Issue" class="headerlink" title="Issue:"></a>Issue:</h4><p>The <code>instanceof</code> operator does not work when multiple global scopes are present, such as when there are multiple frames. e.g.<code>var isArray = value instanceof Array;</code></p>
<h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution:"></a>Solution:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(value) == <span class="string">"[object Array]"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="22-1-2-Scope-Safe-Constructors"><a href="#22-1-2-Scope-Safe-Constructors" class="headerlink" title="22.1.2 Scope-Safe Constructors"></a>22.1.2 Scope-Safe Constructors</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name; <span class="keyword">this</span>.age = age; <span class="keyword">this</span>.job = job;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(name, age, job);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="22-1-3-Lazy-Loading-Functions"><a href="#22-1-3-Lazy-Loading-Functions" class="headerlink" title="22.1.3 Lazy Loading Functions"></a>22.1.3 Lazy Loading Functions</h3><ul>
<li><p>manipulating the function the first time it is called</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createXHR</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> XMLHttpRequest != <span class="string">"undefined"</span>)&#123;</span><br><span class="line">        createXHR = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;             <span class="comment">// override the function</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        createXHR = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;             <span class="comment">// override the function</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"No XHR object available."</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> createXHR();                     <span class="comment">// next time the function is already decided</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>assign the appropriate function immediately when the function is declared</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createXHR = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> XMLHttpRequest != <span class="string">"undefined"</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest(); </span><br><span class="line">        &#125;;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"No XHR object available."</span>); </span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="22-1-4-Function-Binding"><a href="#22-1-4-Function-Binding" class="headerlink" title="22.1.4 Function Binding"></a>22.1.4 Function Binding</h3><p>see 5.5.5</p>
<h3 id="22-1-5-Function-Currying"><a href="#22-1-5-Function-Currying" class="headerlink" title="22.1.5 Function Currying"></a>22.1.5 Function Currying</h3><p>Creates functions that have one or more arguments already set (also called partial function application</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> handler = &#123;</span><br><span class="line">    message: <span class="string">"Event handled"</span>,</span><br><span class="line">    handleClick: <span class="function"><span class="keyword">function</span>(<span class="params">name, event</span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.message + <span class="string">":"</span> + name + <span class="string">":"</span> + event.type);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"my-btn"</span>);</span><br><span class="line">EventUtil.addHandler(btn, <span class="string">"click"</span>, bind(handler.handleClick, handler, <span class="string">"my-btn"</span>));</span><br></pre></td></tr></table></figure>
<p>Just like functional programming</p>
<h2 id="22-2-TAMPER-PROOF-OBJECTS"><a href="#22-2-TAMPER-PROOF-OBJECTS" class="headerlink" title="22.2 TAMPER-PROOF OBJECTS"></a>22.2 TAMPER-PROOF OBJECTS</h2><ul>
<li><p>Nonextensible Objects</p>
<ul>
<li>cannot add</li>
<li><p><code>Object.isExtensible(person)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123; <span class="attr">name</span>: <span class="string">"Nicholas"</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(person);</span><br><span class="line">person.age = <span class="number">29</span>; </span><br><span class="line">alert(person.age); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>Sealed Objects</p>
<ul>
<li>cannot add/delete</li>
<li><p><code>Object.isSealed(person);</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123; <span class="attr">name</span>: <span class="string">"Nicholas"</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.seal(person);</span><br><span class="line">person.age = <span class="number">29</span>; </span><br><span class="line">alert(person.age);  <span class="comment">//undefined </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> person.name; </span><br><span class="line">alert(person.name); <span class="comment">//"Nicholas"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Frozen Objects</p>
<ul>
<li>cannot add/delete/update</li>
<li><p><code>Ojbject.isFrozen(person)</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123; <span class="attr">name</span>: <span class="string">"Nicholas"</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.seal(person);</span><br><span class="line">person.age = <span class="number">29</span>; </span><br><span class="line">alert(person.age);  <span class="comment">//undefined </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> person.name; </span><br><span class="line">alert(person.name); <span class="comment">//"Nicholas"</span></span><br><span class="line"></span><br><span class="line">person.name = <span class="string">"Greg"</span>;</span><br><span class="line">alert(person.name); <span class="comment">//"Nicholas"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="22-3-ADVANCED-TIMERS"><a href="#22-3-ADVANCED-TIMERS" class="headerlink" title="22.3 ADVANCED TIMERS"></a>22.3 ADVANCED TIMERS</h2><h3 id="22-3-1-setTimeout-and-setInterval"><a href="#22-3-1-setTimeout-and-setInterval" class="headerlink" title="22.3.1 setTimeout and setInterval"></a>22.3.1 setTimeout and setInterval</h3><ul>
<li>No code is executed immediately in JavaScript; it is executed as soon as the process is idle.</li>
<li><code>setTimeout(func, 250)</code> means adding func into the queue after 250mm</li>
<li><code>setInterval()</code> has 2 main issues:<ul>
<li>intervals may be skipped</li>
<li>intervals may be smaller than expected between multiple timer-code executions</li>
</ul>
</li>
</ul>
<h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution:"></a>Solution:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="comment">//processing</span></span><br><span class="line">    setTimeout(<span class="built_in">arguments</span>.callee, interval); </span><br><span class="line">    </span><br><span class="line">&#125;, interval);</span><br></pre></td></tr></table></figure>
<h3 id="22-3-2-Yielding-Process"><a href="#22-3-2-Yielding-Process" class="headerlink" title="22.3.2 Yielding Process"></a>22.3.2 Yielding Process</h3><h4 id="Issue-1"><a href="#Issue-1" class="headerlink" title="Issue:"></a>Issue:</h4><ul>
<li>There is a long-running script limit</li>
<li>If you reach that limit, the user is presented with a browser error dialog indicating that a script is taking too long to execute and asking whether the user would like to allow it to continue processing or stop.</li>
</ul>
<h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution:"></a>Solution:</h4><ul>
<li>array chunking</li>
<li>create a queue of items to process, use timers to pull the next item to process, process it, and then set another timer</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//get next item and process it </span></span><br><span class="line">    <span class="keyword">var</span> item = array.shift(); </span><br><span class="line">    process(item);</span><br><span class="line">    <span class="comment">//if there’s more items, set another timeout </span></span><br><span class="line">    <span class="keyword">if</span>(array.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        setTimeout(<span class="built_in">arguments</span>.callee, <span class="number">100</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<h3 id="22-3-3-Function-Throttling"><a href="#22-3-3-Function-Throttling" class="headerlink" title="22.3.3 Function Throttling"></a>22.3.3 Function Throttling</h3><h4 id="Issue-2"><a href="#Issue-2" class="headerlink" title="Issue:"></a>Issue:</h4><ul>
<li>Attempting to perform too many DOM-related operations in sequence can cause the browser to hang, and sometimes crash.</li>
</ul>
<h4 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution:"></a>Solution:</h4><ul>
<li>The basic idea behind function throttling is that some code should not be executed repeatedly without a break</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> processor = &#123; </span><br><span class="line">    timeoutId: <span class="literal">null</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//method that actually performs the processing </span></span><br><span class="line">    performProcessing: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//actual processing code </span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//method that is called to initiate processing </span></span><br><span class="line">    process: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.timeoutId);</span><br><span class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>.timeoutId = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            that.performProcessing(); </span><br><span class="line">        &#125;, <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;    </span><br><span class="line"><span class="comment">//try to start processing </span></span><br><span class="line">processor.process();</span><br></pre></td></tr></table></figure>
<h2 id="22-4-CUSTOM-EVENTS"><a href="#22-4-CUSTOM-EVENTS" class="headerlink" title="22.4 CUSTOM EVENTS"></a>22.4 CUSTOM EVENTS</h2><p>Use the observer pattern</p>
<h2 id="22-5-DRAG-AND-DROP"><a href="#22-5-DRAG-AND-DROP" class="headerlink" title="22.5 DRAG AND DROP"></a>22.5 DRAG AND DROP</h2><p>just some drag/drop event implementation code</p>
<h1 id="Chapter23-Offline-Applications-and-Client-Side-Storage"><a href="#Chapter23-Offline-Applications-and-Client-Side-Storage" class="headerlink" title="Chapter23 Offline Applications and Client-Side Storage"></a>Chapter23 Offline Applications and Client-Side Storage</h1><h2 id="23-1-OFFLINE-DETECTION"><a href="#23-1-OFFLINE-DETECTION" class="headerlink" title="23.1 OFFLINE DETECTION"></a>23.1 OFFLINE DETECTION</h2><ul>
<li><code>navigator.online</code></li>
<li>events<ul>
<li><code>online</code></li>
<li><code>offline</code></li>
</ul>
</li>
</ul>
<h2 id="23-2-APPLICATION-CACHE"><a href="#23-2-APPLICATION-CACHE" class="headerlink" title="23.2 APPLICATION CACHE"></a>23.2 APPLICATION CACHE</h2><ul>
<li><p>Need a manifest file: lists out the resources to be downloaded</p>
<ul>
<li><p>offline.appcache</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST</span><br><span class="line"></span><br><span class="line">file.js</span><br><span class="line">file.css</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>The manifest file is associated with a page by specifying its path in the manifest attribute of <html></html></p>
<p>  <code>&lt;html manifest=&quot;/offline.appcache&quot;&gt;</code>   </p>
</li>
<li><p>JS API</p>
<ul>
<li>applicationCache.status</li>
<li>applicationCache.update()</li>
<li>applicationCache.swapCache()</li>
<li>applicationCache event<ul>
<li>checking</li>
<li>error</li>
<li>noupdate</li>
<li>downloading</li>
<li>progress</li>
<li>updateready</li>
<li>cached</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="23-3-DATA-STORAGE"><a href="#23-3-DATA-STORAGE" class="headerlink" title="23.3 DATA STORAGE"></a>23.3 DATA STORAGE</h2><h3 id="23-3-1-Cookie"><a href="#23-3-1-Cookie" class="headerlink" title="23.3.1 Cookie"></a>23.3.1 Cookie</h3><ul>
<li><p>Response header:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Content-type: text/html </span><br><span class="line"><span class="built_in">Set</span>-Cookie: name=value </span><br><span class="line">Other-header: other-header-value</span><br></pre></td></tr></table></figure>
</li>
<li><p>Request header</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/<span class="number">1.1</span></span><br><span class="line">Cookie: name=value</span><br><span class="line">Other-header: other-header-value</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>Restrictions<ul>
<li>Cookies are, by nature, tied to a specific domain</li>
<li>Limitation of amount of cookies</li>
<li>Limitation of length of cookies</li>
</ul>
</li>
<li><p>Cookie Parts</p>
<ul>
<li>name: case insensitive, should be URL encoded</li>
<li>value: should be URL encoded</li>
<li>domain: The domain for which the cookie is valid</li>
<li>path: The path within the specified domain for which the cookie should be sent to the server<ul>
<li>we can specify <code>http://www.wrox.com/books</code> as path, so cookie won’t be sent in <code>https://www.wrox.com</code> even they have the same domain</li>
</ul>
</li>
<li>expiration: A time stamp indicating when the cookie should be deleted (that is, when it should stop being sent to the server</li>
<li>secure flag: cookie information is sent to the server only if an SSL connection is used.<ul>
<li><code>https://www.wrox.com</code> works</li>
<li><code>http://www.wrox.com</code> doesn’t work</li>
</ul>
</li>
</ul>
</li>
<li><p>Cookie in JavaScript</p>
<ul>
<li><code>document.cookie = &quot;name=Nicholas&quot;</code><ul>
<li>added to the existing set of cookies instead of </li>
<li>Setting <code>document.cookie</code> does not overwrite any cookies unless the name of the cookie being set is already in use</li>
</ul>
</li>
</ul>
</li>
<li><p>Subcookies</p>
<ul>
<li>A technique that get around the per-domain cookie limit imposed by browsers</li>
<li>format: <code>name=name1=value1&amp;name2=value2&amp;name3=value3&amp;name4=value4&amp;name5=value5</code></li>
</ul>
</li>
</ul>
<h3 id="23-3-2-Internet-Explorer-User-Data"><a href="#23-3-2-Internet-Explorer-User-Data" class="headerlink" title="23.3.2 Internet Explorer User Data"></a>23.3.2 Internet Explorer User Data</h3><p>Skip</p>
<h3 id="23-3-3-The-Storage-Type"><a href="#23-3-3-The-Storage-Type" class="headerlink" title="23.3.3 The Storage Type"></a>23.3.3 The Storage Type</h3><p>Storage Object</p>
<ul>
<li>methods<ul>
<li>clear()</li>
<li>getItem(name)</li>
<li>key(index)</li>
<li>removeItem(name)</li>
<li>setItem(name value)</li>
</ul>
</li>
<li>types<ul>
<li>sessionStorage</li>
<li>globalStorage (deprecated)</li>
<li>localStorage</li>
</ul>
</li>
<li>storage event<ul>
<li>Whenever a change is made to a Storage object, the storage event is fired on the document</li>
<li>domain</li>
<li>key</li>
<li>newValue</li>
<li>oldValue</li>
</ul>
</li>
</ul>
<h4 id="sessionStorage"><a href="#sessionStorage" class="headerlink" title="sessionStorage"></a>sessionStorage</h4><ul>
<li>Data is stored until the browser is closed</li>
<li>Data stored persists across page refreshes</li>
<li>Data available if the browser crashes and is restarted</li>
</ul>
<h4 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h4><ul>
<li>In order to access the same localStorage object, pages must be served from the same domain (subdomains aren’t valid), using the same protocol, and on the same port. </li>
<li>Data persisted until it is specifically removed via JavaScript or the user clears the browser’s cache.</li>
</ul>
<h3 id="23-3-4-IndexedDB"><a href="#23-3-4-IndexedDB" class="headerlink" title="23.3.4 IndexedDB"></a>23.3.4 IndexedDB</h3><ul>
<li>database in JS</li>
<li>use case<ul>
<li>store large amount of data in UI</li>
<li>locate data fast</li>
<li>suppport transaction</li>
<li>offline application</li>
</ul>
</li>
</ul>
<h1 id="Chapter24-Best-Practices"><a href="#Chapter24-Best-Practices" class="headerlink" title="Chapter24 Best Practices"></a>Chapter24 Best Practices</h1><ul>
<li>Maintainability</li>
<li>Performance</li>
<li>Deployment </li>
</ul>
<h1 id="Chapter25-Emerging-APIs"><a href="#Chapter25-Emerging-APIs" class="headerlink" title="Chapter25 Emerging APIs"></a>Chapter25 Emerging APIs</h1><h2 id="25-1-requestAnimationFrame"><a href="#25-1-requestAnimationFrame" class="headerlink" title="25.1 requestAnimationFrame()"></a>25.1 requestAnimationFrame()</h2><h3 id="Reason"><a href="#Reason" class="headerlink" title="Reason:"></a>Reason:</h3><ol>
<li>We need to determine the best way to schedule a redraw since each browser has a fixed refresh rate. So Javascript animation can work smoothly.</li>
<li>setInterval() and setTimeout() are inaccurate.</li>
<li>Redrawing too often will consume too much resource.</li>
<li>This technique asks browser to update animation on next repaint.</li>
</ol>
<h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation:"></a>Implementation:</h3><table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>setInterval()</td>
<td>Deprecated because of accuracy</td>
</tr>
<tr>
<td>mozRequestAnimationFrame()</td>
<td>Chrome: webkitRequestanimationFrame(callback, element)<br>IE: msRequestAnimationFrame()</td>
</tr>
</tbody>
</table>
<h2 id="25-2-Page-Visibility-API"><a href="#25-2-Page-Visibility-API" class="headerlink" title="25.2 Page Visibility API"></a>25.2 Page Visibility API</h2><h3 id="Reason-1"><a href="#Reason-1" class="headerlink" title="Reason:"></a>Reason:</h3><ol>
<li>Knowing when users are actually interacting with the page.</li>
</ol>
<h3 id="Implementation-1"><a href="#Implementation-1" class="headerlink" title="Implementation"></a>Implementation</h3><table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>document.hidden</td>
<td>A Boolean value indicating if the page is hidden from view</td>
</tr>
<tr>
<td>document.visibilityState</td>
<td>State indicator</td>
</tr>
<tr>
<td>visibilitychange</td>
<td>Event fires when a document changes from hidden to visible or vice versa.</td>
</tr>
</tbody>
</table>
<h2 id="25-3-Geolocation-API"><a href="#25-3-Geolocation-API" class="headerlink" title="25.3 Geolocation API"></a>25.3 Geolocation API</h2><p>navigator.geolocation has 3 functions:</p>
<ol>
<li>getCurrentPosition(successCallBack, failCallback, options)<ul>
<li>successCallBack: latitude, longitude, accuracy, altitude, altitudeAccuracy, heading, speed</li>
<li>options: enableHighAccuracy, timeout, maximumAge </li>
</ul>
</li>
<li>watchPosition()</li>
<li>clearPosition()</li>
</ol>
<h2 id="25-4-File-API"><a href="#25-4-File-API" class="headerlink" title="25.4 File API"></a>25.4 File API</h2><p><strong>File Attributes</strong></p>
<ul>
<li>name</li>
<li>size</li>
<li>type</li>
<li>lastModifiedData</li>
</ul>
<h3 id="25-4-1-FileReader"><a href="#25-4-1-FileReader" class="headerlink" title="25.4.1 FileReader"></a>25.4.1 FileReader</h3><table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>readAsText(file, encoding)</td>
<td>store as plain text</td>
</tr>
<tr>
<td>readAsDataURL(file)</td>
<td>store as URI</td>
</tr>
<tr>
<td>readAsBinaryString(file)</td>
<td>store as Binary String </td>
</tr>
<tr>
<td>readAsArrayBuffer(file)</td>
<td>store as ArrayBuffer</td>
</tr>
</tbody>
</table>
<p>Asynchronously:</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>progress</td>
<td>lengthComputable, loaded, total</td>
</tr>
<tr>
<td>load</td>
<td></td>
</tr>
<tr>
<td>error</td>
<td>reader.error.code: 1, 2, 3, 4 </td>
</tr>
</tbody>
</table>
<h3 id="25-4-2-Partial-Reads"><a href="#25-4-2-Partial-Reads" class="headerlink" title="25.4.2 Partial Reads"></a>25.4.2 Partial Reads</h3><ul>
<li>Reason: Save time if read only parts of a file instead of the whole file</li>
<li>Implementation: <ul>
<li><code>blob.slice(startByte, length)</code></li>
<li><code>reader.readAsText(blobSliceObj)</code></li>
</ul>
</li>
</ul>
<h3 id="25-4-3-Object-URLs"><a href="#25-4-3-Object-URLs" class="headerlink" title="25.4.3 Object URLs"></a>25.4.3 Object URLs</h3><ul>
<li>Reason: Don’t need to read the file contents into JavaScript in order to use them</li>
<li><p>Implementation:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url = createObjectURL(file)</span><br><span class="line">xx.innerHTML = <span class="string">`&lt;img src="<span class="subst">$&#123;url&#125;</span>"&gt;`</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="25-4-4-Drag-and-Drop-File-Reading"><a href="#25-4-4-Drag-and-Drop-File-Reading" class="headerlink" title="25.4.4 Drag-and-Drop File Reading"></a>25.4.4 Drag-and-Drop File Reading</h3><p>In event handler:</p>
<ol>
<li>Cancel the default behavior of dragenter, dragover, and drop.</li>
<li><code>event.dataTransfer.files</code></li>
</ol>
<h3 id="25-4-5-File-Upload-with-XHR"><a href="#25-4-5-File-Upload-with-XHR" class="headerlink" title="25.4.5 File Upload with XHR"></a>25.4.5 File Upload with XHR</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">in</span> event handler)</span><br><span class="line">data = <span class="keyword">new</span> Formdata();</span><br><span class="line">xhr = <span class="keyword">new</span> XMLHttpRequest(); </span><br><span class="line">...</span><br><span class="line">data.append(<span class="string">'file'</span>, event.dataTransfer.files[<span class="number">0</span>]);</span><br><span class="line">xhr.send(data)</span><br></pre></td></tr></table></figure>
<h2 id="25-5-Web-Timing"><a href="#25-5-Web-Timing" class="headerlink" title="25.5 Web Timing"></a>25.5 Web Timing</h2><p>Reason: value page performance</p>
<h2 id="25-6-Web-Workers"><a href="#25-6-Web-Workers" class="headerlink" title="25.6 Web Workers"></a>25.6 Web Workers</h2><p>Reason: allow uds to run asynchronous JavaScript that will not block the user interface</p>
<h4 id="Implementation-2"><a href="#Implementation-2" class="headerlink" title="Implementation:"></a>Implementation:</h4><ul>
<li><p>Page:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> worker = <span class="keyword">new</span> Worker(<span class="string">"xx.js"</span>);</span><br><span class="line">woder.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data = event.data;  <span class="comment">// Formatted return data</span></span><br><span class="line">&#125;</span><br><span class="line">worker.postmessage(data);</span><br></pre></td></tr></table></figure>
</li>
<li><p>xx.js(worker):</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">self.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data = event.data;</span><br><span class="line">    data.sort();</span><br><span class="line">    self.postMessage(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Other functions:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>worker.terminate()</td>
<td>stop worker in page</td>
</tr>
<tr>
<td>self.close()</td>
<td>stop working in xx.js</td>
</tr>
<tr>
<td>importScripts()</td>
<td>import script in xx.js</td>
</tr>
</tbody>
</table>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/19/Flask-3-Context-Management/" rel="next" title="Flask<3>--Context-Management">
                <i class="fa fa-chevron-left"></i> Flask<3>--Context-Management
              </3></a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/10/09/Understanding-ES6-Learning-Note/" rel="prev" title="Understanding ES6 Learning Note">
                Understanding ES6 Learning Note <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpeg" alt="呆阿呆阿呆">
            
              <p class="site-author-name" itemprop="name">呆阿呆阿呆</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter2-JavaScript-in-HTML"><span class="nav-text">Chapter2 JavaScript in HTML</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-The-lt-script-gt-Element"><span class="nav-text">2.1 The &lt;script&gt; Element</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-Inline-Code-Versus-External-Files"><span class="nav-text">2.2 Inline Code Versus External Files</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-Document-Mode"><span class="nav-text">2.3 Document Mode</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-The-lt-noscript-gt-Element"><span class="nav-text">2.4 The &lt;noscript&gt; Element</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter3-Language-Basics"><span class="nav-text">Chapter3 Language Basics</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-Syntax"><span class="nav-text">3.1 Syntax</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-Keywords-And-Reserved-Words"><span class="nav-text">3.2 Keywords And Reserved Words</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-Variables"><span class="nav-text">3.3 Variables</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-Data-Types"><span class="nav-text">3.4 Data Types</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-1-The-typeof-Operator"><span class="nav-text">3.4.1 The typeof Operator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-2-The-Undefined-Type"><span class="nav-text">3.4.2 The Undefined Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-3-The-Null-Type"><span class="nav-text">3.4.3 The Null Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-4-The-Boolean-Type"><span class="nav-text">3.4.4 The Boolean Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-5-The-Number-Type"><span class="nav-text">3.4.5 The Number Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-6-The-String-Type"><span class="nav-text">3.4.6 The String Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-7-The-Object-Type"><span class="nav-text">3.4.7 The Object Type</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-Operators"><span class="nav-text">3.5 Operators</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-Statement"><span class="nav-text">3.6 Statement</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7-Functions"><span class="nav-text">3.7 Functions</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter4-Variables-Scope-and-Memory"><span class="nav-text">Chapter4 Variables, Scope, and Memory</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-Primitive-And-Reference-Values"><span class="nav-text">4.1 Primitive And Reference Values</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-Execution-Context-And-Scope"><span class="nav-text">4.2 Execution Context And Scope</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-1-Scope-Chain-Augmentation"><span class="nav-text">4.2.1 Scope Chain Augmentation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-2-No-Block-Level-Scopes"><span class="nav-text">4.2.2 No Block-Level Scopes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-Garbage-Collection"><span class="nav-text">4.3 Garbage Collection</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-1-mark-and-sweep"><span class="nav-text">4.3.1 mark-and-sweep:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-2-reference-counting"><span class="nav-text">4.3.2 reference counting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-3-Performance"><span class="nav-text">4.3.3 Performance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-4-Managing-Memory"><span class="nav-text">4.3.4 Managing Memory</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter5-Reference-Types"><span class="nav-text">Chapter5 Reference Types</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-The-Object-Type"><span class="nav-text">5.1 The Object Type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-The-Array-Type"><span class="nav-text">5.2 The Array Type</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-1-Detecting-Arrays"><span class="nav-text">5.2.1 Detecting Arrays</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-2-Conversion-Methods"><span class="nav-text">5.2.2 Conversion Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-3-5-2-7"><span class="nav-text">5.2.3-5.2.7</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-THE-DATE-TYPE"><span class="nav-text">5.3 THE DATE TYPE</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-THE-REGEXP-TYPE"><span class="nav-text">5.4 THE REGEXP TYPE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-1-RegExp-Instance-Properties"><span class="nav-text">5.4.1 RegExp Instance Properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-2-RegExp-Instance-Methods"><span class="nav-text">5.4.2 RegExp Instance Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-3-RegExp-Constructor-Properties"><span class="nav-text">5.4.3 RegExp Constructor Properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-4-Pattern-Limitations"><span class="nav-text">5.4.4 Pattern Limitations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5-The-Function-Type"><span class="nav-text">5.5 The Function Type</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-1-No-Overloading"><span class="nav-text">5.5.1 No Overloading</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-2-Function-Declarations-versus-Function-Expressions"><span class="nav-text">5.5.2 Function Declarations versus Function Expressions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-3-Functions-as-Values"><span class="nav-text">5.5.3 Functions as Values</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-4-Function-Internals"><span class="nav-text">5.5.4 Function Internals</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-5-Function-Properties-and-Methods"><span class="nav-text">5.5.5 Function Properties and Methods</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6-Primitive-Wrapper-Types"><span class="nav-text">5.6 Primitive Wrapper Types</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-1-The-Boolean-Type"><span class="nav-text">5.6.1 The Boolean Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-2-The-Number-Type"><span class="nav-text">5.6.2 The Number Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-3-The-String-Type"><span class="nav-text">5.6.3 The String Type</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-7-Singleton-Built-In-Objects"><span class="nav-text">5.7 Singleton Built-In Objects</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-7-1-The-Global-Object"><span class="nav-text">5.7.1 The Global Object</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Global-Object-Properties"><span class="nav-text">Global Object Properties</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The-Window-Object"><span class="nav-text">The Window Object</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-7-2-The-Math-Object"><span class="nav-text">5.7.2 The Math Object</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Properties"><span class="nav-text">Properties</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Methods"><span class="nav-text">Methods</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter6-Object-Oriented-Programming"><span class="nav-text">Chapter6 Object-Oriented Programming</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-Understanding-Objects"><span class="nav-text">6.1 Understanding Objects</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-1-Types-of-Properties"><span class="nav-text">6.1.1 Types of Properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-2-Defining-Multiple-Properties"><span class="nav-text">6.1.2 Defining Multiple Properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-3-Reading-Property-Attributes"><span class="nav-text">6.1.3 Reading Property Attributes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-Object-Creation"><span class="nav-text">6.2 Object Creation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-1-The-Factory-Pattern"><span class="nav-text">6.2.1 The Factory Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-2-The-Constructor-Pattern"><span class="nav-text">6.2.2 The Constructor Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-3-The-Prototype-Pattern"><span class="nav-text">6.2.3 The Prototype Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-4-Combination-Constructor-Prototype-Pattern"><span class="nav-text">6.2.4 Combination Constructor/Prototype Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-5-Dynamic-Prototype-Pattern"><span class="nav-text">6.2.5 Dynamic Prototype Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-6-Parasitic-Constructor-Pattern"><span class="nav-text">6.2.6 Parasitic Constructor Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-7-Durable-Constructor-Pattern"><span class="nav-text">6.2.7 Durable Constructor Pattern</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-Inheritance"><span class="nav-text">6.3 Inheritance</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-1-Prototype-Chaining-hardly-use"><span class="nav-text">6.3.1 Prototype Chaining (hardly use)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-2-Constructor-Stealing"><span class="nav-text">6.3.2 Constructor Stealing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-3-Combination-Inheritance"><span class="nav-text">6.3.3 Combination Inheritance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-4-Prototypal-Inheritance"><span class="nav-text">6.3.4 Prototypal Inheritance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-5-Parasitic-寄生式-Inheritance"><span class="nav-text">6.3.5 Parasitic(寄生式) Inheritance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-6-Parasitic-Combination-寄生组合式）Inheritance"><span class="nav-text">6.3.6 Parasitic Combination(寄生组合式）Inheritance</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter7-Function-Expressions"><span class="nav-text">Chapter7 Function Expressions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-Recursion"><span class="nav-text">7.1 Recursion</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-Closure"><span class="nav-text">7.2 Closure</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-1-Closures-and-Variables"><span class="nav-text">7.2.1 Closures and Variables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-2-The-this-Object"><span class="nav-text">7.2.2 The this Object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-3-Memory-Leaks"><span class="nav-text">7.2.3 Memory Leaks</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-MIMICKING-BLOCK-SCOPE"><span class="nav-text">7.3 MIMICKING BLOCK SCOPE</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4-PRIVATE-VARIABLES"><span class="nav-text">7.4 PRIVATE VARIABLES</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-1-Static-Private-Variables"><span class="nav-text">7.4.1 Static Private Variables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-2-The-Module-Pattern"><span class="nav-text">7.4.2 The Module Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-3-The-Module-Augmentation-Pattern"><span class="nav-text">7.4.3 The Module-Augmentation Pattern</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter8-BOM-Browser-Object-Model"><span class="nav-text">Chapter8 BOM(Browser Object Model)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-THE-WINDOW-OBJECT"><span class="nav-text">8.1 THE WINDOW OBJECT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-1-The-Global-Scope"><span class="nav-text">8.1.1 The Global Scope</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-2-8-1-7-Window-Relationships-and-Frames"><span class="nav-text">8.1.2-8.1.7 Window Relationships and Frames</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-THE-LOCATION-OBJECT"><span class="nav-text">8.2 THE LOCATION OBJECT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Location-Attributes"><span class="nav-text">Location Attributes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Manipulating-the-Location"><span class="nav-text">Manipulating the Location</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-3-THE-NAVIGATOR-OBJECT"><span class="nav-text">8.3 THE NAVIGATOR OBJECT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-4-THE-SCREEN-OBJECT"><span class="nav-text">8.4 THE SCREEN OBJECT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-5-THE-HISTORY-OBJECT"><span class="nav-text">8.5 THE HISTORY OBJECT</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chpater9-Client-Detection"><span class="nav-text">Chpater9 Client Detection</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1-Capability-detection"><span class="nav-text">9.1 Capability detection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3-Quirks-detection"><span class="nav-text">9.3 Quirks detection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3-User-agent-detection"><span class="nav-text">9.3 User-agent detection</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter10-DOM-Document-Object-Model"><span class="nav-text">Chapter10 DOM(Document Object Model)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#10-1-HIERARCHY-OF-NODES"><span class="nav-text">10.1 HIERARCHY OF NODES</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-1-The-Node-Type"><span class="nav-text">10.1.1 The Node Type</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#nodeName-and-nodeValue"><span class="nav-text">nodeName and nodeValue</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-2-The-Document-Type"><span class="nav-text">10.1.2 The Document Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-3-The-Element-Type"><span class="nav-text">10.1.3 The Element Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-4-The-Text-Type"><span class="nav-text">10.1.4 The Text Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-5-The-Comment-Type"><span class="nav-text">10.1.5 The Comment Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-6-The-CDATASection-Type"><span class="nav-text">10.1.6 The CDATASection Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-7-The-DocumentType-Type"><span class="nav-text">10.1.7 The DocumentType Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-8-The-DocumentFragment-Type"><span class="nav-text">10.1.8 The DocumentFragment Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-9-The-Attr-Type"><span class="nav-text">10.1.9 The Attr Type</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-2-WORKING-WITH-THE-DOM"><span class="nav-text">10.2 WORKING WITH THE DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2-1-Dynamic-Scripts"><span class="nav-text">10.2.1 Dynamic Scripts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2-2-Dynamic-Styles"><span class="nav-text">10.2.2 Dynamic Styles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2-3-Manipulating-Tables"><span class="nav-text">10.2.3 Manipulating Tables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2-4-Using-NodeLists"><span class="nav-text">10.2.4 Using NodeLists</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter11-DOM-Extensions"><span class="nav-text">Chapter11 DOM Extensions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#11-1-SELECTORS-API"><span class="nav-text">11.1 SELECTORS API</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-2-ELEMENT-TRAVERSAL"><span class="nav-text">11.2 ELEMENT TRAVERSAL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-3-HTML-5"><span class="nav-text">11.3 HTML 5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-4-PROPRIETARY-EXTENSIONS"><span class="nav-text">11.4 PROPRIETARY EXTENSIONS</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter12-DOM-Levels-2-and-3"><span class="nav-text">Chapter12 DOM Levels 2 and 3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1-DOM-CHANGES"><span class="nav-text">12.1 DOM CHANGES</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#12-1-1-XML-Namespaces"><span class="nav-text">12.1.1 XML Namespaces</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-1-2-Other-Changes"><span class="nav-text">12.1.2 Other Changes</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Changes-to-DocumentType"><span class="nav-text">Changes to DocumentType</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Changes-to-Document"><span class="nav-text">Changes to Document</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Changes-to-Node"><span class="nav-text">Changes to Node</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Changes-to-Frames"><span class="nav-text">Changes to Frames</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-2-STYLES"><span class="nav-text">12.2 STYLES</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#12-2-1-Accessing-Element-Styles"><span class="nav-text">12.2.1 Accessing Element Styles</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Some-attributes-methods"><span class="nav-text">Some attributes/methods</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-2-2-Working-with-Style-Sheets"><span class="nav-text">12.2.2 Working with Style Sheets</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CSS-Style-Sheets"><span class="nav-text">CSS Style Sheets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CSS-Rules"><span class="nav-text">CSS Rules</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-2-3-Element-Dimensions"><span class="nav-text">12.2.3 Element Dimensions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-3-TRAVERSALS"><span class="nav-text">12.3 TRAVERSALS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#12-3-1-NodeIterator"><span class="nav-text">12.3.1 NodeIterator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-3-2-TreeWalker"><span class="nav-text">12.3.2 TreeWalker</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-4-RANGES"><span class="nav-text">12.4 RANGES</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#12-4-1-Ranges-in-the-DOM"><span class="nav-text">12.4.1 Ranges in the DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Simple-Selection"><span class="nav-text">Simple Selection</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Complex-Selection"><span class="nav-text">Complex Selection</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Interacting-with-DOM-Range-Content"><span class="nav-text">Interacting with DOM Range Content</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-4-2-Ranges-in-Internet-Explorer-8-and-Earlier"><span class="nav-text">12.4.2 Ranges in Internet Explorer 8 and Earlier</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter13-Events"><span class="nav-text">Chapter13 Events</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-1-Events-Flow"><span class="nav-text">13.1 Events Flow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-2-EVENT-HANDLERS"><span class="nav-text">13.2 EVENT HANDLERS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-1-HTML-Event-Handlers"><span class="nav-text">13.2.1 HTML Event Handlers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-2-DOM-Level-0-Event-Handlers"><span class="nav-text">13.2.2 DOM Level 0 Event Handlers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-3-DOM-Level-2-Event-Handlers"><span class="nav-text">13.2.3 DOM Level 2 Event Handlers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-4-Internet-Explorer-Event-Handlers"><span class="nav-text">13.2.4 Internet Explorer Event Handlers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-5-Cross-Browser-Event-Handlers"><span class="nav-text">13.2.5 Cross-Browser Event Handlers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-3-THE-EVENT-OBJECT"><span class="nav-text">13.3 THE EVENT OBJECT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-1-The-DOM-Event-Object"><span class="nav-text">13.3.1 The DOM Event Object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-2-The-Internet-Explorer-Event-Object"><span class="nav-text">13.3.2 The Internet Explorer Event Object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-3-The-Cross-Browser-Event-Object"><span class="nav-text">13.3.3 The Cross-Browser Event Object</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-4-EVENT-TYPES"><span class="nav-text">13.4 EVENT TYPES</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-5-MEMORY-AND-PERFORMANCE"><span class="nav-text">13.5 MEMORY AND PERFORMANCE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-5-1-Event-Delegation"><span class="nav-text">13.5.1 Event Delegation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-5-2-Removing-Event-Handlers"><span class="nav-text">13.5.2 Removing Event Handlers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-6-SIMULATING-EVENTS"><span class="nav-text">13.6 SIMULATING EVENTS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-6-1-DOM-Event-Simulation"><span class="nav-text">13.6.1 DOM Event Simulation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-6-2-Internet-Explorer-Event-Simulation"><span class="nav-text">13.6.2 Internet Explorer Event Simulation</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter14-Scripting-Forms"><span class="nav-text">Chapter14 Scripting Forms</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#14-1-Form-Basics"><span class="nav-text">14.1 Form Basics</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-1-Submitting-Forms"><span class="nav-text">14.1.1 Submitting Forms</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-2-Submitting-Forms"><span class="nav-text">14.1.2 Submitting Forms</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-3-Form-Fields"><span class="nav-text">14.1.3 Form Fields</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Common-Form-Field-Properties"><span class="nav-text">Common Form-Field Properties</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Common-Form-Field-Methods"><span class="nav-text">Common Form-Field Methods</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Common-Form-Field-Events"><span class="nav-text">Common Form-Field Events</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-2-SCRIPTING-TEXT-BOXES"><span class="nav-text">14.2 SCRIPTING TEXT BOXES</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-3-SCRIPTING-SELECT-BOXES"><span class="nav-text">14.3 SCRIPTING SELECT BOXES</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-4-FORM-SERIALIZATION"><span class="nav-text">14.4 FORM SERIALIZATION</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-5-RICH-TEXT-EDITING"><span class="nav-text">14.5 RICH TEXT EDITING</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter15-Graphics-with-Canvas"><span class="nav-text">Chapter15 Graphics with Canvas</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter-16-HTML5-Scripting"><span class="nav-text">Chapter 16 HTML5 Scripting</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#16-1-CROSS-DOCUMENT-MESSAGING-XDM"><span class="nav-text">16.1 CROSS-DOCUMENT MESSAGING (XDM)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-2-NATIVE-DRAG-AND-DROP"><span class="nav-text">16.2 NATIVE DRAG AND DROP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-3-MEDIA-ELEMENTS"><span class="nav-text">16.3 MEDIA ELEMENTS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-4-HISTORY-STATE-MANAGEMENT"><span class="nav-text">16.4 HISTORY STATE MANAGEMENT</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter17-Error-Handling-and-Debugging"><span class="nav-text">Chapter17 Error Handling and Debugging</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#17-1-BROWSER-ERROR-REPORTING"><span class="nav-text">17.1 BROWSER ERROR REPORTING</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-2-ERROR-HANDLING"><span class="nav-text">17.2 ERROR HANDLING</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-1-try-catch-finally"><span class="nav-text">17.2.1 try-catch-finally</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-2-Throwing-Errors"><span class="nav-text">17.2.2 Throwing Errors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-3-The-error-Event"><span class="nav-text">17.2.3 The error Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-4-Error-Handling-Strategies"><span class="nav-text">17.2.4 Error-Handling Strategies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-5-Identify-Where-Errors-Might-Occur"><span class="nav-text">17.2.5 Identify Where Errors Might Occur</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-6-Distinguishing-between-Fatal-and-Nonfatal-Errors"><span class="nav-text">17.2.6 Distinguishing between Fatal and Nonfatal Errors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-7-Log-Errors-to-the-Server"><span class="nav-text">17.2.7 Log Errors to the Server</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-3-DEBUGGING-TECHNIQUES"><span class="nav-text">17.3 DEBUGGING TECHNIQUES</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#17-3-1-Logging-Messages-to-a-Console"><span class="nav-text">17.3.1 Logging Messages to a Console</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-3-2-Logging-Messages-to-the-Page"><span class="nav-text">17.3.2 Logging Messages to the Page</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-3-3-Throwing-Errors"><span class="nav-text">17.3.3 Throwing Errors</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-4-COMMON-INTERNET-EXPLORER-ERRORS"><span class="nav-text">17.4 COMMON INTERNET EXPLORER ERRORS</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter18-XML-in-JavaScript"><span class="nav-text">Chapter18 XML in JavaScript</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter19-ECMAScript-for-XML"><span class="nav-text">Chapter19 ECMAScript for XML</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter20-JSON"><span class="nav-text">Chapter20 JSON</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#20-1-SYNTAX"><span class="nav-text">20.1 SYNTAX</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-2-PARSING-AND-SERIALIZATION"><span class="nav-text">20.2 PARSING AND SERIALIZATION</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#20-2-1-The-JSON-Object"><span class="nav-text">20.2.1 The JSON Object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-2-2-Serialization-Options"><span class="nav-text">20.2.2 Serialization Options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-2-3-Parsing-Options"><span class="nav-text">20.2.3 Parsing Options</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter21-Ajax-and-Comet"><span class="nav-text">Chapter21 Ajax and Comet</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#21-1-THE-XMLHttpRequest-OBJECT"><span class="nav-text">21.1 THE XMLHttpRequest OBJECT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#21-1-2-XHR-Usage"><span class="nav-text">21.1.2 XHR Usage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-1-3-HTTP-Headers"><span class="nav-text">21.1.3 HTTP Headers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-1-4-GET-Requests"><span class="nav-text">21.1.4 GET Requests</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-1-5-POST-Requests"><span class="nav-text">21.1.5 POST Requests</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-2-XMLHttpRequest-LEVEL-2"><span class="nav-text">21.2 XMLHttpRequest LEVEL 2</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#21-2-1-FormData"><span class="nav-text">21.2.1 FormData</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-2-2-Timeouts"><span class="nav-text">21.2.2 Timeouts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-2-3-overrideMimeType"><span class="nav-text">21.2.3 overrideMimeType()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-3-PROGRESS-EVENTS"><span class="nav-text">21.3 PROGRESS EVENTS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-4-CROSS-ORIGIN-RESOURCE-SHARING"><span class="nav-text">21.4 CROSS-ORIGIN RESOURCE SHARING</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-5-ALTERNATE-CROSS-DOMAIN-TECHNIQUES"><span class="nav-text">21.5 ALTERNATE CROSS-DOMAIN TECHNIQUES</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#21-5-6-SSE-versus-Web-Sockets"><span class="nav-text">21.5.6 SSE versus Web Sockets</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-6-SECURITY"><span class="nav-text">21.6 SECURITY</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter22-Advanced-Techniques"><span class="nav-text">Chapter22 Advanced Techniques</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#22-1-ADVANCED-FUNCTIONS"><span class="nav-text">22.1 ADVANCED FUNCTIONS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#22-1-1-Safe-Type-Detection"><span class="nav-text">22.1.1 Safe Type Detection</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Issue"><span class="nav-text">Issue:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution"><span class="nav-text">Solution:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-1-2-Scope-Safe-Constructors"><span class="nav-text">22.1.2 Scope-Safe Constructors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-1-3-Lazy-Loading-Functions"><span class="nav-text">22.1.3 Lazy Loading Functions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-1-4-Function-Binding"><span class="nav-text">22.1.4 Function Binding</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-1-5-Function-Currying"><span class="nav-text">22.1.5 Function Currying</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-2-TAMPER-PROOF-OBJECTS"><span class="nav-text">22.2 TAMPER-PROOF OBJECTS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-3-ADVANCED-TIMERS"><span class="nav-text">22.3 ADVANCED TIMERS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#22-3-1-setTimeout-and-setInterval"><span class="nav-text">22.3.1 setTimeout and setInterval</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution-1"><span class="nav-text">Solution:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-3-2-Yielding-Process"><span class="nav-text">22.3.2 Yielding Process</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Issue-1"><span class="nav-text">Issue:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution-2"><span class="nav-text">Solution:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-3-3-Function-Throttling"><span class="nav-text">22.3.3 Function Throttling</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Issue-2"><span class="nav-text">Issue:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution-3"><span class="nav-text">Solution:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-4-CUSTOM-EVENTS"><span class="nav-text">22.4 CUSTOM EVENTS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-5-DRAG-AND-DROP"><span class="nav-text">22.5 DRAG AND DROP</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter23-Offline-Applications-and-Client-Side-Storage"><span class="nav-text">Chapter23 Offline Applications and Client-Side Storage</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#23-1-OFFLINE-DETECTION"><span class="nav-text">23.1 OFFLINE DETECTION</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-2-APPLICATION-CACHE"><span class="nav-text">23.2 APPLICATION CACHE</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-3-DATA-STORAGE"><span class="nav-text">23.3 DATA STORAGE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#23-3-1-Cookie"><span class="nav-text">23.3.1 Cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-3-2-Internet-Explorer-User-Data"><span class="nav-text">23.3.2 Internet Explorer User Data</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-3-3-The-Storage-Type"><span class="nav-text">23.3.3 The Storage Type</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sessionStorage"><span class="nav-text">sessionStorage</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#localStorage"><span class="nav-text">localStorage</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-3-4-IndexedDB"><span class="nav-text">23.3.4 IndexedDB</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter24-Best-Practices"><span class="nav-text">Chapter24 Best Practices</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter25-Emerging-APIs"><span class="nav-text">Chapter25 Emerging APIs</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#25-1-requestAnimationFrame"><span class="nav-text">25.1 requestAnimationFrame()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Reason"><span class="nav-text">Reason:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementation"><span class="nav-text">Implementation:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-2-Page-Visibility-API"><span class="nav-text">25.2 Page Visibility API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Reason-1"><span class="nav-text">Reason:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementation-1"><span class="nav-text">Implementation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-3-Geolocation-API"><span class="nav-text">25.3 Geolocation API</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-4-File-API"><span class="nav-text">25.4 File API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#25-4-1-FileReader"><span class="nav-text">25.4.1 FileReader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-4-2-Partial-Reads"><span class="nav-text">25.4.2 Partial Reads</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-4-3-Object-URLs"><span class="nav-text">25.4.3 Object URLs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-4-4-Drag-and-Drop-File-Reading"><span class="nav-text">25.4.4 Drag-and-Drop File Reading</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-4-5-File-Upload-with-XHR"><span class="nav-text">25.4.5 File Upload with XHR</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-5-Web-Timing"><span class="nav-text">25.5 Web Timing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-6-Web-Workers"><span class="nav-text">25.6 Web Workers</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Implementation-2"><span class="nav-text">Implementation:</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">呆阿呆阿呆</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.7.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.7.0"></script>



  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  


  


  





  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
