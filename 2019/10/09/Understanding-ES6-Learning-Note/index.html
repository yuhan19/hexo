<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Chapter1 Block Bindings1.1 Var Declarations and HoistingHoisting for var  If in function: as if they are at the top of the function  If outside of function: at the top of global scope  Not at the top">
<meta property="og:type" content="article">
<meta property="og:title" content="Understanding ES6 Learning Note">
<meta property="og:url" content="http://yoursite.com/2019/10/09/Understanding-ES6-Learning-Note/index.html">
<meta property="og:site_name" content="呆呆窝">
<meta property="og:description" content="Chapter1 Block Bindings1.1 Var Declarations and HoistingHoisting for var  If in function: as if they are at the top of the function  If outside of function: at the top of global scope  Not at the top">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-10-10T00:37:31.226Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Understanding ES6 Learning Note">
<meta name="twitter:description" content="Chapter1 Block Bindings1.1 Var Declarations and HoistingHoisting for var  If in function: as if they are at the top of the function  If outside of function: at the top of global scope  Not at the top">






  <link rel="canonical" href="http://yoursite.com/2019/10/09/Understanding-ES6-Learning-Note/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Understanding ES6 Learning Note | 呆呆窝</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">呆呆窝</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/09/Understanding-ES6-Learning-Note/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="呆阿呆阿呆">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="呆呆窝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Understanding ES6 Learning Note

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-10-09 16:58:04 / Modified: 18:37:31" itemprop="dateCreated datePublished" datetime="2019-10-09T16:58:04-06:00">2019-10-09</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Chapter1-Block-Bindings"><a href="#Chapter1-Block-Bindings" class="headerlink" title="Chapter1 Block Bindings"></a>Chapter1 Block Bindings</h1><h2 id="1-1-Var-Declarations-and-Hoisting"><a href="#1-1-Var-Declarations-and-Hoisting" class="headerlink" title="1.1 Var Declarations and Hoisting"></a>1.1 Var Declarations and Hoisting</h2><p>Hoisting for <code>var</code></p>
<ul>
<li>If in function: as if they are at the top of the function </li>
<li>If outside of function: at the top of global scope </li>
<li><strong>Not at the top of block</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alertValue</span>(<span class="params">condition</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        <span class="keyword">var</span> value = <span class="string">"blue"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(value);   <span class="comment">// undefined instead of error</span></span><br><span class="line">    &#125;</span><br><span class="line">    alert(value)        <span class="comment">// undefined instead of error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-Block-Level-Declarations"><a href="#1-2-Block-Level-Declarations" class="headerlink" title="1.2 Block-Level Declarations"></a>1.2 Block-Level Declarations</h2><ul>
<li>Block scope is created by:<ul>
<li>Inside a function</li>
<li>Inside of a block (indicated by <code>{</code> and <code>}</code></li>
</ul>
</li>
<li>let (like other language)<ul>
<li>In same scope<ul>
<li>no redeclaration</li>
<li>can revalue</li>
</ul>
</li>
<li>In different scope<ul>
<li>cover</li>
</ul>
</li>
</ul>
</li>
<li><p>const</p>
<ul>
<li>similar as <code>let</code></li>
<li><p>except: cannot re-reference, while update object is fine</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">"Nicholas"</span>&#125;;</span><br><span class="line">person.name = <span class="string">"Greg"</span>;               <span class="comment">// works</span></span><br><span class="line">person = &#123; <span class="attr">name</span>: <span class="string">"Nicholas"</span> &#125;;      <span class="comment">// error</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>The Temporal Dead Zone</p>
<ul>
<li>var: hoist</li>
<li><p>let/const (in same scope)</p>
<ol>
<li>Places the declaration in the TDZ</li>
<li>Any attempt to access a variable in the TDZ results in a runtime error</li>
<li>That variable is only removed from the TDZ, and therefore safe to use, once execution flows to the variable declaration</li>
<li><p>This even affect <code>typeof</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> value);      <span class="comment">// "undefined"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> value);  <span class="comment">// reference error</span></span><br><span class="line">    <span class="keyword">let</span> value = <span class="string">"blue"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="1-3-Block-Binding-in-Loops"><a href="#1-3-Block-Binding-in-Loops" class="headerlink" title="1.3 Block Binding in Loops"></a>1.3 Block Binding in Loops</h2><ul>
<li><p>declaration in loop</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i);     <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(j)      <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>const</code> in <code>for-in</code> and <code>for-of</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;&#125;       <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i <span class="keyword">in</span> obj) &#123;&#125;                 <span class="comment">// fine</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>function in loop</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    funcs.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(i); &#125;);</span><br><span class="line">&#125;</span><br><span class="line">funcs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">    func();     <span class="comment">// outputs the number "10" ten times</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    funcs.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(i); &#125;);</span><br><span class="line">&#125;</span><br><span class="line">funcs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">    func();     <span class="comment">// expect output</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="1-4-Global-Block-Bindings"><a href="#1-4-Global-Block-Bindings" class="headerlink" title="1.4 Global Block Bindings"></a>1.4 Global Block Bindings</h2><ul>
<li><code>var</code> overwrites window attribute</li>
<li><code>let</code>/<code>const</code> declare a new one in scope</li>
</ul>
<p>Question: in global, what’s the difference between </p>
<ul>
<li><code>var a = 123</code> and</li>
<li><code>b = 123</code></li>
</ul>
<h2 id="1-5-Emerging-Best-Practices-for-Block-Bindings"><a href="#1-5-Emerging-Best-Practices-for-Block-Bindings" class="headerlink" title="1.5 Emerging Best Practices for Block Bindings"></a>1.5 Emerging Best Practices for Block Bindings</h2><ul>
<li>default using <code>const</code> if we can</li>
<li>then use <code>let</code> if it might change</li>
</ul>
<h1 id="Chapter2-Strings-and-Regular-Expressions"><a href="#Chapter2-Strings-and-Regular-Expressions" class="headerlink" title="Chapter2 Strings and Regular Expressions"></a>Chapter2 Strings and Regular Expressions</h1><h2 id="2-1-Better-Unicode-Support"><a href="#2-1-Better-Unicode-Support" class="headerlink" title="2.1 Better Unicode Support"></a>2.1 Better Unicode Support</h2><p>Skip</p>
<h2 id="2-2-Other-String-Changes"><a href="#2-2-Other-String-Changes" class="headerlink" title="2.2 Other String Changes"></a>2.2 Other String Changes</h2><ul>
<li>Identifying Substrings<ul>
<li>includes()</li>
<li>startsWith()</li>
<li>endsWith()</li>
<li>repeat()</li>
</ul>
</li>
</ul>
<h2 id="2-3-Other-Regular-Expression-Changes"><a href="#2-3-Other-Regular-Expression-Changes" class="headerlink" title="2.3 Other Regular Expression Changes"></a>2.3 Other Regular Expression Changes</h2><ul>
<li>y Flag: sticky property<ul>
<li>it tells the search to start matching characters in a string at the position specified by the regular expression’s lastIndex property.</li>
<li>lastIndex: <code>pattern.lastIndex</code></li>
<li>sticky: <code>pattern.sticky</code></li>
</ul>
</li>
<li>Duplicating RE: <code>let re = new RegExp(re1, &quot;g&quot;);</code></li>
<li><p><code>flags</code> property</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> re = <span class="regexp">/ab/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(re.source);</span><br><span class="line"><span class="built_in">console</span>.log(re.flags);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="2-4-Template-Literals"><a href="#2-4-Template-Literals" class="headerlink" title="2.4 Template Literals"></a>2.4 Template Literals</h2><ul>
<li><p>Multiline strings</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> html = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;h1&gt;Title&lt;/h1&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;`</span>.trim()</span><br></pre></td></tr></table></figure>
</li>
<li><p>Basic string formatting</p>
<ul>
<li><p>Substitution    </p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">10</span>,</span><br><span class="line">    price = <span class="number">0.25</span>,</span><br><span class="line">    message = <span class="string">`<span class="subst">$&#123;count&#125;</span> items cost $<span class="subst">$&#123;(count * price).toFixed(<span class="number">2</span>)&#125;</span>.`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(message);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Tagged Templates: advanced substitution</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">passthru</span>(<span class="params">literals, ...substitutions</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// run the loop only for the substitution count</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; substitutions.length; i++) &#123;</span><br><span class="line">        result += literals[i];</span><br><span class="line">        result += substitutions[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// add the last literal</span></span><br><span class="line">    result += literals[literals.length - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">10</span>,</span><br><span class="line">    price = <span class="number">0.25</span>,</span><br><span class="line">    message = passthru<span class="string">`<span class="subst">$&#123;count&#125;</span> items cost $<span class="subst">$&#123;(count * price).toFixed(<span class="number">2</span>)&#125;</span>.`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(message);       <span class="comment">// "10 items cost $2.50."</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>HTML escaping</p>
<ul>
<li><p><code>String.raw</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message1 = <span class="string">`Multiline\nstring`</span>,</span><br><span class="line">    message2 = <span class="built_in">String</span>.raw<span class="string">`Multiline\nstring`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(message1);          <span class="comment">// "Multiline</span></span><br><span class="line">                                <span class="comment">//  string"</span></span><br><span class="line"><span class="built_in">console</span>.log(message2);          <span class="comment">// "Multiline\nstring"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h1 id="Chapter3-Functions"><a href="#Chapter3-Functions" class="headerlink" title="Chapter3 Functions"></a>Chapter3 Functions</h1><h2 id="3-1-Functions-with-Default-Parameter-Values"><a href="#3-1-Functions-with-Default-Parameter-Values" class="headerlink" title="3.1 Functions with Default Parameter Values"></a>3.1 Functions with Default Parameter Values</h2><ul>
<li>example: <code>function makeRequest(url, timeout = 2000, callback){}</code></li>
<li>The arguments object will not reflect changes to the named parameters.</li>
<li>Default Parameter Expressions<ul>
<li><code>function add(first, second = getValue()) { return first + second;}</code></li>
<li><code>function add(first, second = first)</code></li>
<li>Default Parameter Value Temporal Dead Zone<ol>
<li>When executing add(), first, second are added into TDZ</li>
<li>Initialize first then second one by one</li>
<li>if <code>add(first=second, second)</code> will raise exception</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="3-2-Working-with-Unnamed-Parameters"><a href="#3-2-Working-with-Unnamed-Parameters" class="headerlink" title="3.2 Working with Unnamed Parameters"></a>3.2 Working with Unnamed Parameters</h2><ul>
<li><code>function pick(object, ...keys){}</code></li>
</ul>
<h2 id="3-3-Increased-Capabilities-of-the-Function-Constructor"><a href="#3-3-Increased-Capabilities-of-the-Function-Constructor" class="headerlink" title="3.3 Increased Capabilities of the Function Constructor"></a>3.3 Increased Capabilities of the Function Constructor</h2><ul>
<li><code>let add = new Function(&#39;first&#39;, &#39;second&#39;, &#39;return first+second&#39;)</code></li>
</ul>
<h2 id="3-4-The-Spread-Operator"><a href="#3-4-The-Spread-Operator" class="headerlink" title="3.4 The Spread Operator"></a>3.4 The Spread Operator</h2><ul>
<li><p>example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...values, <span class="number">0</span>));</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-5-ECMAScript-6’s-name-Property"><a href="#3-5-ECMAScript-6’s-name-Property" class="headerlink" title="3.5 ECMAScript 6’s name Property"></a>3.5 ECMAScript 6’s name Property</h2><ul>
<li><p>function’s property</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(doSomething.name);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-6-Clarifying-the-Dual-Purpose-of-Functions"><a href="#3-6-Clarifying-the-Dual-Purpose-of-Functions" class="headerlink" title="3.6 Clarifying the Dual Purpose of Functions"></a>3.6 Clarifying the Dual Purpose of Functions</h2><ul>
<li><p>Two different function</p>
<ul>
<li>call function with <code>new</code><ul>
<li>[[Construct]] method is excuted with <code>this</code> set</li>
</ul>
</li>
<li><p>call function without <code>new</code></p>
<ul>
<li><p>[[Call]] method is executed</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">"Nicholas"</span>);</span><br><span class="line"><span class="keyword">var</span> notAPerson = Person(<span class="string">"Nicholas"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person);        <span class="comment">// "[Object object]"</span></span><br><span class="line"><span class="built_in">console</span>.log(notAPerson);    <span class="comment">// "undefined"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>The new.target MetaProperty: solve above issue</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">new</span>.target !== <span class="string">"undefined"</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name; </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"use new"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-7-Block-Level-Functions"><a href="#3-7-Block-Level-Functions" class="headerlink" title="3.7 Block-Level Functions"></a>3.7 Block-Level Functions</h2><ul>
<li><p>Difference between strict mode or not</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> doSomething);        <span class="comment">// function</span></span><br><span class="line">    <span class="keyword">let</span> doSomething = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> doSomething);        <span class="comment">// throw error in strict mode</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> doSomething);        <span class="comment">// function in nonstrict mode</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-8-Arrow-Functions"><a href="#3-8-Arrow-Functions" class="headerlink" title="3.8 Arrow Functions"></a>3.8 Arrow Functions</h2><ul>
<li>No this, super, arguments, and new.target bindings</li>
<li>Cannot be called with new</li>
<li>No prototype </li>
<li>Can’t change this</li>
<li>No arguments object</li>
<li>No duplicate named parameters</li>
<li><p>example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> name;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;(<span class="string">"Nicholas"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person.getName());      <span class="comment">// "Nicholas"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-9-Tail-Call-Optimization"><a href="#3-9-Tail-Call-Optimization" class="headerlink" title="3.9 Tail Call Optimization"></a>3.9 Tail Call Optimization</h2><ul>
<li>With this optimization, instead of creating a new stack frame for a tail call, the current stack frame is cleared and reused</li>
<li>pre-conditions<ul>
<li>The tail call does not require access to variables in the current stack frame (meaning the function is not a closure)</li>
<li>The function making the tail call has no further work to do after the tail call returns</li>
<li>The result of the tail call is returned as the function value</li>
</ul>
</li>
<li><p>example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// before</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// not optimized - must multiply after returning</span></span><br><span class="line">        <span class="keyword">return</span> n * factorial(n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// after</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n, p = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> * p;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> result = n * p;</span><br><span class="line">        <span class="comment">// optimized</span></span><br><span class="line">        <span class="keyword">return</span> factorial(n - <span class="number">1</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Chapter4-Expanded-Object-Functionality"><a href="#Chapter4-Expanded-Object-Functionality" class="headerlink" title="Chapter4 Expanded Object Functionality"></a>Chapter4 Expanded Object Functionality</h1><h2 id="4-1-Object-Categories"><a href="#4-1-Object-Categories" class="headerlink" title="4.1 Object Categories"></a>4.1 Object Categories</h2><table>
<thead>
<tr>
<th>Name</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ordinary objects</td>
<td>Have all the default internal behaviors for objects in JavaScript.</td>
</tr>
<tr>
<td>Exotic objects</td>
<td>Have internal behavior that differs from the default in some way.</td>
</tr>
<tr>
<td>Standard objects</td>
<td>Are those defined by ECMAScript 6, such as Array, Date, and so on. Standard objects may be ordinary or exotic.</td>
</tr>
<tr>
<td>Built-in objects</td>
<td>Are present in a JavaScript execution environment when a script begins to execute. All standard objects are built-in objects.</td>
</tr>
</tbody>
</table>
<h2 id="4-2-Object-Literal-Syntax-Extensions"><a href="#4-2-Object-Literal-Syntax-Extensions" class="headerlink" title="4.2 Object Literal Syntax Extensions"></a>4.2 Object Literal Syntax Extensions</h2><ul>
<li><p>Property Initializer Shorthand</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">name</span>: name, <span class="attr">age</span>: age&#125;; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> &#123;name, age&#125;; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>Concise Methods</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    sayName() &#123; <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>Computed Property Names</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// syntax error in ES5</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="string">"first name"</span>: <span class="string">"Nicholas"</span></span><br><span class="line">&#125;;</span><br><span class="line">person[<span class="string">"first name"</span>] = <span class="string">"John"</span>;</span><br><span class="line">person[<span class="string">"first"</span> + suffix] = <span class="string">"Nicholas"</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4-3-New-Methods"><a href="#4-3-New-Methods" class="headerlink" title="4.3 New Methods"></a>4.3 New Methods</h2><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Object.is()</td>
<td>Similar as ===, but better for (+0, -0) and (NaN, NaN)</td>
</tr>
<tr>
<td>Object.assign()</td>
<td>one object receives properties and methods from another object</td>
</tr>
</tbody>
</table>
<h2 id="4-4-Duplicate-Object-Literal-Properties"><a href="#4-4-Duplicate-Object-Literal-Properties" class="headerlink" title="4.4 Duplicate Object Literal Properties"></a>4.4 Duplicate Object Literal Properties</h2><ul>
<li><p>No error even in strict mode</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">"Nicholas"</span>,</span><br><span class="line">    name: <span class="string">"Greg"</span>        <span class="comment">// no error in ES6 strict mode</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.name);       <span class="comment">// "Greg"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4-5-Own-Property-Enumeration-Order"><a href="#4-5-Own-Property-Enumeration-Order" class="headerlink" title="4.5 Own Property Enumeration Order"></a>4.5 Own Property Enumeration Order</h2><ul>
<li>This affects how properties are returned using <ul>
<li>Object.getOwnPropertyNames() </li>
<li>Reflect.ownKeys (Chapter 12)</li>
<li>Object.assign()</li>
</ul>
</li>
<li>Rule<ol>
<li>All numeric keys in ascending order</li>
<li>All string keys in the order in which they were added to the object</li>
<li>All symbol keys (Chapter 6) in the order in which they were added to the object</li>
</ol>
</li>
</ul>
<h2 id="4-6-More-Powerful-Prototypes"><a href="#4-6-More-Powerful-Prototypes" class="headerlink" title="4.6 More Powerful Prototypes"></a>4.6 More Powerful Prototypes</h2><ul>
<li><p>Changing an Object’s Prototype</p>
<ul>
<li><p>No standard way to change an object’s prototype after instantiation in ES5</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">getGreeting() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> dog = &#123;</span><br><span class="line">    getGreeting() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Woof"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// prototype is person</span></span><br><span class="line"><span class="keyword">let</span> friend = <span class="built_in">Object</span>.create(person);</span><br><span class="line"><span class="built_in">console</span>.log(friend.getGreeting());                      <span class="comment">// "Hello"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getPrototypeOf(friend) === person);  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// set prototype to dog</span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(friend, dog);</span><br><span class="line"><span class="built_in">console</span>.log(friend.getGreeting());                      <span class="comment">// "Woof"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getPrototypeOf(friend) === dog);     <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Easy Prototype Access with Super References</p>
<ul>
<li><p>Introduce <code>super</code> keyword</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> friend = &#123;</span><br><span class="line">    getGreeting() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.getPrototypeOf(<span class="keyword">this</span>).getGreeting.call(<span class="keyword">this</span>) + <span class="string">", hi!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// the same as</span></span><br><span class="line"><span class="keyword">let</span> friend = &#123;</span><br><span class="line">    getGreeting() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getGreeting() + <span class="string">", hi!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>Attempting to use super outside of <strong>concise methods</strong> results in a syntax error</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> friend = &#123;</span><br><span class="line">    getGreeting: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// syntax error</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getGreeting() + <span class="string">", hi!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4-7-A-Formal-Method-Definition"><a href="#4-7-A-Formal-Method-Definition" class="headerlink" title="4.7 A Formal Method Definition"></a>4.7 A Formal Method Definition</h2><ul>
<li>ECMAScript 6 formally defines a method as a function</li>
<li>This function has an internal <code>[[HomeObject]]</code> property containing the object to which the method belongs</li>
<li>The <code>[[HomeObject]]</code> for <code>getGreeting()</code> method is <code>person</code>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="comment">// method</span></span><br><span class="line">    getGreeting() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// not a method: because not in an object</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shareGreeting</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hi!"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>Advanced knowledge</strong>: Any reference to <code>super</code> uses the <code>[[HomeObject]]</code> to determine what to do</p>
<ol>
<li>Call <code>Object.getPrototypeOf()</code> on the <code>[[HomeObject]]</code> to retrieve a reference to the prototype. <ul>
<li><code>[[HomeObject]]</code> of <code>friend.getGreeting()</code> is <code>friend</code></li>
</ul>
</li>
<li>the prototype is searched for a function with the same name.<ul>
<li>the prototype of <code>friend</code> is <code>person</code></li>
</ul>
</li>
<li><p>the <code>this</code> binding is set and the method is called.</p>
<ul>
<li>bind <code>this</code> to <code>person</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    getGreeting() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// prototype is person</span></span><br><span class="line"><span class="keyword">let</span> friend = &#123;</span><br><span class="line">    getGreeting() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getGreeting() + <span class="string">", hi!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(friend, person);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(friend.getGreeting());  <span class="comment">// "Hello, hi!"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h1 id="Chapter5-Destructuring-for-Easier-Data-Access"><a href="#Chapter5-Destructuring-for-Easier-Data-Access" class="headerlink" title="Chapter5 Destructuring for Easier Data Access"></a>Chapter5 Destructuring for Easier Data Access</h1><h2 id="5-1-Why-is-Destructuring-Useful"><a href="#5-1-Why-is-Destructuring-Useful" class="headerlink" title="5.1 Why is Destructuring Useful?"></a>5.1 Why is Destructuring Useful?</h2><p>The ECMAScript 6 implementation actually use syntax for object and array literals.</p>
<h2 id="5-2-Object-Destructuring"><a href="#5-2-Object-Destructuring" class="headerlink" title="5.2 Object Destructuring"></a>5.2 Object Destructuring</h2><ul>
<li><p>Destructuring Assignment</p>
<ul>
<li>All destructuring should be initialized when declaring  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; type, name &#125; = node;</span><br><span class="line">(&#123; type, name &#125; = node);    <span class="comment">//change the values of variables</span></span><br><span class="line">outputInfo(&#123; type, name &#125; = node);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Default Values</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; type, name, value = <span class="literal">true</span> &#125; = node;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Assigning to Different Local Variable Names</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">type</span>: localType, <span class="attr">name</span>: localName = <span class="string">"bar"</span> &#125; = node;    <span class="comment">// default value</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(localName);     <span class="comment">// "bar"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>Nested Object Destructuring</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    type: <span class="string">"Identifier"</span>,</span><br><span class="line">    name: <span class="string">"foo"</span>,</span><br><span class="line">    loc: &#123;</span><br><span class="line">        start: &#123;</span><br><span class="line">            line: <span class="number">1</span>,</span><br><span class="line">            column: <span class="number">1</span></span><br><span class="line">        &#125;,</span><br><span class="line">        end: &#123;</span><br><span class="line">            line: <span class="number">1</span>,</span><br><span class="line">            column: <span class="number">4</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// extract node.loc.start</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">loc</span>: &#123; <span class="attr">start</span>: localStart &#125;&#125; = node;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(localStart.line);   <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(localStart.column); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-3-Array-Destructuring"><a href="#5-3-Array-Destructuring" class="headerlink" title="5.3 Array Destructuring"></a>5.3 Array Destructuring</h2><ul>
<li><p>Destructuring Assignment</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [ <span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span> ];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [ , , thirdColor ] = colors;</span><br><span class="line">[firstColor, secondColor, thirdColor] = colors; <span class="comment">// no bracket compared with obj destruct</span></span><br><span class="line">[ a, b ] = [ b, a ];    <span class="comment">// swap variable</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Default Values</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [ firstColor, secondColor = <span class="string">"green"</span> ] = colors;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Nested Destructuring</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [ <span class="string">"red"</span>, [ <span class="string">"green"</span>, <span class="string">"lightgreen"</span> ], <span class="string">"blue"</span> ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// later</span></span><br><span class="line"><span class="keyword">let</span> [ firstColor, [ secondColor ] ] = colors;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>Rest Items</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [ <span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span> ];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [ firstColor, ...restColors ] = colors;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-4-Mixed-Destructuring"><a href="#5-4-Mixed-Destructuring" class="headerlink" title="5.4 Mixed Destructuring"></a>5.4 Mixed Destructuring</h2><ul>
<li>Combination of <code>Object Destructuring</code> and <code>Array Destructuring</code></li>
<li><p>Use case: fetch info from <code>JSON</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    type: <span class="string">"Identifier"</span>,</span><br><span class="line">    name: <span class="string">"foo"</span>,</span><br><span class="line">    loc: &#123;</span><br><span class="line">        start: &#123;</span><br><span class="line">            line: <span class="number">1</span>,</span><br><span class="line">            column: <span class="number">1</span></span><br><span class="line">        &#125;,</span><br><span class="line">        end: &#123;</span><br><span class="line">            line: <span class="number">1</span>,</span><br><span class="line">            column: <span class="number">4</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    range: [<span class="number">0</span>, <span class="number">3</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;</span><br><span class="line">    loc: &#123; start &#125;,</span><br><span class="line">    range: [ startIndex ]</span><br><span class="line">&#125; = node;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(start.line);        <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(start.column);      <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(startIndex);        <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-5-Destructured-Parameters"><a href="#5-5-Destructured-Parameters" class="headerlink" title="5.5 Destructured Parameters"></a>5.5 Destructured Parameters</h2><ul>
<li><p>It supports everything in this chapter, including:</p>
<ul>
<li>default values</li>
<li>mix object and array patterns</li>
<li><p>use variable names that differ from the properties</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, &#123; secure, path, domain, expires &#125;</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// code to set the cookie</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, &#123; </span></span></span><br><span class="line"><span class="function"><span class="params">    secure = false, </span></span></span><br><span class="line"><span class="function"><span class="params">    path = <span class="string">"/"</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">    domain = <span class="string">"example.com"</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">    expires = new Date(Date.now(</span>) + 360000000 </span></span><br><span class="line"><span class="function">    &#125;) </span>&#123;</span><br><span class="line">    <span class="comment">// with default value</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setCookie(<span class="string">"type"</span>, <span class="string">"js"</span>, &#123;</span><br><span class="line">    secure: <span class="literal">true</span>,</span><br><span class="line">    expires: <span class="number">60000</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h1 id="Chapter6-Symbols-and-Symbol-Properties"><a href="#Chapter6-Symbols-and-Symbol-Properties" class="headerlink" title="Chapter6 Symbols and Symbol Properties"></a>Chapter6 Symbols and Symbol Properties</h1><p>The <code>private names</code> proposal eventually evolved into ECMAScript 6 <code>symbols</code></p>
<h2 id="6-1-Creating-Symbols"><a href="#6-1-Creating-Symbols" class="headerlink" title="6.1 Creating Symbols"></a>6.1 Creating Symbols</h2><ul>
<li><p>Creating and Typeof</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="built_in">Symbol</span>(<span class="string">"first name"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(firstName); <span class="comment">// print firstName.toString(), which is [[Description]] </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> firstName);  <span class="comment">// "symbol"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-2-Using-Symbols"><a href="#6-2-Using-Symbols" class="headerlink" title="6.2 Using Symbols"></a>6.2 Using Symbols</h2><ul>
<li><p>computed object literal property names</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">[firstName]: <span class="string">"Nicholas"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Object.defineProperty()</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(person, firstName, &#123; <span class="attr">writable</span>: <span class="literal">false</span> &#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-3-Sharing-Symbols"><a href="#6-3-Sharing-Symbols" class="headerlink" title="6.3 Sharing Symbols"></a>6.3 Sharing Symbols</h2><ul>
<li><p>create a shared symbol</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> uid = <span class="built_in">Symbol</span>.for(<span class="string">"uid"</span>);</span><br><span class="line"><span class="keyword">let</span> uid2 = <span class="built_in">Symbol</span>.for(<span class="string">"uid"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(uid === uid2);      <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>access global shared symbol key</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.keyFor(uid2));   <span class="comment">// "uid"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-4-Symbol-Coercion"><a href="#6-4-Symbol-Coercion" class="headerlink" title="6.4 Symbol Coercion"></a>6.4 Symbol Coercion</h2><ul>
<li>Don’t do it</li>
</ul>
<h2 id="6-5-Retrieving-Symbol-Properties"><a href="#6-5-Retrieving-Symbol-Properties" class="headerlink" title="6.5 Retrieving Symbol Properties"></a>6.5 Retrieving Symbol Properties</h2><ul>
<li><code>Object.keys()</code> and <code>Object.getOwnPropertyNames()</code> don’t support Symbol property</li>
<li><p>Instead <code>Object.getOwnProperty-Symbols()</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> uid = <span class="built_in">Symbol</span>.for(<span class="string">"uid"</span>);</span><br><span class="line"><span class="keyword">let</span> object = &#123;</span><br><span class="line">    [uid]: <span class="string">"12345"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> symbols = <span class="built_in">Object</span>.getOwnPropertySymbols(object);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(symbols.length);        <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(symbols[<span class="number">0</span>]);            <span class="comment">// "Symbol(uid)"</span></span><br><span class="line"><span class="built_in">console</span>.log(object[symbols[<span class="number">0</span>]]);    <span class="comment">// "12345"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-6-Exposing-Internal-Operations-with-Well-Known-Symbols"><a href="#6-6-Exposing-Internal-Operations-with-Well-Known-Symbols" class="headerlink" title="6.6 Exposing Internal Operations with Well-Known Symbols"></a>6.6 Exposing Internal Operations with Well-Known Symbols</h2><ul>
<li><p>An example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> collection = &#123;</span><br><span class="line">    <span class="number">0</span>: <span class="string">"Hello"</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="string">"world"</span>,</span><br><span class="line">    length: <span class="number">2</span>,</span><br><span class="line">    [<span class="built_in">Symbol</span>.isConcatSpreadable]: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Full list</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Symbol.hasInstance</td>
<td>A method used by instanceof to determine an object’s inheritance.</td>
</tr>
<tr>
<td>Symbol.isConcatSpreadable</td>
<td>A Boolean value indicating that <code>Array.prototype.concat()</code> should flatten the collection’s elements if the collection is passed as a parameter to <code>Array.prototype.concat()</code>.</td>
</tr>
<tr>
<td>Symbol.iterator</td>
<td>A method that returns an iterator. (Chapter 8)</td>
</tr>
<tr>
<td>Symbol.match</td>
<td>Used by <code>String.prototype.match()</code> to compare strings.</td>
</tr>
<tr>
<td>Symbol.replace</td>
<td>Uused by <code>String.prototype.replace()</code> to replace substrings.</td>
</tr>
<tr>
<td>Symbol.search</td>
<td>Used by <code>String.prototype.search()</code> to locate substrings.</td>
</tr>
<tr>
<td>Symbol.species</td>
<td>The constructor for making derived objects. (Chapter 9)</td>
</tr>
<tr>
<td>Symbol.split</td>
<td>Used by <code>String.prototype.split()</code> to split up strings.</td>
</tr>
<tr>
<td>Symbol.toPrimitive</td>
<td>A method that returns a primitive value representation of an object.</td>
</tr>
<tr>
<td>Symbol.toStringTag</td>
<td>Used by <code>Object.prototype.toString()</code> to create an object description.</td>
</tr>
<tr>
<td>Symbol.unscopables</td>
<td>An object whose properties are the names of object properties that should not be included in a with statement.</td>
</tr>
</tbody>
</table>
<h1 id="Chapter7-Sets-and-Maps"><a href="#Chapter7-Sets-and-Maps" class="headerlink" title="Chapter7 Sets and Maps"></a>Chapter7 Sets and Maps</h1><h2 id="7-1-Sets-and-Maps-in-ECMAScript-5"><a href="#7-1-Sets-and-Maps-in-ECMAScript-5" class="headerlink" title="7.1 Sets and Maps in ECMAScript 5"></a>7.1 Sets and Maps in ECMAScript 5</h2><ul>
<li>Example  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">set.foo = <span class="literal">true</span>; <span class="comment">// set</span></span><br><span class="line">set.foo = bar;  <span class="comment">// map</span></span><br><span class="line"><span class="keyword">if</span> (set.foo) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-2-Problems-with-Workarounds"><a href="#7-2-Problems-with-Workarounds" class="headerlink" title="7.2 Problems with Workarounds"></a>7.2 Problems with Workarounds</h2><ul>
<li>a[0] and a[“0”]: different type but as same key</li>
<li>a[{}] and a[{}]: different obj but as same key </li>
</ul>
<h2 id="7-3-Sets-in-ECMAScript-6"><a href="#7-3-Sets-in-ECMAScript-6" class="headerlink" title="7.3 Sets in ECMAScript 6"></a>7.3 Sets in ECMAScript 6</h2><ul>
<li>Init: <code>let a = new Map();</code></li>
<li>Methods:<ul>
<li>add()</li>
<li>size</li>
<li>has()</li>
<li>delete()</li>
<li>clear()</li>
</ul>
</li>
<li><p>forEach(function(next, key, ownerSet), thisArg)</p>
<ul>
<li><code>next</code> always equal to <code>key</code></li>
<li><code>ownerSet</code>: set itself</li>
<li><code>thisArg</code>: defined <code>this</code> in function</li>
<li>Use an arrow function to get the same effect without passing <code>thisArg</code></li>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">process(dataSet) &#123;</span><br><span class="line">    dataSet.forEach(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="keyword">this</span>.output(value));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">process(dataSet) &#123;</span><br><span class="line">    dataSet.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.output(value);</span><br><span class="line">    &#125;, <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Set vs Array  </p>
</li>
</ul>
<table>
<thead>
<tr>
<th>convert</th>
<th>implement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Set -&gt; Array</td>
<td><code>[...set]</code></td>
</tr>
<tr>
<td>Array -&gt; Set</td>
<td><code>new Set(arr);</code></td>
</tr>
</tbody>
</table>
<ul>
<li><p>Weak Set</p>
<ul>
<li><p>Issue with Set: garbage collection</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>(),</span><br><span class="line">    key = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">set.add(key);</span><br><span class="line"></span><br><span class="line">key = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(set.size);      <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// get the original reference back</span></span><br><span class="line">key = [...set][<span class="number">0</span>];</span><br></pre></td></tr></table></figure>
</li>
<li><p>Init weak set: <code>new WeakSet()</code></p>
</li>
<li>Difference:<ol>
<li><code>add()</code> can only be object</li>
<li>Not iterable: cannot use <code>for-of</code> (link 8.4)</li>
<li>Do not expose iterator: e.g. no <code>keys()</code>, <code>values()</code></li>
<li>No <code>forEach()</code></li>
<li>No <code>size</code> attribute</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="7-4-Maps-in-ECMAScript-6"><a href="#7-4-Maps-in-ECMAScript-6" class="headerlink" title="7.4 Maps in ECMAScript 6"></a>7.4 Maps in ECMAScript 6</h2><ul>
<li>Init: <ul>
<li><code>let a = new Map();</code></li>
<li><code>let a = new Map([[&quot;kk&quot;, &quot;vv&quot;], &quot;kkk&quot;, &quot;vvv&quot;]]);</code></li>
</ul>
</li>
<li>Methods:<ul>
<li>set()</li>
<li>get()</li>
<li>size</li>
<li>has()</li>
<li>delete()</li>
<li>clear()</li>
</ul>
</li>
<li>forEach(): similar as Set, but callback <code>function(key, value, ownerMet)</code></li>
<li><p>Weak Set: similar as Set</p>
<ul>
<li>Only key is weak reference, not value</li>
<li><p>Use case:</p>
<ul>
<li>associated data with DOM elements<ul>
<li>key is removed authomatically while it is removed from DOM</li>
<li>never mind </li>
</ul>
</li>
<li><p>private attribute: amazing !!!</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Person = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> privateData = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        privateData.set(<span class="keyword">this</span>, &#123; <span class="attr">name</span>: name &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> privateData.get(<span class="keyword">this</span>).name;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Person;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="Chapter8-Iterators-and-Generators"><a href="#Chapter8-Iterators-and-Generators" class="headerlink" title="Chapter8 Iterators and Generators"></a>Chapter8 Iterators and Generators</h1><p>Use case:</p>
<ul>
<li><code>for-of</code></li>
<li>spread operator: <code>...</code></li>
<li>Asynchronous</li>
</ul>
<h2 id="8-1-The-Loop-Problem"><a href="#8-1-The-Loop-Problem" class="headerlink" title="8.1 The Loop Problem"></a>8.1 The Loop Problem</h2><h2 id="8-2-What-are-Iterators"><a href="#8-2-What-are-Iterators" class="headerlink" title="8.2 What are Iterators?"></a>8.2 What are Iterators?</h2><ul>
<li>Iterators are just objects with a specific interface designed for iteration. </li>
<li>All iterator objects have a next() method that returns<ul>
<li>{value: value, done: bool}</li>
</ul>
</li>
</ul>
<h2 id="8-3-What-Are-Generators"><a href="#8-3-What-Are-Generators" class="headerlink" title="8.3 What Are Generators?"></a>8.3 What Are Generators?</h2><ul>
<li>Definition<ul>
<li>indicated by a star character (*) after the function keyword </li>
<li>use the new <code>yield</code> keyword<ul>
<li><code>yield</code> can only be used in generator or syntax error will show up</li>
</ul>
</li>
<li>fetch value by <code>next()</code></li>
</ul>
</li>
<li><p>Example</p>
<ul>
<li><p>function keyword</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">createIterator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = createIterator();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next().value);     <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Generator Function Expression</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> createIterator = <span class="function"><span class="keyword">function</span> *(<span class="params">items</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> items[i];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Generator Object Methods</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    createIterator: <span class="function"><span class="keyword">function</span> *(<span class="params">items</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">yield</span> items[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">		</span><br><span class="line"><span class="comment">// method shorthand</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    *createIterator(items) &#123;</span><br><span class="line">        <span class="keyword">yield</span> items[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="8-4-Iterables-and-for-of"><a href="#8-4-Iterables-and-for-of" class="headerlink" title="8.4 Iterables and for-of"></a>8.4 Iterables and for-of</h2><ul>
<li><p>Iterables: An iterable is an object with a <code>Symbol.iterator</code> property. </p>
</li>
<li><p>for-of</p>
<ul>
<li>for-of loop first calls the <code>Symbol.iterator</code> method on array/set/map to retrieve an iterator. </li>
<li>for-of loop calls <code>next()</code> on an iterable each time the loop executes</li>
<li><p>stores the value from the result object in a variable</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> iterator = values[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li>Creating Iterables  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> collection = &#123;</span><br><span class="line">    items: [],</span><br><span class="line">    *[<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> <span class="keyword">this</span>.items) &#123;</span><br><span class="line">            <span class="keyword">yield</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="8-5-Built-in-Iterators"><a href="#8-5-Built-in-Iterators" class="headerlink" title="8.5 Built-in Iterators"></a>8.5 Built-in Iterators</h2><ul>
<li>entries(): Map default</li>
<li>keys()</li>
<li>values(): Set, Array default</li>
<li><p>Example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> map.entries())&#123;&#125;</span><br><span class="line"><span class="comment">// the same as</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> map)&#123;&#125;        <span class="comment">// Destructing: for (let [k, v] of map) &#123;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>String</code>, <code>NodeList</code> are also iterable</p>
</li>
</ul>
<h2 id="8-6-The-Spread-Operator-and-Non-Array-Iterables"><a href="#8-6-The-Spread-Operator-and-Non-Array-Iterables" class="headerlink" title="8.6 The Spread Operator and Non-Array Iterables"></a>8.6 The Spread Operator and Non-Array Iterables</h2><ul>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> smallNumbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">    bigNumbers = [<span class="number">100</span>, <span class="number">101</span>, <span class="number">102</span>],</span><br><span class="line">    allNumbers = [<span class="number">0</span>, ...smallNumbers, ...bigNumbers];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="8-7-Advanced-Iterator-Functionality"><a href="#8-7-Advanced-Iterator-Functionality" class="headerlink" title="8.7 Advanced Iterator Functionality"></a>8.7 Advanced Iterator Functionality</h2><ul>
<li><p>Passing Arguments to Iterators</p>
<ul>
<li>The first call to next() is lost. </li>
<li><p>arguments passed to next() become the values returned by yield</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">createIterator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> first = <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> second = <span class="keyword">yield</span> first + <span class="number">2</span>;       <span class="comment">// 4 + 2</span></span><br><span class="line">    <span class="keyword">yield</span> second + <span class="number">3</span>;                   <span class="comment">// 5 + 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterator = createIterator();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());           <span class="comment">// "&#123; value: 1, done: false &#125;"</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next(<span class="number">4</span>));          <span class="comment">// "&#123; value: 6, done: false &#125;"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Throwing Errors in Iterators</p>
<ul>
<li><code>console.log(iterator.throw(new Error(&quot;Boom&quot;)));</code></li>
<li>can have try-catch in generator</li>
</ul>
</li>
<li><p>Generator Return Statements</p>
<ul>
<li>indicates that all processing is done, so the done property is set to true</li>
<li>the value, if provided, becomes the value field</li>
</ul>
</li>
<li><p>Delegating Generators</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">createCombinedIterator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> *createNumberIterator();</span><br><span class="line">    <span class="keyword">yield</span> *createColorIterator();</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="8-8-Asynchronous-Task-Running"><a href="#8-8-Asynchronous-Task-Running" class="headerlink" title="8.8 Asynchronous Task Running"></a>8.8 Asynchronous Task Running</h2><ul>
<li><p>Use case:</p>
<ul>
<li>run asynchronous task by order</li>
<li>callback for asynchronous task</li>
</ul>
</li>
<li><p>Principle</p>
<ul>
<li>Store a series of asyn function in generator</li>
<li>Only after yeilding the result of an asyn function, we do next one</li>
</ul>
</li>
<li><p>Final</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">filename</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;                         <span class="comment">// the callback for result.value</span></span><br><span class="line">        fs.readFile(filename, callback);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">taskDef</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create the iterator, make available elsewhere</span></span><br><span class="line">    <span class="keyword">let</span> task = taskDef();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// start the task</span></span><br><span class="line">    <span class="keyword">let</span> result = task.next();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!result.done) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> result.value === <span class="string">"function"</span>) &#123;   <span class="comment">// check if need to run callback</span></span><br><span class="line">                result.value(<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                        result = task.throw(err);</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    result = task.next(data);</span><br><span class="line">                    step();</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                result = task.next(result.value);</span><br><span class="line">                step();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// start the process</span></span><br><span class="line">    step();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">run(<span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> contents = <span class="keyword">yield</span> readFile(<span class="string">"config.json"</span>);</span><br><span class="line">    doSomethingWith(contents);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Done"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Chapter9-Introducing-JavaScript-Classes"><a href="#Chapter9-Introducing-JavaScript-Classes" class="headerlink" title="Chapter9 Introducing JavaScript Classes"></a>Chapter9 Introducing JavaScript Classes</h1><h2 id="9-1-Class-Like-Structures-in-ECMAScript-5"><a href="#9-1-Class-Like-Structures-in-ECMAScript-5" class="headerlink" title="9.1 Class-Like Structures in ECMAScript 5"></a>9.1 Class-Like Structures in ECMAScript 5</h2><ul>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PersonType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PersonType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> PersonType(<span class="string">"Nicholas"</span>);</span><br><span class="line">person.sayName();   <span class="comment">// outputs "Nicholas"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person <span class="keyword">instanceof</span> PersonType);  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(person <span class="keyword">instanceof</span> <span class="built_in">Object</span>);      <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-2-Class-Declarations"><a href="#9-2-Class-Declarations" class="headerlink" title="9.2 Class Declarations"></a>9.2 Class Declarations</h2><h3 id="9-2-1-Example"><a href="#9-2-1-Example" class="headerlink" title="9.2.1 Example"></a>9.2.1 Example</h3><ul>
<li><p>example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    sayName() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> PersonClass(<span class="string">"Nicholas"</span>);</span><br><span class="line">person.sayName();   <span class="comment">// outputs "Nicholas"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person <span class="keyword">instanceof</span> PersonClass);     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(person <span class="keyword">instanceof</span> <span class="built_in">Object</span>);          <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> PersonClass);    <span class="comment">// "function"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> PersonClass.prototype.sayName);  <span class="comment">// "function"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>The PersonClass declaration actually creates a <strong>function</strong> that has the behavior of the <strong>constructor</strong> method, which is why <code>typeof PersonClass</code> gives “function” as the result</p>
</li>
<li>The <code>sayName()</code> method also becomes a method on <code>PersonClass.prototype</code></li>
</ul>
<h3 id="9-2-2-important-difference-with-custom-types"><a href="#9-2-2-important-difference-with-custom-types" class="headerlink" title="9.2.2 important difference with custom types"></a>9.2.2 important difference with custom types</h3><ol>
<li>Class declarations are not hoisted. Act like <code>let</code> declarations and so exist in the <strong>temporal dead zone</strong> until execution reaches the declaration.</li>
<li>All code inside of class declarations runs in <strong>strict mode</strong> automatically.</li>
<li>All methods are non-enumerable.</li>
<li>All methods lack an internal <code>[[Construct]]</code> method and will throw an error if you try to call them with <code>new</code>.</li>
<li>Calling the class constructor without new throws an error.</li>
<li>Attempting to overwrite the class name within a class method throws an error.</li>
</ol>
<ul>
<li><p>Equivalent of PersonClass, this is <strong>awesome</strong></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> PersonType2 = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    "use strict"</span>;</span><br><span class="line">    <span class="keyword">const</span> PersonType2 = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// make sure the function was called with new</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">new</span>.target === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Constructor must be called with new."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(PersonType2.prototype, <span class="string">"sayName"</span>, &#123;</span><br><span class="line">        value: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// make sure the method wasn't called with new</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">new</span>.target !== <span class="string">"undefined"</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Method cannot be called with new."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">        &#125;,</span><br><span class="line">        enumerable: <span class="literal">false</span>,</span><br><span class="line">        writable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> PersonType2;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-3-Class-Expressions"><a href="#9-3-Class-Expressions" class="headerlink" title="9.3 Class Expressions"></a>9.3 Class Expressions</h2><ul>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> PersonClass = <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> PersonClass(<span class="string">"Nicholas"</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-4-Classes-as-First-Class-Citizens"><a href="#9-4-Classes-as-First-Class-Citizens" class="headerlink" title="9.4 Classes as First-Class Citizens"></a>9.4 Classes as First-Class Citizens</h2><ul>
<li><p>first-class citizen means: </p>
<ul>
<li>it can be used as a value</li>
<li>it can be passed into a function</li>
<li>returned from a function</li>
<li><p>assigned to a variable</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObject</span>(<span class="params">classDef</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> classDef();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = createObject(<span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    sayHi() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Hi!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">obj.sayHi();</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>creating singletons</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="class"><span class="keyword">class</span> </span>&#123;...&#125;(<span class="string">"Nicholas"</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-5-Accessor-Properties"><a href="#9-5-Accessor-Properties" class="headerlink" title="9.5 Accessor Properties"></a>9.5 Accessor Properties</h2><ul>
<li><code>getter</code> and <code>setter</code>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomHTMLElement</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(element) &#123;</span><br><span class="line">        <span class="keyword">this</span>.element = element;</span><br><span class="line">    &#125;</span><br><span class="line">    get html() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.element.innerHTML;</span><br><span class="line">    &#125;</span><br><span class="line">    set html(value) &#123;</span><br><span class="line">        <span class="keyword">this</span>.element.innerHTML = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(CustomHTMLElement.prototype, <span class="string">"ht\</span></span><br><span class="line"><span class="string">ml"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"get"</span> <span class="keyword">in</span> descriptor);   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"set"</span> <span class="keyword">in</span> descriptor);   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(descriptor.enumerable); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-6-Computed-Member-Names"><a href="#9-6-Computed-Member-Names" class="headerlink" title="9.6 Computed Member Names"></a>9.6 Computed Member Names</h2><ul>
<li>Nothing special  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> propertyName = <span class="string">"html"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomHTMLElement</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(element) &#123;</span><br><span class="line">        <span class="keyword">this</span>.element = element;</span><br><span class="line">    &#125;</span><br><span class="line">    get [propertyName]() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.element.innerHTML;</span><br><span class="line">    &#125;</span><br><span class="line">    set [propertyName](value) &#123;</span><br><span class="line">        <span class="keyword">this</span>.element.innerHTML = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-7-Generator-Methods"><a href="#9-7-Generator-Methods" class="headerlink" title="9.7 Generator Methods"></a>9.7 Generator Methods</h2><ul>
<li><p>Naive example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    *createIterator() &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> instance = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="keyword">let</span> iterator = instance.createIterator();</span><br></pre></td></tr></table></figure>
</li>
<li><p>defining a default iterator for your class</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Collection</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.items = [];</span><br><span class="line">    &#125;</span><br><span class="line">    *[<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">        <span class="keyword">yield</span> *<span class="keyword">this</span>.items.values();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> collection = <span class="keyword">new</span> Collection();</span><br><span class="line">collection.items.push(<span class="number">1</span>);</span><br><span class="line">collection.items.push(<span class="number">2</span>);</span><br><span class="line">collection.items.push(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> collection) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-8-Static-Members"><a href="#9-8-Static-Members" class="headerlink" title="9.8 Static Members"></a>9.8 Static Members</h2><ul>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> create(name) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PersonClass(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-9-Inheritance-with-Derived-Classes"><a href="#9-9-Inheritance-with-Derived-Classes" class="headerlink" title="9.9 Inheritance with Derived Classes"></a>9.9 Inheritance with Derived Classes</h2><h3 id="9-9-1-Inheritance-with-Derived-Classes"><a href="#9-9-1-Inheritance-with-Derived-Classes" class="headerlink" title="9.9.1 Inheritance with Derived Classes"></a>9.9.1 Inheritance with Derived Classes</h3><ul>
<li>If specifying a constructor: <code>super()</code> is mandatory</li>
<li>If no constructor, <code>super()</code> is automatically called with all arguments upon creating a new instance of the class. </li>
<li>Can only use <code>super()</code> in a derived class.</li>
<li>Must call <code>super()</code> before accessing <code>this</code> in the constructor</li>
<li><p>The only way to avoid calling <code>super()</code> is to return an object from the class constructor.</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">    <span class="comment">// no constructor</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Is equivalent to</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">        <span class="keyword">super</span>(...args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="9-9-2-Shadowing-Class-Method"><a href="#9-9-2-Shadowing-Class-Method" class="headerlink" title="9.9.2 Shadowing Class Method"></a>9.9.2 Shadowing Class Method</h3><ul>
<li><p>Just like other languages</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(length) &#123;</span><br><span class="line">        <span class="keyword">super</span>(length, length);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// override and shadow Rectangle.prototype.getArea()</span></span><br><span class="line">    getArea() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.length * <span class="keyword">this</span>.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="9-9-3-Inherited-Static-Members"><a href="#9-9-3-Inherited-Static-Members" class="headerlink" title="9.9.3 Inherited Static Members"></a>9.9.3 Inherited Static Members</h3><ul>
<li><p>Just like other languages</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(length, width) &#123;</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">        <span class="keyword">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line">    getArea() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.length * <span class="keyword">this</span>.width;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> create(length, width) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rectangle(length, width);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(length) &#123;</span><br><span class="line">        <span class="comment">// same as Rectangle.call(this, length, length)</span></span><br><span class="line">        <span class="keyword">super</span>(length, length);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rect = Square.create(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(rect <span class="keyword">instanceof</span> Rectangle);     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(rect.getArea());                <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">console</span>.log(rect <span class="keyword">instanceof</span> Square);        <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="9-9-4-Derived-Classes-from-Expressions"><a href="#9-9-4-Derived-Classes-from-Expressions" class="headerlink" title="9.9.4 Derived Classes from Expressions"></a>9.9.4 Derived Classes from Expressions</h3><ul>
<li>Special<ul>
<li>You can use <code>extends</code> with any expression as long as the expression resolves to a function with <code>[[Construct]]</code> and a <code>prototype</code></li>
<li>Use case: dynamic extends<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle</span>(<span class="params">length, width</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.length = length;</span><br><span class="line">    <span class="keyword">this</span>.width = width;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Rectangle.prototype.getArea = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.length * <span class="keyword">this</span>.width;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBase</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Rectangle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">getBase</span>() </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(length) &#123;</span><br><span class="line">        <span class="keyword">super</span>(length, length);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> Square(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(x.getArea());               <span class="comment">// 9</span></span><br><span class="line"><span class="built_in">console</span>.log(x <span class="keyword">instanceof</span> Rectangle);    <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="9-9-5-Inheriting-from-Built-ins"><a href="#9-9-5-Inheriting-from-Built-ins" class="headerlink" title="9.9.5 Inheriting from Built-ins"></a>9.9.5 Inheriting from Built-ins</h3><ul>
<li><p>Just like other languages</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">    <span class="comment">// empty</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> MyArray();</span><br><span class="line">colors[<span class="number">0</span>] = <span class="string">"red"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(colors.length);         <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">colors.length = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(colors[<span class="number">0</span>]);             <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="9-9-6-The-Symbol-species-Property"><a href="#9-9-6-The-Symbol-species-Property" class="headerlink" title="9.9.6 The Symbol.species Property"></a>9.9.6 The Symbol.species Property</h3><ul>
<li><p>Why?</p>
<ul>
<li><p>They think subitems should not be <code>instanceof MyArray</code>, while I feel it’s good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">    <span class="comment">// empty</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> items = <span class="keyword">new</span> MyArray(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>),</span><br><span class="line">    subitems = items.slice(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(items <span class="keyword">instanceof</span> MyArray);      <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(subitems <span class="keyword">instanceof</span> MyArray);   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>The Symbol.species well-known symbol is used to define a static accessor property that returns a function. The following builtin types have Symbol.species defined:</p>
<ul>
<li>Array</li>
<li>ArrayBuffer (discussed in Chapter 10)</li>
<li>Map</li>
<li>Promise</li>
<li>RegExp</li>
<li>Set</li>
<li>Typed Arrays (discussed in Chapter 10)</li>
</ul>
</li>
</ul>
<h2 id="9-10-Using-new-target-in-Class-Constructors"><a href="#9-10-Using-new-target-in-Class-Constructors" class="headerlink" title="9.10 Using new.target in Class Constructors"></a>9.10 Using new.target in Class Constructors</h2><ul>
<li>determine how the class is being invoked  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span>.target === Shape) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"This class cannot be instantiated directly."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(length, width) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">        <span class="keyword">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> Shape();                <span class="comment">// throws error</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="keyword">new</span> Rectangle(<span class="number">3</span>, <span class="number">4</span>);        <span class="comment">// no error</span></span><br><span class="line"><span class="built_in">console</span>.log(y <span class="keyword">instanceof</span> Shape);    <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Chapter10-Improved-Array-Capabilities"><a href="#Chapter10-Improved-Array-Capabilities" class="headerlink" title="Chapter10 Improved Array Capabilities"></a>Chapter10 Improved Array Capabilities</h1><ul>
<li><p>Creating Arrays</p>
<ul>
<li><p><code>Array.of()</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>);    <span class="comment">//[1, 2]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>);   <span class="comment">//[1]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="string">"1"</span>);  <span class="comment">//["1"]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Array.from(iterable, map, this)</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> helper = &#123;</span><br><span class="line">    diff: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">    add(value) &#123;</span><br><span class="line">        <span class="keyword">return</span> value + <span class="keyword">this</span>.diff;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">translate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>, helper.add, helper);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> numbers = translate(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(numbers);               <span class="comment">// 2,3,4</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>New Methods on All Arrays</p>
<ul>
<li>find<ul>
<li><code>find(callback, this)</code></li>
<li><code>findIndex(callback, this)</code></li>
</ul>
</li>
<li><code>fill(value, startIndex, endIndex)</code></li>
<li><code>copyWithin(startFillIndex, startCopyIndex, howMany)</code></li>
</ul>
</li>
<li>Typed Arrays<ul>
<li>Improve calculation speed</li>
<li>Skip</li>
</ul>
</li>
</ul>
<h1 id="Chapter11-Promises-and-Asynchronous-Programming"><a href="#Chapter11-Promises-and-Asynchronous-Programming" class="headerlink" title="Chapter11 Promises and Asynchronous Programming"></a>Chapter11 Promises and Asynchronous Programming</h1><h2 id="11-1-Asynchronous-Programming-Background"><a href="#11-1-Asynchronous-Programming-Background" class="headerlink" title="11.1 Asynchronous Programming Background"></a>11.1 Asynchronous Programming Background</h2><ul>
<li>Background<ul>
<li>JavaScript engines are built on the concept of a single-threaded event loop</li>
<li>Whenever a piece of code is ready to be executed, it is added to the job queue</li>
<li>job execution runs from the first job in the queue to the last</li>
</ul>
</li>
<li>Old Patterns<ul>
<li>The Event Model<ul>
<li>chaining multiple separate asynchronous calls together is more complicated</li>
<li>button were clicked before onclick is assigned</li>
</ul>
</li>
<li>The Callback Pattern<ul>
<li>nested callback is dizaster</li>
<li>asynchronous operations to run in parallel</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="11-2-Promise-Basics"><a href="#11-2-Promise-Basics" class="headerlink" title="11.2 Promise Basics"></a>11.2 Promise Basics</h2><ul>
<li><code>[[PromiseState]]</code>: not exposed<ul>
<li>Fulfilled: Settled. Completed successfully.</li>
<li>Rejected: Settled. Didn’t complete successfully</li>
<li>Pending: Unsettled</li>
</ul>
</li>
<li><p>Promise vs thenable</p>
<ul>
<li>all promises are thenable</li>
<li>not all thenables are promise</li>
<li>all thenable has a <code>then(fulFill, reject)</code></li>
<li><p>all promise has a <code>then(fulFill, reject)</code> and <code>catch(reject)</code> method</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = readFile(<span class="string">"example.txt"</span>);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">contents</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// fulfillment</span></span><br><span class="line">    <span class="built_in">console</span>.log(contents);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// rejection</span></span><br><span class="line">    <span class="built_in">console</span>.error(err.message);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// same</span></span><br><span class="line">promise.then(<span class="literal">null</span>, reject);</span><br><span class="line">promise.catch(reject);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Each call to <code>then()</code> or <code>catch()</code> creates a new job to be executed <strong>when the promise is resolved</strong></p>
</li>
<li>Without a rejection handler to a promise, all failures will happen silently</li>
</ul>
</li>
<li><p>Creating Unsettled Promises</p>
<ul>
<li><p><code>new Promise(excutor)</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">filename</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// trigger the asynchronous operation</span></span><br><span class="line">        fs.readFile(filename, &#123; <span class="attr">encoding</span>: <span class="string">"utf8"</span> &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, contents</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// check for errors</span></span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                reject(err);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// the read succeeded</span></span><br><span class="line">            resolve(contents);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>fulfillment and rejection handlers are always added to the end of the job queue after the executor has completed. <strong>Behave like setTimeout</strong></p>
<ul>
<li><p>example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Promise"</span>);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Resolved."</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Hi!"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="comment">// Hi!</span></span><br><span class="line"><span class="comment">// Resolved</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="11-3-Global-Promise-Rejection-Handling"><a href="#11-3-Global-Promise-Rejection-Handling" class="headerlink" title="11.3 Global Promise Rejection Handling"></a>11.3 Global Promise Rejection Handling</h2><ul>
<li>Issue: silent failure that occurs when a promise is rejected without a rejection handler</li>
<li><p>Solution: Event + setInterval</p>
<ul>
<li>event<ul>
<li>unhandlerejection</li>
<li>rejectionhandled</li>
</ul>
</li>
<li>setInterval</li>
<li><p>example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> possiblyUnhandledRejections = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="built_in">window</span>.onunhandledrejection = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    possiblyUnhandledRejections.set(event.promise, event.reason);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.onrejectionhandled = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    possiblyUnhandledRejections.delete(event.promise);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    possiblyUnhandledRejections.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">reason, promise</span>) </span>&#123;</span><br><span class="line">        handleRejection(promise, reason);</span><br><span class="line">    &#125;);</span><br><span class="line">possiblyUnhandledRejections.clear();</span><br><span class="line"></span><br><span class="line">&#125;, <span class="number">60000</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="11-4-Chaining-Promises"><a href="#11-4-Chaining-Promises" class="headerlink" title="11.4 Chaining Promises"></a>11.4 Chaining Promises</h2><ul>
<li>Each call to then() or catch() actually creates and returns another promise</li>
<li>This second promise is resolved only once the first has been fulfilled or rejected</li>
<li><p>example</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;resolve(<span class="number">42</span>);&#125;);</span><br><span class="line"></span><br><span class="line">p1.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"then"</span>);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Boom"</span>);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error.message);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Returning Values in Promise Chains</p>
<ul>
<li><p>data</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    reject(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p1.catch(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);         <span class="comment">// "42"</span></span><br><span class="line">    <span class="keyword">return</span> value + <span class="number">1</span>;</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);         <span class="comment">// "43"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Promise</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    reject(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p1.catch(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);         <span class="comment">// "42"</span></span><br><span class="line">    <span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        reject(<span class="number">43</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> p2</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);         <span class="comment">// "43"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="11-5-Responding-to-Multiple-Promises"><a href="#11-5-Responding-to-Multiple-Promises" class="headerlink" title="11.5 Responding to Multiple Promises"></a>11.5 Responding to Multiple Promises</h2><ul>
<li><code>Promise.all()</code><ul>
<li>The returned promise is fulfilled when every promise in the iterable is fulfilled</li>
<li>If anyone is rejected, it is immediately rejected without waiting for others</li>
</ul>
</li>
<li><code>Promise.race()</code><ul>
<li>returns as soon as any promise in the array is fulfilled</li>
<li>if the first promise to settle is rejected, then the returned promise is rejected</li>
</ul>
</li>
</ul>
<h2 id="11-6-Inheriting-from-Promises"><a href="#11-6-Inheriting-from-Promises" class="headerlink" title="11.6 Inheriting from Promises"></a>11.6 Inheriting from Promises</h2><ul>
<li>Since static methods are inherited, resolve(), reject(), race(), all() method are also present on derived promises</li>
<li><p>Because of <code>Symbol.species</code>, resolve(), reject() will tag class as the derived class</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    resolve(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = MyPromise.resolve(p1);</span><br><span class="line">p2.success(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);         <span class="comment">// 42</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p2 <span class="keyword">instanceof</span> MyPromise);   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Chapter12-Proxies-and-the-Reflection-API"><a href="#Chapter12-Proxies-and-the-Reflection-API" class="headerlink" title="Chapter12 Proxies and the Reflection API"></a>Chapter12 Proxies and the Reflection API</h1><ul>
<li>Proxies exposes the inner workings of objects through</li>
<li>Proxies can intercept and alter low-level operations of the JavaScript engine. </li>
</ul>
<h2 id="12-1-The-Array-Problem"><a href="#12-1-The-Array-Problem" class="headerlink" title="12.1 The Array Problem"></a>12.1 The Array Problem</h2><ul>
<li>User cannot do <code>arr.length = 2</code></li>
</ul>
<h2 id="12-2-What-are-Proxies-and-Reflection"><a href="#12-2-What-are-Proxies-and-Reflection" class="headerlink" title="12.2 What are Proxies and Reflection?"></a>12.2 What are Proxies and Reflection?</h2><table>
<thead>
<tr>
<th>Proxy Trap</th>
<th>Overrides the Behavior Of</th>
<th>Default Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>get</td>
<td>Reading a property value</td>
<td>Reflect.get()</td>
</tr>
<tr>
<td>set</td>
<td>Writing to a property</td>
<td>Reflect.set()</td>
</tr>
<tr>
<td>has</td>
<td>The in operator</td>
<td>Reflect.has()</td>
</tr>
<tr>
<td>deleteProperty</td>
<td>The delete operator</td>
<td>Reflect.deleteProperty()</td>
</tr>
<tr>
<td>getPrototypeOf</td>
<td>Object.getPrototypeOf()</td>
<td>Reflect.getPrototypeOf()</td>
</tr>
<tr>
<td>setPrototypeOf</td>
<td>Object.setPrototypeOf()</td>
<td>Reflect.setPrototypeOf()</td>
</tr>
<tr>
<td>isExtensible</td>
<td>Object.isExtensible()</td>
<td>Reflect.isExtensible()</td>
</tr>
<tr>
<td>preventExtensions</td>
<td>Object.preventExtensions()</td>
<td>Reflect.preventExtensions()</td>
</tr>
<tr>
<td>getOwnPropertyDescriptor</td>
<td>Object.getOwnPropertyDescriptor()</td>
<td>Reflect.getOwnPropertyDescriptor()</td>
</tr>
<tr>
<td>defineProperty</td>
<td>Object.defineProperty()</td>
<td>Reflect.defineProperty</td>
</tr>
<tr>
<td>ownKeys</td>
<td>Object.keys, Object.getOwnPropertyNames(), Object.getOwnPropertySymbols()</td>
<td>Reflect.ownKeys()</td>
</tr>
<tr>
<td>apply</td>
<td>Calling a function</td>
<td>Reflect.apply()</td>
</tr>
<tr>
<td>construct</td>
<td>Calling a function with new</td>
<td>Reflect.construct()</td>
</tr>
</tbody>
</table>
<ul>
<li><p>example <code>set: only allow numbers for new property</code></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = &#123;</span><br><span class="line">    name: <span class="string">"target"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, &#123;</span><br><span class="line">    set(trapTarget, key, value, receiver) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ignore existing properties so as not to affect them</span></span><br><span class="line">        <span class="keyword">if</span> (!trapTarget.hasOwnProperty(key)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">isNaN</span>(value)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Property must be a number."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// add the property</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(trapTarget, key, value, receiver);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// adding a new property</span></span><br><span class="line">proxy.count = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(proxy.count);       <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(target.count);      <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// you can assign to name because it exists on target already</span></span><br><span class="line">proxy.name = <span class="string">"proxy"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(proxy.name);        <span class="comment">// "proxy"</span></span><br><span class="line"><span class="built_in">console</span>.log(target.name);       <span class="comment">// "proxy"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// throws an error</span></span><br><span class="line">proxy.anotherName = <span class="string">"proxy"</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Revocable Proxies</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = &#123;</span><br><span class="line">    name: <span class="string">"target"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; proxy, revoke &#125; = <span class="built_in">Proxy</span>.revocable(target, &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(proxy.name);        <span class="comment">// "target"</span></span><br><span class="line"></span><br><span class="line">revoke();</span><br><span class="line"></span><br><span class="line"><span class="comment">// throws error</span></span><br><span class="line"><span class="built_in">console</span>.log(proxy.name);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Chapter13-Encapsulating-Code-With-Modules"><a href="#Chapter13-Encapsulating-Code-With-Modules" class="headerlink" title="Chapter13 Encapsulating Code With Modules"></a>Chapter13 Encapsulating Code With Modules</h1><h2 id="13-1-What-are-Modules"><a href="#13-1-What-are-Modules" class="headerlink" title="13.1 What are Modules?"></a>13.1 What are Modules?</h2><ul>
<li><strong>Variables</strong> created in the <strong>top level</strong> of a module exist only within the top-level scope of the module.</li>
<li>The value of <strong>this</strong> in the top level of a module is undefined.</li>
<li>Modules must export anything that should be available to code outside of the module.</li>
<li>Modules may import bindings from other modules.</li>
</ul>
<h2 id="13-2-Basic-Exporting"><a href="#13-2-Basic-Exporting" class="headerlink" title="13.2 Basic Exporting"></a>13.2 Basic Exporting</h2><ul>
<li>any variables, functions, or classes that are not explicitly exported remain private to the module</li>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export data</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> color = <span class="string">"red"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name = <span class="string">"Nicholas"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> magicNumber = <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// export function</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// export class</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(length, width) &#123;</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">        <span class="keyword">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="13-3-Basic-Importing"><a href="#13-3-Basic-Importing" class="headerlink" title="13.3 Basic Importing"></a>13.3 Basic Importing</h2><ul>
<li>An important limitation of both export and import is that they must be used outside other statements and functions</li>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; identifier1, identifier2 &#125; <span class="keyword">from</span> <span class="string">"./example.js"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">"./example.js"</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> example <span class="keyword">from</span> <span class="string">"./example.js"</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="13-4-Renaming-Exports-and-Imports"><a href="#13-4-Renaming-Exports-and-Imports" class="headerlink" title="13.4 Renaming Exports and Imports"></a>13.4 Renaming Exports and Imports</h2><ul>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; sum <span class="keyword">as</span> add &#125;;</span><br></pre></td></tr></table></figure>
</li>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add <span class="keyword">as</span> sum &#125; <span class="keyword">from</span> <span class="string">"./example.js"</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="13-5-Default-Values-in-Modules"><a href="#13-5-Default-Values-in-Modules" class="headerlink" title="13.5 Default Values in Modules"></a>13.5 Default Values in Modules</h2><ul>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">"./example.js"</span>;</span><br><span class="line"><span class="keyword">import</span> sum, &#123;color&#125; <span class="keyword">from</span> <span class="string">"./example.js"</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="13-6-Re-exporting-a-Binding"><a href="#13-6-Re-exporting-a-Binding" class="headerlink" title="13.6 Re-exporting a Binding"></a>13.6 Re-exporting a Binding</h2><ul>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">"./example.js"</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; sum &#125;;</span><br><span class="line"><span class="comment">// same as</span></span><br><span class="line"><span class="keyword">export</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">"./example.js"</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="13-7-Importing-Without-Bindings"><a href="#13-7-Importing-Without-Bindings" class="headerlink" title="13.7 Importing Without Bindings"></a>13.7 Importing Without Bindings</h2><ul>
<li>Some modules may only make modifications to objects in the global scope</li>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module code without exports or imports</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.pushAll = <span class="function"><span class="keyword">function</span>(<span class="params">items</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// items must be an array</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(items)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Argument must be an array."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use built-in push() and spread operator</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.push(...items);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="13-8-Loading-Modules"><a href="#13-8-Loading-Modules" class="headerlink" title="13.8 Loading Modules"></a>13.8 Loading Modules</h2><ul>
<li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"module"</span> src=<span class="string">"module.js"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>To support that functionality, always acts as if the defer attribute is applied</p>
</li>
<li>Modules are also executed in the order in which they appear in the HTML file</li>
<li>async<ul>
<li>All resources the module needs will be downloaded before the module executes</li>
<li>can’t guarantee when the module will execute</li>
</ul>
</li>
<li>Loading Modules as Workers<ul>
<li><code>let worker = new Worker(&quot;module.js&quot;, { type: &quot;module&quot; });</code></li>
</ul>
</li>
<li>Browser Module Specifier Resolution<ul>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this script locates https://www.example.com/modules/module.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// imports from https://www.example.com/modules/example1.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; first &#125; <span class="keyword">from</span> <span class="string">"./example1.js"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// imports from https://www.example.com/example2.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; second &#125; <span class="keyword">from</span> <span class="string">"../example2.js"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// imports from https://www.example.com/example3.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; third &#125; <span class="keyword">from</span> <span class="string">"/example3.js"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// imports from https://www2.example.com/example4.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; fourth &#125; <span class="keyword">from</span> <span class="string">"https://www2.example.com/example4.js"</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/15/Professional-Javascript-For-Web-Developer-Learning-Note/" rel="next" title="Professional Javascript For Web Developer Learning Note">
                <i class="fa fa-chevron-left"></i> Professional Javascript For Web Developer Learning Note
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpeg" alt="呆阿呆阿呆">
            
              <p class="site-author-name" itemprop="name">呆阿呆阿呆</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter1-Block-Bindings"><span class="nav-text">Chapter1 Block Bindings</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Var-Declarations-and-Hoisting"><span class="nav-text">1.1 Var Declarations and Hoisting</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Block-Level-Declarations"><span class="nav-text">1.2 Block-Level Declarations</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Block-Binding-in-Loops"><span class="nav-text">1.3 Block Binding in Loops</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-Global-Block-Bindings"><span class="nav-text">1.4 Global Block Bindings</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-Emerging-Best-Practices-for-Block-Bindings"><span class="nav-text">1.5 Emerging Best Practices for Block Bindings</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter2-Strings-and-Regular-Expressions"><span class="nav-text">Chapter2 Strings and Regular Expressions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-Better-Unicode-Support"><span class="nav-text">2.1 Better Unicode Support</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-Other-String-Changes"><span class="nav-text">2.2 Other String Changes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-Other-Regular-Expression-Changes"><span class="nav-text">2.3 Other Regular Expression Changes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-Template-Literals"><span class="nav-text">2.4 Template Literals</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter3-Functions"><span class="nav-text">Chapter3 Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-Functions-with-Default-Parameter-Values"><span class="nav-text">3.1 Functions with Default Parameter Values</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-Working-with-Unnamed-Parameters"><span class="nav-text">3.2 Working with Unnamed Parameters</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-Increased-Capabilities-of-the-Function-Constructor"><span class="nav-text">3.3 Increased Capabilities of the Function Constructor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-The-Spread-Operator"><span class="nav-text">3.4 The Spread Operator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-ECMAScript-6’s-name-Property"><span class="nav-text">3.5 ECMAScript 6’s name Property</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-Clarifying-the-Dual-Purpose-of-Functions"><span class="nav-text">3.6 Clarifying the Dual Purpose of Functions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7-Block-Level-Functions"><span class="nav-text">3.7 Block-Level Functions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-8-Arrow-Functions"><span class="nav-text">3.8 Arrow Functions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-9-Tail-Call-Optimization"><span class="nav-text">3.9 Tail Call Optimization</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter4-Expanded-Object-Functionality"><span class="nav-text">Chapter4 Expanded Object Functionality</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-Object-Categories"><span class="nav-text">4.1 Object Categories</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-Object-Literal-Syntax-Extensions"><span class="nav-text">4.2 Object Literal Syntax Extensions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-New-Methods"><span class="nav-text">4.3 New Methods</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-Duplicate-Object-Literal-Properties"><span class="nav-text">4.4 Duplicate Object Literal Properties</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-Own-Property-Enumeration-Order"><span class="nav-text">4.5 Own Property Enumeration Order</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-6-More-Powerful-Prototypes"><span class="nav-text">4.6 More Powerful Prototypes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-7-A-Formal-Method-Definition"><span class="nav-text">4.7 A Formal Method Definition</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter5-Destructuring-for-Easier-Data-Access"><span class="nav-text">Chapter5 Destructuring for Easier Data Access</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-Why-is-Destructuring-Useful"><span class="nav-text">5.1 Why is Destructuring Useful?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-Object-Destructuring"><span class="nav-text">5.2 Object Destructuring</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-Array-Destructuring"><span class="nav-text">5.3 Array Destructuring</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-Mixed-Destructuring"><span class="nav-text">5.4 Mixed Destructuring</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5-Destructured-Parameters"><span class="nav-text">5.5 Destructured Parameters</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter6-Symbols-and-Symbol-Properties"><span class="nav-text">Chapter6 Symbols and Symbol Properties</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-Creating-Symbols"><span class="nav-text">6.1 Creating Symbols</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-Using-Symbols"><span class="nav-text">6.2 Using Symbols</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-Sharing-Symbols"><span class="nav-text">6.3 Sharing Symbols</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-Symbol-Coercion"><span class="nav-text">6.4 Symbol Coercion</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-5-Retrieving-Symbol-Properties"><span class="nav-text">6.5 Retrieving Symbol Properties</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-Exposing-Internal-Operations-with-Well-Known-Symbols"><span class="nav-text">6.6 Exposing Internal Operations with Well-Known Symbols</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter7-Sets-and-Maps"><span class="nav-text">Chapter7 Sets and Maps</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-Sets-and-Maps-in-ECMAScript-5"><span class="nav-text">7.1 Sets and Maps in ECMAScript 5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-Problems-with-Workarounds"><span class="nav-text">7.2 Problems with Workarounds</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-Sets-in-ECMAScript-6"><span class="nav-text">7.3 Sets in ECMAScript 6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4-Maps-in-ECMAScript-6"><span class="nav-text">7.4 Maps in ECMAScript 6</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter8-Iterators-and-Generators"><span class="nav-text">Chapter8 Iterators and Generators</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-The-Loop-Problem"><span class="nav-text">8.1 The Loop Problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-What-are-Iterators"><span class="nav-text">8.2 What are Iterators?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-3-What-Are-Generators"><span class="nav-text">8.3 What Are Generators?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-4-Iterables-and-for-of"><span class="nav-text">8.4 Iterables and for-of</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-5-Built-in-Iterators"><span class="nav-text">8.5 Built-in Iterators</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-6-The-Spread-Operator-and-Non-Array-Iterables"><span class="nav-text">8.6 The Spread Operator and Non-Array Iterables</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-7-Advanced-Iterator-Functionality"><span class="nav-text">8.7 Advanced Iterator Functionality</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-8-Asynchronous-Task-Running"><span class="nav-text">8.8 Asynchronous Task Running</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter9-Introducing-JavaScript-Classes"><span class="nav-text">Chapter9 Introducing JavaScript Classes</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1-Class-Like-Structures-in-ECMAScript-5"><span class="nav-text">9.1 Class-Like Structures in ECMAScript 5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2-Class-Declarations"><span class="nav-text">9.2 Class Declarations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-1-Example"><span class="nav-text">9.2.1 Example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-2-important-difference-with-custom-types"><span class="nav-text">9.2.2 important difference with custom types</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3-Class-Expressions"><span class="nav-text">9.3 Class Expressions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-4-Classes-as-First-Class-Citizens"><span class="nav-text">9.4 Classes as First-Class Citizens</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-5-Accessor-Properties"><span class="nav-text">9.5 Accessor Properties</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-6-Computed-Member-Names"><span class="nav-text">9.6 Computed Member Names</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-7-Generator-Methods"><span class="nav-text">9.7 Generator Methods</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-8-Static-Members"><span class="nav-text">9.8 Static Members</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-9-Inheritance-with-Derived-Classes"><span class="nav-text">9.9 Inheritance with Derived Classes</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-9-1-Inheritance-with-Derived-Classes"><span class="nav-text">9.9.1 Inheritance with Derived Classes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-9-2-Shadowing-Class-Method"><span class="nav-text">9.9.2 Shadowing Class Method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-9-3-Inherited-Static-Members"><span class="nav-text">9.9.3 Inherited Static Members</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-9-4-Derived-Classes-from-Expressions"><span class="nav-text">9.9.4 Derived Classes from Expressions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-9-5-Inheriting-from-Built-ins"><span class="nav-text">9.9.5 Inheriting from Built-ins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-9-6-The-Symbol-species-Property"><span class="nav-text">9.9.6 The Symbol.species Property</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-10-Using-new-target-in-Class-Constructors"><span class="nav-text">9.10 Using new.target in Class Constructors</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter10-Improved-Array-Capabilities"><span class="nav-text">Chapter10 Improved Array Capabilities</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter11-Promises-and-Asynchronous-Programming"><span class="nav-text">Chapter11 Promises and Asynchronous Programming</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#11-1-Asynchronous-Programming-Background"><span class="nav-text">11.1 Asynchronous Programming Background</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-2-Promise-Basics"><span class="nav-text">11.2 Promise Basics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-3-Global-Promise-Rejection-Handling"><span class="nav-text">11.3 Global Promise Rejection Handling</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-4-Chaining-Promises"><span class="nav-text">11.4 Chaining Promises</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-5-Responding-to-Multiple-Promises"><span class="nav-text">11.5 Responding to Multiple Promises</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-6-Inheriting-from-Promises"><span class="nav-text">11.6 Inheriting from Promises</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter12-Proxies-and-the-Reflection-API"><span class="nav-text">Chapter12 Proxies and the Reflection API</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1-The-Array-Problem"><span class="nav-text">12.1 The Array Problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-2-What-are-Proxies-and-Reflection"><span class="nav-text">12.2 What are Proxies and Reflection?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter13-Encapsulating-Code-With-Modules"><span class="nav-text">Chapter13 Encapsulating Code With Modules</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-1-What-are-Modules"><span class="nav-text">13.1 What are Modules?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-2-Basic-Exporting"><span class="nav-text">13.2 Basic Exporting</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-3-Basic-Importing"><span class="nav-text">13.3 Basic Importing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-4-Renaming-Exports-and-Imports"><span class="nav-text">13.4 Renaming Exports and Imports</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-5-Default-Values-in-Modules"><span class="nav-text">13.5 Default Values in Modules</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-6-Re-exporting-a-Binding"><span class="nav-text">13.6 Re-exporting a Binding</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-7-Importing-Without-Bindings"><span class="nav-text">13.7 Importing Without Bindings</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-8-Loading-Modules"><span class="nav-text">13.8 Loading Modules</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">呆阿呆阿呆</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.7.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.7.0"></script>



  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  


  


  





  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
